[[],["<-","reshape",["function",[{"data":"","varying":"NULL","v.names":"NULL","timevar":"\"time\"","idvar":"\"id\"","ids":[":","1L",["NROW","data"]],"times":["seq_along",["[[","varying","1L"]],"drop":"NULL","direction":"","new.row.names":"NULL","sep":"\".\"","split":["if",["==","sep","\"\""],["{",["list",{"regexp":"\"[A-Za-z][0-9]\""},{"include":"TRUE"}]],["{",["list",{"regexp":"sep"},{"include":"FALSE"},{"fixed":"TRUE"}]]]}],["{",["if",["||",["!",["is.character","sep"]],["!=",["length","sep"],"1L"]],["stop","\"'sep' must be a character string\""]],["<-","ix2names",["function",[{"ix":""}],["if",["is.character","ix"],"ix",["[",["names","data"],"ix"]]]],["<-","guess",["function",[{"nms":"","re":["$","split","regexp"],"drop":["!",["$","split","include"]],"fixed":["if",["is.null",["$","split","fixed"]],"FALSE",["$","split","fixed"]]}],["{",["if","drop",["<-","nn",["do.call","\"rbind\"",["strsplit","nms","re",{"fixed":"fixed"}]]],["<-","nn",["cbind",["substr","nms","1L",["regexpr","re","nms"]],["substr","nms",["+",["regexpr","re","nms"],"1L"],"10000L"]]]],["if",["!=",["ncol","nn"],"2L"],["stop","\"failed to guess time-varying variables from their names\""]],["<-","vn",["unique",["[","nn",{},"1"]]],["<-","v.names",["split","nms",["factor",["[","nn",{},"1L"],{"levels":"vn"}]]],["<-","times",["unique",["[","nn",{},"2L"]]],["<-",["attr","v.names","\"v.names\""],"vn"],["<-","tt",["tryCatch",["as.numeric","times"],{"warning":["function",[{"w":""}],"times"]}]],["<-",["attr","v.names","\"times\""],"tt"],"v.names"]]],["<-","reshapeLong",["function",[{"data":"","varying":"","v.names":"NULL","timevar":"","idvar":"","ids":[":","1L",["NROW","data"]],"times":"","drop":"NULL","new.row.names":"NULL"}],["{",["<-","ll",["unlist",["lapply","varying","length"]]],["if",["any",["!=","ll",["[","ll","1L"]]],["stop","\"'varying' arguments must be the same length\""]],["if",["!=",["[","ll","1L"],["length","times"]],["stop","\"'lengths(varying)' must all match 'length(times)'\""]],["if",["!",["is.null","drop"]],["{",["if",["is.character","drop"],["<-","drop",["%in%",["names","data"],"drop"]]],["<-","data",["[","data",{},["if",["is.logical","drop"],["!","drop"],["-","drop"]],{"drop":"FALSE"}]]]],["<-","undoInfo",["list",{"varying":"varying"},{"v.names":"v.names"},{"idvar":"idvar"},{"timevar":"timevar"}]],["if",[">",["length","idvar"],"1L"],["{",["<-","ids",["interaction",["[","data",{},"idvar"],{"drop":"TRUE"}]]],["if",["%in%","idvar",["names","data"]],["{",["<-","ids",["[","data",{},"idvar"]]]]],["<-","d","data"],["<-","all.varying",["unlist","varying"]],["<-","d",["[","d",{},["!",["(",["%in%",["names","data"],"all.varying"]]],{"drop":"FALSE"}]],["if",["is.null","v.names"],["<-","v.names",["vapply","varying","`[`","1L",{"FUN.VALUE":["character","1L"]}]]],["<-","rval",["do.call","rbind",["lapply",["seq_along","times"],["function",[{"i":""}],["{",["<-",["[","d",{},"timevar"],["[","times","i"]],["<-","varying.i",["vapply","varying","`[`","i",{"FUN.VALUE":["character","1L"]}]],["<-",["[","d",{},"v.names"],["[","data",{},"varying.i"]],["if",["is.null","new.row.names"],["<-",["row.names","d"],["paste","ids",["[","times","i"],{"sep":"\".\""}]],["<-",["row.names","d"],["[","new.row.names",["+",["*",["(",["-","i","1L"]],["NROW","d"]],[":","1L",["NROW","d"]]]]]],"d"]]]]],["if",["&&",["==",["length","idvar"],"1L"],["!",["(",["%in%","idvar",["names","data"]]]]],["{",["<-",["[","rval",{},"idvar"],"ids"]]],["<-",["attr","rval","\"reshapeLong\""],"undoInfo"],["return","rval"]]]],["<-","reshapeWide",["function",[{"data":"","timevar":"","idvar":"","varying":"NULL","v.names":"NULL","drop":"NULL","new.row.names":"NULL"}],["{",["if",["!",["is.null","drop"]],["{",["if",["is.character","drop"],["<-","drop",["%in%",["names","data"],"drop"]]],["<-","data",["[","data",{},["if",["is.logical","drop"],["!","drop"],["-","drop"]],{"drop":"FALSE"}]]]],["<-","undoInfo",["list",{"v.names":"v.names"},{"timevar":"timevar"},{"idvar":"idvar"}]],["<-","orig.idvar","idvar"],["if",[">",["length","idvar"],"1L"],["{",["repeat",["(",["{",["<-","tempidname",["basename",["tempfile","\"tempID\""]]],["if",["!",["(",["%in%","tempidname",["names","data"]]]],["break"]]]]],["<-",["[","data",{},"tempidname"],["interaction",["[","data",{},"idvar"],{"drop":"TRUE"}]],["<-","idvar","tempidname"],["<-","drop.idvar","TRUE"]],["<-","drop.idvar","FALSE"]],["<-","times",["unique",["[","data",{},"timevar"]]],["if",["anyNA","times"],["warning","\"there are records with missing times, which will be dropped.\""]],["<-",["$","undoInfo","times"],"times"],["if",["is.null","v.names"],["<-","v.names",["[",["names","data"],["!",["(",["%in%",["names","data"],["c","timevar","idvar","orig.idvar"]]]]]]],["if",["is.null","varying"],["<-","varying",["outer","v.names","times","paste",{"sep":"sep"}]]],["if",["is.list","varying"],["<-","varying",["do.call","\"rbind\"","varying"]]],["<-",["$","undoInfo","varying"],"varying"],["<-","keep",["!",["(",["%in%",["names","data"],["c","timevar","v.names","idvar","orig.idvar"]]]]],["if",["any","keep"],["{",["<-","rval",["[","data","keep"]],["<-","tmp",["[","data",{},"idvar"]],["<-","really.constant",["unlist",["lapply","rval",["function",[{"a":""}],["all",["tapply","a",["as.vector","tmp"],["function",[{"b":""}],["==",["length",["unique","b"]],"1L"]]]]]]]],["if",["!",["all","really.constant"]],["warning",["gettextf","\"some constant variables (%s) are really varying\"",["paste",["[",["names","rval"],["!","really.constant"]],{"collapse":"\",\""}]],{"domain":"NA"}]]]],["<-","rval",["[","data",["!",["duplicated",["[","data",{},"idvar"]]],["!",["(",["%in%",["names","data"],["c","timevar","v.names"]]]],{"drop":"FALSE"}]],["for","i",["seq_along","times"],["{",["<-","thistime",["[","data",["%in%",["[","data",{},"timevar"],["[","times","i"]],{}]],["<-","tab",["table",["[","thistime",{},"idvar"]]],["if",["any",[">","tab","1L"]],["warning",["sprintf","\"multiple rows match for %s=%s: first taken\"","timevar",["[","times","i"]],{"domain":"NA"}]],["<-",["[","rval",{},["[","varying",{},"i"]],["[","thistime",["match",["[","rval",{},"idvar"],["[","thistime",{},"idvar"]],"v.names"]]]],["if",["!",["is.null","new.row.names"]],["<-",["row.names","rval"],"new.row.names"]],["if","drop.idvar",["<-",["[","rval",{},"idvar"],"NULL"]],["<-",["attr","rval","\"reshapeWide\""],"undoInfo"],"rval"]]],["if",["missing","direction"],["{",["<-","undo",["[",["c","\"wide\"","\"long\""],["%in%",["c","\"reshapeLong\"","\"reshapeWide\""],["names",["attributes","data"]]]]],["if",["==",["length","undo"],"1L"],["<-","direction","undo"]]]],["<-","direction",["match.arg","direction",["c","\"wide\"","\"long\""]]],["switch","direction",{"\"wide\"":["{",["<-","back",["attr","data","\"reshapeLong\""]],["if",["&&",["&&",["missing","timevar"],["missing","idvar"]],["!",["is.null","back"]]],["{",["reshapeWide","data",{"idvar":["$","back","idvar"]},{"timevar":["$","back","timevar"]},{"varying":["$","back","varying"]},{"v.names":["$","back","v.names"]},{"new.row.names":"new.row.names"}]],["{",["reshapeWide","data",{"idvar":"idvar"},{"timevar":"timevar"},{"varying":"varying"},{"v.names":"v.names"},{"drop":"drop"},{"new.row.names":"new.row.names"}]]]]},{"\"long\"":["{",["if",["missing","varying"],["{",["<-","back",["attr","data","\"reshapeWide\""]],["if",["is.null","back"],["stop","\"no 'reshapeWide' attribute, must specify 'varying'\""]],["<-","varying",["$","back","varying"]],["<-","idvar",["$","back","idvar"]],["<-","timevar",["$","back","timevar"]],["<-","v.names",["$","back","v.names"]],["<-","times",["$","back","times"]]]],["if",["is.matrix","varying"],["{",["<-","varying",["split",["c","varying"],["row","varying"]]]]],["if",["is.null","varying"],["stop","\"'varying' must be nonempty list or vector\""]],["if",["is.atomic","varying"],["{",["<-","varying",["ix2names","varying"]],["if",["missing","v.names"],["<-","varying",["guess","varying"]],["{",["if",["%%",["length","varying"],["length","v.names"]],["stop","\"length of 'v.names' does not evenly divide length of 'varying'\""]],["<-","ntimes",["%/%",["length","varying"],["length","v.names"]]],["if",["missing","times"],["<-","times",["seq_len","ntimes"]],["if",["!=",["length","times"],"ntimes"],["stop","\"length of 'varying' must be the product of length of 'v.names' and length of 'times'\""]]],["<-","varying",["split","varying",["rep","v.names","ntimes"]]],["<-",["attr","varying","\"v.names\""],"v.names"],["<-",["attr","varying","\"times\""],"times"]]]],["<-","varying",["lapply","varying","ix2names"]]],["if",["&&",["missing","v.names"],["!",["is.null",["attr","varying","\"v.names\""]]]],["{",["<-","v.names",["attr","varying","\"v.names\""]],["<-","times",["attr","varying","\"times\""]]]],["reshapeLong","data",{"idvar":"idvar"},{"timevar":"timevar"},{"varying":"varying"},{"v.names":"v.names"},{"drop":"drop"},{"times":"times"},{"ids":"ids"},{"new.row.names":"new.row.names"}]]}]]]]]
