[[],["if","FALSE",["{",[[":::","tools",".install_packages"],["c","\"--preclean\"","\"--no-multiarch\"","\"tree\""]],["<-","status",["tryCatch",[[":::","tools",".install_packages"],["c","\"--no-clean-on-error\"","\"--no-multiarch\"","\"tree\""],{"no.q":"TRUE"}],{"error":["function",[{"e":""}],["as.numeric",["sub","\".* exit status *\"","\"\"",["conditionMessage","e"]]]]}]],["debugonce",[":::","tools",".install_packages"]],[[":::","tools",".install_packages"],["c","\"-c\"","\"--debug\"","\"--no-clean-on-error\"","\"--no-multiarch\"","\"tree\""]],["debug","do_install"]]],["<-",".install_packages",["function",[{"args":"NULL","no.q":["interactive",{}],"warnOption":"1"}],["{",["<-","curPkg",["character",{}]],["<-","lockdir","\"\""],["<-","is_first_package","TRUE"],["<-","stars","\"*\""],["<-","user.tmpdir",["Sys.getenv","\"PKG_BUILD_DIR\""]],["<-","keep.tmpdir",["nzchar","user.tmpdir"]],["<-","tmpdir","\"\""],["<-","clean_on_error","TRUE"],["<-","do_exit",["if","no.q",["function",[{"status":""}],["stop","\".install_packages() exit status \"","status"]],["function",[{"status":""}],["q","\"no\"",{"status":"status"},{"runLast":"FALSE"}]]]],["<-","do_exit_on_error",["function",[{"status":"1L"}],["{",["if",["&&","clean_on_error",["length","curPkg"]],["{",["<-","pkgdir",["file.path","lib","curPkg"]],["if",["&&",["&&",["nzchar","pkgdir"],["dir.exists","pkgdir"]],["is_subdir","pkgdir","lib"]],["{",["starsmsg","stars","\"removing \"",["sQuote","pkgdir"]],["unlink","pkgdir",{"recursive":"TRUE"}]]],["if",["&&",["&&",["nzchar","lockdir"],["dir.exists",["<-","lp",["file.path","lockdir","curPkg"]]]],["is_subdir","lp","lockdir"]],["{",["starsmsg","stars","\"restoring previous \"",["sQuote","pkgdir"]],["if","WINDOWS",["{",["file.copy","lp",["dirname","pkgdir"],{"recursive":"TRUE"},{"copy.date":"TRUE"}],["unlink","lp",{"recursive":"TRUE"}]],["{",["setwd","startdir"],["if",["system",["paste","\"mv -f\"",["shQuote","lp"],["shQuote","pkgdir"]]],["message","\"  restoration failed\\n\""]]]]]]]],["do_cleanup",{}],["do_exit",{"status":"status"}]]]],["<-","do_cleanup",["function",[],["{",["if",["&&",["!","keep.tmpdir"],["nzchar","tmpdir"]],["do_cleanup_tmpdir",{}]],["if",["!","is_first_package"],["{",["if",["&&",["==","lib",".Library"],["%in%","\"html\"","build_help_types"]],[["::","utils","make.packages.html"],".Library",{"docdir":["R.home","\"doc\""]}]]]],["if",["nzchar","lockdir"],["unlink","lockdir",{"recursive":"TRUE"}]]]]],["<-","do_cleanup_tmpdir",["function",[],["{",["setwd","startdir"],["if",["&&",["!","keep.tmpdir"],["dir.exists","tmpdir"]],["unlink","tmpdir",{"recursive":"TRUE"}]]]]],["<-","quote_path",["function",[{"path":"","quote":"\"'\""}],["paste0","quote",["gsub","\"\\\\\\\\\"","\"\\\\\\\\\\\\\\\\\"","path"],"quote"]]],["on.exit",["do_exit_on_error",{}]],["<-","WINDOWS",["==",["$",".Platform","OS.type"],"\"windows\""]],["if","WINDOWS",["<-","MAKE","\"make\""],["<-","MAKE",["Sys.getenv","\"MAKE\""]]],["<-","rarch",["Sys.getenv","\"R_ARCH\""]],["if",["&&","WINDOWS",["nzchar",["$",".Platform","r_arch"]]],["<-","rarch",["paste0","\"/\"",["$",".Platform","r_arch"]]]],["<-","test_archs","rarch"],["<-","SHLIB_EXT",["if","WINDOWS","\".dll\"",["{",["<-","mconf",["file.path",["R.home",{}],["paste0","\"etc\"","rarch"],"\"Makeconf\""]],["sub","\".*= \"","\"\"",["grep","\"^SHLIB_EXT\"",["readLines","mconf"],{"value":"TRUE"},{"perl":"TRUE"}]]]]],["if",["<",["getOption","\"warn\""],"warnOption"],["{",["<-","op",["options",{"warn":"warnOption"}]],["on.exit",["options","op"],{"add":"TRUE"}]]],["invisible",["Sys.setlocale","\"LC_COLLATE\"","\"C\""]],["if","WINDOWS",["{",["<-","rhome",["chartr","\"\\\\\"","\"/\"",["R.home",{}]]],["Sys.setenv",{"R_HOME":"rhome"}],["if",["nzchar","rarch"],["Sys.setenv",{"R_ARCH":"rarch"},{"R_ARCH_BIN":"rarch"}]]]],["<-","Usage",["function",[],["{",["cat","\"Usage: R CMD INSTALL [options] pkgs\"","\"\"","\"Install the add-on packages specified by pkgs.  The elements of pkgs can\"","\"be relative or absolute paths to directories with the package\"","\"sources, or to gzipped package 'tar' archives.  The library tree\"","\"to install to can be specified via '--library'.  By default, packages are\"","\"installed in the library tree rooted at the first directory in\"","\".libPaths() for an R session run in the current environment.\"","\"\"","\"Options:\"","\"  -h, --help\t\tprint short help message and exit\"","\"  -v, --version\t\tprint INSTALL version info and exit\"","\"  -c, --clean\t\tremove files created during installation\"","\"      --preclean\tremove files created during a previous run\"","\"  -d, --debug\t\tturn on debugging messages\"",["if","WINDOWS","\"\t\t\tand build a debug DLL\""],"\"  -l, --library=LIB\tinstall packages to library tree LIB\"","\"      --no-configure    do not use the package's configure script\"","\"      --no-docs\t\tdo not install HTML, LaTeX or examples help\"","\"      --html\t\tbuild HTML help\"","\"      --no-html\t\tdo not build HTML help\"","\"      --latex      \tinstall LaTeX help\"","\"      --example\t\tinstall R code for help examples\"","\"      --fake\t\tdo minimal install for testing purposes\"","\"      --no-lock\t\tinstall on top of any existing installation\"","\"\t\t\twithout using a lock directory\"","\"      --lock\t\tuse a per-library lock directory (default)\"","\"      --pkglock\t\tuse a per-package lock directory\"","\"      \t\t\t(default for a single package)\"","\"      --build    \tbuild binaries of the installed package(s)\"","\"      --install-tests\tinstall package-specific tests (if any)\"","\"      --no-R, --no-libs, --no-data, --no-help, --no-demo, --no-exec,\"","\"      --no-inst\"","\"\t\t\tsuppress installation of the specified part of the\"","\"\t\t\tpackage for testing or other special purposes\"","\"      --no-multiarch\tbuild only the main architecture\"","\"      --libs-only\tonly install the libs directory\"","\"      --data-compress=\tnone, gzip (default), bzip2 or xz compression\"","\"\t\t\tto be used for lazy-loading of data\"","\"      --resave-data\tre-save data files as compactly as possible\"","\"      --compact-docs\tre-compress PDF files under inst/doc\"","\"      --with-keep.source\"","\"      --without-keep.source\"","\"\t\t\tuse (or not) 'keep.source' for R code\"","\"      --with-keep.parse.data\"","\"      --without-keep.parse.data\"","\"\t\t\tuse (or not) 'keep.parse.data' for R code\"","\"      --byte-compile\tbyte-compile R code\"","\"      --no-byte-compile\tdo not byte-compile R code\"","\"      --staged-install\tinstall to a temporary directory and then move\"","\"                   \tto the target directory (default)\"","\"      --no-staged-install\tinstall directly to the target directory\"","\"      --no-test-load\tskip test of loading installed package\"","\"      --no-clean-on-error\tdo not remove installed package on error\"","\"      --merge-multiarch\tmulti-arch by merging (from a single tarball only)\"","\"      --use-vanilla\tdo not read any Renviron or Rprofile files\"","\"\\nfor Unix\"","\"      --configure-args=ARGS\"","\"\t\t\tset arguments for the configure scripts (if any)\"","\"      --configure-vars=VARS\"","\"\t\t\tset variables for the configure scripts (if any)\"","\"      --strip           strip shared object(s)\"","\"      --dsym            (macOS only) generate dSYM directory\"","\"      --built-timestamp=STAMP\"","\"                   set timestamp for Built: entry in DESCRIPTION\"","\"\\nand on Windows only\"","\"      --force-biarch\tattempt to build both architectures\"","\"\t\t\teven if there is a non-empty configure.win\"","\"      --compile-both\tcompile both architectures on 32-bit Windows\"","\"\"","\"Which of --html or --no-html is the default depends on the build of R:\"",["paste0","\"for this one it is \"",["if","static_html","\"--html\"","\"--no-html\""],"\".\""],"\"\"","\"Report bugs at <https://bugs.R-project.org>.\"",{"sep":"\"\\n\""}]]]],["<-","is_subdir",["function",[{"dir":"","parent":""}],["{",["<-","rl",["Sys.readlink","dir"]],["||",["(",["&&",["!",["is.na","rl"]],["nzchar","rl"]]],["==",["normalizePath","parent"],["normalizePath",["file.path","dir","\"..\""]]]]]]],["<-","fullpath",["function",[{"dir":""}],["{",["<-","owd",["setwd","dir"]],["<-","full",["getwd",{}]],["setwd","owd"],"full"]]],["<-","parse_description_field",["function",[{"desc":"","field":"","default":""}],["str_parse_logic",["[","desc","field"],{"default":"default"},{"otherwise":["quote",["errmsg","\"invalid value of \"","field","\" field in DESCRIPTION\""]]}]]],["<-","starsmsg",["function",[{"stars":"","...":""}],["message","stars","\" \"","...",{"domain":"NA"}]]],["<-","errmsg",["function",[{"...":""}],["{",["message","\"ERROR: \"","...",{"domain":"NA"}],["do_exit_on_error",{}]]]],["<-","pkgerrmsg",["function",[{"msg":"","pkg":""}],["errmsg","msg","\" for package \"",["sQuote","pkg"]]]],["<-","do_install",["function",[{"pkg":""}],["{",["if",["&&","WINDOWS",["endsWith","pkg","\".zip\""]],["{",["<-","pkg_name",["basename","pkg"]],["<-","pkg_name",["sub","\"\\\\.zip$\"","\"\"","pkg_name"]],["<-","pkg_name",["sub","\"_[0-9.-]+$\"","\"\"","pkg_name"]],["<-","reuse_lockdir",["&&","lock",["!","pkglock"]]],["if","pkglock",["<-","lock","\"pkglock\""]],[[":::","utils","unpackPkgZip"],"pkg","pkg_name","lib","libs_only","lock",{"reuse_lockdir":"reuse_lockdir"}],["return",{}]]],["setwd","pkg"],["<-","desc",["tryCatch",["read.dcf",["<-","fd",["file.path","pkg","\"DESCRIPTION\""]]],{"error":"identity"}]],["if",["||",["inherits","desc","\"error\""],["!",["length","desc"]]],["stop",["gettextf","\"error reading file '%s'\"","fd"],{"domain":"NA"},{"call.":"FALSE"}]],["<-","desc",["[","desc","1L",{}]],["if",["!",["is.na",["[","desc","\"Bundle\""]]],["{",["stop","\"this seems to be a bundle -- and they are defunct\""]],["{",["<-","pkg_name",["[","desc","\"Package\""]],["if",["is.na","pkg_name"],["errmsg","\"no 'Package' field in 'DESCRIPTION'\""]],["<<-","curPkg","pkg_name"]]],["<-","instdir",["file.path","lib","pkg_name"]],["Sys.setenv",{"R_PACKAGE_NAME":"pkg_name"},{"R_PACKAGE_DIR":"instdir"}],["<-","status",[".Rtest_package_depends_R_version",{}]],["if","status",["do_exit_on_error",{}]],["dir.create","instdir",{"recursive":"TRUE"},{"showWarnings":"FALSE"}],["if",["!",["dir.exists","instdir"]],["{",["message","\"ERROR: unable to create \"",["sQuote","instdir"],{"domain":"NA"}],["do_exit_on_error",{}]]],["if",["!",["is_subdir","instdir","lib"]],["{",["message","\"ERROR: \"",["sQuote","pkg_name"],"\" is not a legal package name\"",{"domain":"NA"}],["do_exit_on_error",{}]]],["<-","owd",["setwd","instdir"]],["if",["==","owd",["getwd",{}]],["pkgerrmsg","\"cannot install to srcdir\"","pkg_name"]],["setwd","owd"],["<-","is_source_package",["is.na",["[","desc","\"Built\""]]],["if","is_source_package",["{",["<-","sys_requires",["[","desc","\"SystemRequirements\""]],["if",["!",["is.na","sys_requires"]],["{",["<-","sys_requires",["unlist",["strsplit","sys_requires","\",\""]]],["if",["any",["grepl","\"^[[:space:]]*C[+][+]17[[:space:]]*$\"","sys_requires",{"ignore.case":"TRUE"}]],["{",["Sys.setenv",{"\"R_PKG_CXX_STD\"":"\"CXX17\""}],["on.exit",["Sys.unsetenv","\"R_PKG_CXX_STD\""]]],["if",["any",["grepl","\"^[[:space:]]*C[+][+]14[[:space:]]*$\"","sys_requires",{"ignore.case":"TRUE"}]],["{",["Sys.setenv",{"\"R_PKG_CXX_STD\"":"\"CXX14\""}],["on.exit",["Sys.unsetenv","\"R_PKG_CXX_STD\""]]],["if",["any",["grepl","\"^[[:space:]]*C[+][+]11[[:space:]]*$\"","sys_requires",{"ignore.case":"TRUE"}]],["{",["Sys.setenv",{"\"R_PKG_CXX_STD\"":"\"CXX11\""}],["on.exit",["Sys.unsetenv","\"R_PKG_CXX_STD\""]]],["if",["any",["grepl","\"^[[:space:]]*C[+][+]98[[:space:]]*$\"","sys_requires",{"ignore.case":"TRUE"}]],["{",["Sys.setenv",{"\"R_PKG_CXX_STD\"":"\"CXX98\""}],["on.exit",["Sys.unsetenv","\"R_PKG_CXX_STD\""]]]]]]]]]]],["if",["!","is_first_package"],["cat","\"\\n\""]],["if","is_source_package",["do_install_source","pkg_name","instdir","pkg","desc"],["do_install_binary","pkg_name","instdir","desc"]],[".Call","C_dirchmod","instdir","group.writable"],["<<-","is_first_package","FALSE"],["if","tar_up",["{",["starsmsg","stars","\"creating tarball\""],["<-","version",["[","desc","\"Version\""]],["<-","filename",["if",["!",["grepl","\"darwin\"",["$","R.version","os"]]],["{",["paste0","pkg_name","\"_\"","version","\"_R_\"",["Sys.getenv","\"R_PLATFORM\""],"\".tar.gz\""]],["{",["paste0","pkg_name","\"_\"","version","\".tgz\""]]]],["<-","filepath",["file.path","startdir","filename"]],["<-","owd",["setwd","lib"]],["<-","res",[["::","utils","tar"],"filepath","curPkg",{"compression":"\"gzip\""},{"compression_level":"9L"},{"tar":["Sys.getenv","\"R_INSTALL_TAR\""]}]],["if","res",["errmsg",["sprintf","\"packaging into %s failed\"",["sQuote","filename"]]]],["message","\"packaged installation of \"",["sQuote","pkg_name"],"\" as \"",["sQuote","filename"],{"domain":"NA"}],["setwd","owd"]]],["if","zip_up",["{",["starsmsg","stars","\"MD5 sums\""],[".installMD5sums","instdir"],["<-","ZIP","\"zip\""],["<-","version",["[","desc","\"Version\""]],["<-","filename",["paste0","pkg_name","\"_\"","version","\".zip\""]],["<-","filepath",["shQuote",["file.path","startdir","filename"]]],["unlink","filepath"],["<-","owd",["setwd","lib"]],["<-","res",["system",["paste",["shQuote","ZIP"],"\"-r9Xq\"","filepath",["paste","curPkg",{"collapse":"\" \""}]]]],["setwd","owd"],["if","res",["message","\"running 'zip' failed\"",{"domain":"NA"}],["message","\"packaged installation of \"",["sQuote","pkg_name"],"\" as \"","filename",{"domain":"NA"}]]]],["if",["!=",["Sys.getenv","\"_R_INSTALL_NO_DONE_\""],"\"yes\""],["{",["starsmsg","stars","\"DONE (\"","pkg_name","\")\""]]],["<<-","curPkg",["character",{}]]]]],["<-","do_install_binary",["function",[{"pkg":"","instdir":"","desc":""}],["{",["starsmsg","stars","\"installing *binary* package \"",["sQuote","pkg"],"\" ...\""],["if",["file.exists",["file.path","instdir","\"DESCRIPTION\""]],["{",["if",["nzchar","lockdir"],["system",["paste","\"mv -f\"",["shQuote","instdir"],["shQuote",["file.path","lockdir","pkg"]]]]],["dir.create","instdir",{"recursive":"TRUE"},{"showWarnings":"FALSE"}]]],["<-","TAR",["Sys.getenv","\"TAR\"","'tar'"]],["<-","res",["system",["paste","\"cp -R .\"",["shQuote","instdir"],"\"|| (\"","TAR","\"cd - .| (cd\"",["shQuote","instdir"],"\"&&\"","TAR","\"-xf -))\""]]],["if","res",["errmsg","\"installing binary package failed\""]],["if","tar_up",["{",["starsmsg","stars",["sQuote","pkg"],"\" was already a binary package and will not be rebuilt\""],["<-","tar_up","FALSE"]]]]]],["<-","run_clean",["function",[],["{",["if",["&&",["dir.exists","\"src\""],["length",[">",["dir","\"src\"",{"all.files":"TRUE"}],"2L"]]],["{",["if","WINDOWS",["<-","archs",["c","\"i386\"","\"x64\""]],["{",["<-","wd2",["setwd",["file.path",["R.home","\"bin\""],"\"exec\""]]],["<-","archs",["Sys.glob","\"*\""]],["setwd","wd2"]]],["if",["length","archs"],["for","arch","archs",["{",["<-","ss",["paste0","\"src-\"","arch"]],[".Call","C_dirchmod","ss","group.writable"],["unlink","ss",{"recursive":"TRUE"}]]]],["<-","owd",["setwd","\"src\""]],["if","WINDOWS",["{",["if",["file.exists","\"Makefile.win\""],["system",["paste","MAKE","\"-f Makefile.win clean\""]],["unlink",["c","\"Makedeps\"",["Sys.glob","\"*_res.rc\""],["Sys.glob","\"*.[do]\""]]]]],["{",["if",["file.exists","\"Makefile\""],["system",["paste","MAKE","\"clean\""]],["unlink",["Sys.glob",["paste0","\"*\"","SHLIB_EXT"]]]]]],["setwd","owd"]]],["if","WINDOWS",["{",["if",["file.exists","\"cleanup.win\""],["system","\"sh ./cleanup.win\""]]],["if",["file_test","\"-x\"","\"cleanup\""],["system","\"./cleanup\""],["if",["file.exists","\"cleanup\""],["warning","\"'cleanup' exists but is not executable -- see the 'R Installation and Administration Manual'\"",{"call.":"FALSE"}]]]]]]],["<-","do_install_source",["function",[{"pkg_name":"","instdir":"","pkg_dir":"","desc":""}],["{",["Sys.setenv",{"\"R_INSTALL_PKG\"":"pkg_name"}],["on.exit",["Sys.unsetenv","\"R_INSTALL_PKG\""]],["<-","shlib_install",["function",[{"instdir":"","arch":""}],["{",["if",["file.exists","\"install.libs.R\""],["{",["message","\"installing via 'install.libs.R' to \"","instdir",{"domain":"NA"}],["<-","local.env",["local",["{",["<-","SHLIB_EXT","SHLIB_EXT"],["<-","R_PACKAGE_DIR","instdir"],["<-","R_PACKAGE_NAME","pkg_name"],["<-","R_PACKAGE_SOURCE","pkg_dir"],["<-","R_ARCH","arch"],["<-","WINDOWS","WINDOWS"],["environment",{}]]]],["<-",["parent.env","local.env"],".GlobalEnv"],["source","\"install.libs.R\"",{"local":"local.env"}],["return","TRUE"]]],["<-","files",["Sys.glob",["paste0","\"*\"","SHLIB_EXT"]]],["if",["length","files"],["{",["<-","libarch",["if",["nzchar","arch"],["paste0","\"libs\"","arch"],"\"libs\""]],["<-","dest",["file.path","instdir","libarch"]],["message","'installing to '","dest",{"domain":"NA"}],["dir.create","dest",{"recursive":"TRUE"},{"showWarnings":"FALSE"}],["file.copy","files","dest",{"overwrite":"TRUE"}],["if",["&&",["(",["||","do_strip",["config_val_to_logical",["Sys.getenv","\"_R_SHLIB_STRIP_\"","\"false\""]]]],["nzchar",["<-","strip_cmd",["Sys.getenv","\"R_STRIP_SHARED_LIB\""]]]],["{",["system",["paste",["c","strip_cmd",["shQuote",["file.path","dest","files"]]],{"collapse":"\" \""}]]]],["if",["!","WINDOWS"],["Sys.chmod",["file.path","dest","files"],"dmode"]],["if",["&&","dsym",["startsWith",["$","R.version","os"],"\"darwin\""]],["{",["message",["gettextf","\"generating debug symbols (%s)\"","\"dSYM\""],{"domain":"NA"}],["<-","dylib",["Sys.glob",["paste0","dest","\"/*\"","SHLIB_EXT"]]],["for","file","dylib",["system",["paste0","\"dsymutil \"","file"]]]]],["if",["&&",["config_val_to_logical",["Sys.getenv","\"_R_SHLIB_BUILD_OBJECTS_SYMBOL_TABLES_\"","\"TRUE\""]],["file_test","\"-f\"","\"symbols.rds\""]],["{",["file.copy","\"symbols.rds\"","dest"]]]]]]]],["<-","run_shlib",["function",[{"pkg_name":"","srcs":"","instdir":"","arch":""}],["{",["<-","args",["c","shargs","\"-o\"",["paste0","pkg_name","SHLIB_EXT"],"srcs"]],["if",["&&","WINDOWS","debug"],["<-","args",["c","args","\"--debug\""]]],["if","debug",["message","\"about to run \"","\"R CMD SHLIB \"",["paste","args",{"collapse":"\" \""}],{"domain":"NA"}]],["if",["==",[".shlib_internal","args"],"0L"],["{",["if",["&&",["&&","WINDOWS",["!",["file.exists","\"install.libs.R\""]]],["!",["length",["Sys.glob","\"*.dll\""]]]],["{",["message","\"no DLL was created\""],["return","TRUE"]]],["shlib_install","instdir","arch"],["return","FALSE"]],["return","TRUE"]]]]],["<-","patch_rpaths",["function",[],["{",["<-","slibs",["list.files","instdir",{"recursive":"TRUE"},{"all.files":"TRUE"},{"full.names":"TRUE"}]],["<-","slibs",["grep","\"(\\\\.sl$)|(\\\\.so$)|(\\\\.dylib$)|(\\\\.dll$)\"","slibs",{"value":"TRUE"}]],["if",["!",["length","slibs"]],["return",{}]],["<-","have_file",["nzchar",["Sys.which","\"file\""]]],["if","have_file",["{",["<-","are_shared",["vapply","slibs",["function",[{"l":""}],["any",["grepl","\"(shared|dynamically linked)\"",["system",["paste","\"file\"",["shQuote","l"]],{"intern":"TRUE"}]]]],"NA"]],["<-","slibs",["[","slibs","are_shared"]],["if",["!",["length","slibs"]],["return",{}]]]],["starsmsg","stars","\"checking absolute paths in shared objects and dynamic libraries\""],["<-","uname",["system","\"uname -a\"",{"intern":"TRUE"}]],["<-","os",["sub","\" .*\"","\"\"","uname"]],["<-","have_chrpath",["nzchar",["Sys.which","\"chrpath\""]]],["<-","have_patchelf",["nzchar",["Sys.which","\"patchelf\""]]],["<-","have_readelf",["nzchar",["Sys.which","\"readelf\""]]],["<-","have_macos_clt",["&&",["&&",["identical","os","\"Darwin\""],["nzchar",["Sys.which","\"otool\""]]],["nzchar",["Sys.which","\"install_name_tool\""]]]],["<-","have_solaris_elfedit",["&&",["identical","os","\"SunOS\""],["nzchar",["Sys.which","\"elfedit\""]]]],["<-","hardcoded_paths","FALSE"],["<-","failed_fix","FALSE"],["if","have_solaris_elfedit",["{",["for","l","slibs",["{",["<-","out",["suppressWarnings",["system",["paste","\"elfedit -re dyn:value\"",["shQuote","l"]],{"intern":"TRUE"}]]],["<-","out",["grep","\"^[ \\t]*\\\\[[0-9]+\\\\]\"","out",{"value":"TRUE"}]],["<-","re","\"^[ \\t]*\\\\[([0-9]+)\\\\][ \\t]+([^ \\t]+)[ \\t]+([^ \\t]+)[ \\t]*(.*)\""],["<-","paths",["gsub","re","\"\\\\4\"","out"]],["<-","idxs",["gsub","re","\"\\\\1\"","out"]],["<-","old_paths","paths"],["<-","paths",["gsub","instdir","final_instdir","paths",{"fixed":"TRUE"}]],["<-","changed",["!=","paths","old_paths"]],["<-","paths",["[","paths","changed"]],["<-","old_paths",["[","old_paths","changed"]],["<-","idxs",["[","idxs","changed"]],["for","i",["seq_along","paths"],["{",["<-","hardcoded_paths","TRUE"],["<-","qp",["gsub","'([\" \\\\])'","\"\\\\\\\\\\\\1\"",["[","paths","i"]]],["<-","qp",["gsub","\"'\"","\"\\\\\\\\'\"","qp"]],["<-","cmd",["paste","\"elfedit -e \\\"dyn:value -dynndx -s\"",["[","idxs","i"],"qp","\"\\\"\"",["shQuote","l"]]],["message","cmd"],["<-","ret",["suppressWarnings",["system","cmd",{"intern":"FALSE"}]]],["if",["==","ret","0"],["message","\"NOTE: fixed path \"",["[","old_paths","i"]]]]],["<-","out",["suppressWarnings",["system",["paste","\"elfedit -re dyn:value\"",["shQuote","l"]],{"intern":"TRUE"}]]],["<-","out",["grep","\"^[ \\t]*\\\\[\"","out",{"value":"TRUE"}]],["<-","paths",["gsub","re","\"\\\\4\"","out"]],["if",["any",["grepl","instdir","paths",{"fixed":"TRUE"}]],["<-","failed_fix","TRUE"]]]]],["if","have_macos_clt",["{",["for","l","slibs",["{",["<-","out",["suppressWarnings",["system",["paste","\"otool -D\"",["shQuote","l"]],{"intern":"TRUE"}]]],["<-","out",["[","out",["-","1L"]]],["<-","oldid","out"],["if",["&&",["==",["length","oldid"],"1"],["grepl","instdir","oldid",{"fixed":"TRUE"}]],["{",["<-","hardcoded_paths","TRUE"],["<-","newid",["gsub","instdir","final_instdir","oldid",{"fixed":"TRUE"}]],["<-","cmd",["paste","\"install_name_tool -id\"",["shQuote","newid"],["shQuote","l"]]],["message","cmd"],["<-","ret",["suppressWarnings",["system","cmd",{"intern":"FALSE"}]]],["if",["==","ret","0"],["message","\"NOTE: fixed library identification name \"","oldid"]]]],["<-","out",["suppressWarnings",["system",["paste","\"otool -L\"",["shQuote","l"]],{"intern":"TRUE"}]]],["<-","paths",["grep","\"\\\\(compatibility\"","out",{"value":"TRUE"}]],["<-","paths",["gsub","\"^[ \\t]*(.*) \\\\(compatibility.*\"","\"\\\\1\"","paths"]],["<-","old_paths","paths"],["<-","paths",["gsub","instdir","final_instdir","paths",{"fixed":"TRUE"}]],["<-","changed",["!=","paths","old_paths"]],["<-","paths",["[","paths","changed"]],["<-","old_paths",["[","old_paths","changed"]],["for","i",["seq_along","paths"],["{",["<-","hardcoded_paths","TRUE"],["<-","cmd",["paste","\"install_name_tool -change\"",["shQuote",["[","old_paths","i"]],["shQuote",["[","paths","i"]],["shQuote","l"]]],["message","cmd"],["<-","ret",["suppressWarnings",["system","cmd",{"intern":"FALSE"}]]],["if",["==","ret","0"],["message","\"NOTE: fixed library path \"",["[","old_paths","i"]]]]],["<-","out",["suppressWarnings",["system",["paste","\"otool -L\"",["shQuote","l"]],{"intern":"TRUE"}]]],["<-","out",["grep","\"\\\\(compatibility\"","out",{"value":"TRUE"}]],["if",["any",["grepl","instdir","out",{"fixed":"TRUE"}]],["<-","failed_fix","TRUE"]],["<-","out",["suppressWarnings",["system",["paste","\"otool -l\"",["shQuote","l"]],{"intern":"TRUE"}]]],["<-","out",["grep","\"(^[ \\t]*cmd )|(^[ \\t]*path )\"","out",{"value":"TRUE"}]],["<-","rpidx",["grep","\"cmd LC_RPATH$\"","out"]],["if",["length","rpidx"],["{",["<-","paths",["gsub","\"^[ \\t]*path \"","\"\"",["[","out",["+","rpidx","1"]]]],["<-","paths",["gsub","\"(.*) \\\\(offset .*\"","\"\\\\1\"","paths"]],["<-","old_paths","paths"],["<-","paths",["gsub","instdir","final_instdir","paths",{"fixed":"TRUE"}]],["<-","changed",["!=","paths","old_paths"]],["<-","paths",["[","paths","changed"]],["<-","old_paths",["[","old_paths","changed"]],["for","i",["seq_along","paths"],["{",["<-","hardcoded_paths","TRUE"],["<-","cmd",["paste","\"install_name_tool -rpath\"",["shQuote",["[","old_paths","i"]],["shQuote",["[","paths","i"]],["shQuote","l"]]],["message","cmd"],["<-","ret",["suppressWarnings",["system","cmd"]]],["if",["==","ret","0"],["message","\"NOTE: fixed rpath \"",["[","old_paths","i"]]]]]]],["<-","out",["suppressWarnings",["system",["paste","\"otool -l\"",["shQuote","l"]],{"intern":"TRUE"}]]],["<-","out",["[","out",["-","1L"]]],["if",["any",["grepl","instdir","out",{"fixed":"TRUE"}]],["<-","failed_fix","TRUE"]]]]],["if","have_patchelf",["{",["for","l","slibs",["{",["<-","rpath",["suppressWarnings",["system",["paste","\"patchelf --print-rpath\"",["shQuote","l"]],{"intern":"TRUE"}]]],["<-","old_rpath","rpath"],["<-","rpath",["gsub","instdir","final_instdir","rpath",{"fixed":"TRUE"}]],["if",["&&",["&&",["length","rpath"],["nzchar","rpath"]],["!=","old_rpath","rpath"]],["{",["<-","hardcoded_paths","TRUE"],["<-","cmd",["paste","\"patchelf\"","\"--set-rpath\"",["shQuote","rpath"],["shQuote","l"]]],["message","cmd"],["<-","ret",["suppressWarnings",["system","cmd"]]],["if",["==","ret","0"],["message","\"NOTE: fixed rpath \"","old_rpath"]],["<-","rpath",["suppressWarnings",["system",["paste","\"patchelf --print-rpath\"",["shQuote","l"]],{"intern":"TRUE"}]]],["if",["any",["grepl","instdir","rpath",{"fixed":"TRUE"}]],["<-","failed_fix","TRUE"]]]],["if","have_readelf",["{",["<-","out",["suppressWarnings",["system",["paste","\"readelf -d\"",["shQuote","l"]],{"intern":"TRUE"}]]],["<-","re0","\"0x.*\\\\(NEEDED\\\\).*Shared library:\""],["<-","out",["grep","re0","out",{"value":"TRUE"}]],["<-","re","\"^[ \\t]*0x[0-9]+[ \\t]+\\\\(NEEDED\\\\)[ \\t]+Shared library:[ \\t]*\\\\[(.*)\\\\]\""],["<-","paths",["gsub","re","\"\\\\1\"","out"]],["<-","old_paths","paths"],["<-","paths",["gsub","instdir","final_instdir","paths",{"fixed":"TRUE"}]],["<-","changed",["!=","paths","old_paths"]],["<-","paths",["[","paths","changed"]],["<-","old_paths",["[","old_paths","changed"]],["for","i",["seq_along","paths"],["{",["<-","cmd",["paste","\"patchelf --replace-needed\"",["shQuote",["[","old_paths","i"]],["shQuote",["[","paths","i"]],["shQuote","l"]]],["message","cmd"],["<-","ret",["suppressWarnings",["system","cmd"]]],["if",["==","ret","0"],["message","\"NOTE: fixed library path \"",["[","old_paths","i"]]]]],["<-","out",["suppressWarnings",["system",["paste","\"readelf -d\"",["shQuote","l"]],{"intern":"TRUE"}]]],["<-","out",["grep","re0","out",{"value":"TRUE"}]],["if",["any",["grepl","instdir","out",{"fixed":"TRUE"}]],["<-","failed_fix","TRUE"]]]]]]],["if","have_chrpath",["{",["for","l","slibs",["{",["<-","out",["suppressWarnings",["system",["paste","\"chrpath\"",["shQuote","l"]],{"intern":"TRUE"}]]],["<-","rpath",["grep","\".*PATH=\"","out",{"value":"TRUE"}]],["<-","rpath",["gsub","\".*PATH=\"","\"\"","rpath"]],["<-","old_rpath","rpath"],["<-","rpath",["gsub","instdir","final_instdir","rpath",{"fixed":"TRUE"}]],["if",["&&",["&&",["length","rpath"],["nzchar","rpath"]],["!=","old_rpath","rpath"]],["{",["<-","hardcoded_paths","TRUE"],["<-","cmd",["paste","\"chrpath\"","\"-r\"",["shQuote","rpath"],["shQuote","l"]]],["message","cmd"],["<-","ret",["suppressWarnings",["system","cmd"]]],["if",["==","ret","0"],["message","\"NOTE: fixed rpath \"","old_rpath"]],["<-","out",["suppressWarnings",["system",["paste","\"chrpath\"",["shQuote","l"]],{"intern":"TRUE"}]]],["<-","rpath",["grep","\".*PATH=\"","out",{"value":"TRUE"}]],["<-","rpath",["gsub","\".*PATH=\"","\"\"","rpath"]],["if",["any",["grepl","instdir","rpath",{"fixed":"TRUE"}]],["<-","failed_fix","TRUE"]]]]]]]]]]],["if","hardcoded_paths",["message","\"WARNING: shared objects/dynamic libraries with hard-coded temporary installation paths\""]],["if","failed_fix",["errmsg","\"some hard-coded temporary paths could not be fixed\""]],["if","have_readelf",["{",["for","l","slibs",["{",["<-","out",["suppressWarnings",["system",["paste","\"readelf -d\"",["shQuote","l"]],{"intern":"TRUE"}]]],["<-","out",["grep","\"^[ \\t]*0x\"","out",{"value":"TRUE"}]],["if",["any",["grepl","instdir","out",{"fixed":"TRUE"}]],["{",["<-","ll",["sub",["file.path","instdir","\"\""],"\"\"","l",{"fixed":"TRUE"}]],["errmsg","\"absolute paths in \"",["sQuote","ll"],"\" include the temporary installation directory:\"","\" please report to the package maintainer\"","\" and use \"",["sQuote","\"--no-staged-install\""]]]]]]]]]]],["Sys.setenv",{"R_LIBRARY_DIR":"lib"}],["if",["nzchar","lib0"],["{",["<-","rlibs",["Sys.getenv","\"R_LIBS\""]],["<-","rlibs",["if",["nzchar","rlibs"],["paste","lib","rlibs",{"sep":["$",".Platform","path.sep"]}],"lib"]],["Sys.setenv",{"R_LIBS":"rlibs"}],[".libPaths",["c","lib",[".libPaths",{}]]]]],["<-","Type",["[","desc","\"Type\""]],["if",["&&",["!",["is.na","Type"]],["==","Type","\"Frontend\""]],["{",["if","WINDOWS",["errmsg","\"'Frontend' packages are Unix-only\""]],["starsmsg","stars","\"installing *Frontend* package \"",["sQuote","pkg_name"],"\" ...\""],["if","preclean",["system",["paste","MAKE","\"clean\""]]],["if","use_configure",["{",["if",["file_test","\"-x\"","\"configure\""],["{",["<-","res",["system",["paste",["paste","configure_vars",{"collapse":"\" \""}],"\"./configure\"",["paste","configure_args",{"collapse":"\" \""}]]]],["if","res",["pkgerrmsg","\"configuration failed\"","pkg_name"]]],["if",["file.exists","\"configure\""],["errmsg","\"'configure' exists but is not executable -- see the 'R Installation and Administration Manual'\""]]]]],["if",["file.exists","\"Makefile\""],["if",["system","MAKE"],["pkgerrmsg","\"make failed\"","pkg_name"]]],["if","clean",["system",["paste","MAKE","\"clean\""]]],["return",{}]]],["if",["&&",["!",["is.na","Type"]],["==","Type","\"Translation\""]],["errmsg","\"'Translation' packages are defunct\""]],["<-","OS_type",["[","desc","\"OS_type\""]],["if","WINDOWS",["{",["if",["&&",["(",["&&",["!",["is.na","OS_type"]],["==","OS_type","\"unix\""]]],["!","fake"]],["errmsg","\" Unix-only package\""]]],["{",["if",["&&",["(",["&&",["!",["is.na","OS_type"]],["==","OS_type","\"windows\""]]],["!","fake"]],["errmsg","\" Windows-only package\""]]]],["if","group.writable",["{",["<-","fmode","\"664\""],["<-","dmode","\"775\""]],["{",["<-","fmode","\"644\""],["<-","dmode","\"755\""]]],["<-","pkgInfo",[".split_description",[".read_description","\"DESCRIPTION\""]]],["<-","pkgs",["unique",["c",["names",["$","pkgInfo","Depends"]],["names",["$","pkgInfo","Imports"]],["names",["$","pkgInfo","LinkingTo"]]]]],["if",["length","pkgs"],["{",["<-","miss",["character",{}]],["for","pkg","pkgs",["{",["if",["!",["length",["find.package","pkg",{"quiet":"TRUE"}]]],["<-","miss",["c","miss","pkg"]]]]],["if",[">",["length","miss"],"1"],["pkgerrmsg",["sprintf","\"dependencies %s are not available\"",["paste",["sQuote","miss"],{"collapse":"\", \""}]],"pkg_name"],["if",["length","miss"],["pkgerrmsg",["sprintf","\"dependency %s is not available\"",["sQuote","miss"]],"pkg_name"]]]]],["starsmsg","stars","\"installing *source* package \"",["sQuote","pkg_name"],"\" ...\""],["<-","stars","\"**\""],["<-","res",["checkMD5sums","pkg_name",["getwd",{}]]],["if",["&&",["!",["is.na","res"]],"res"],["{",["starsmsg","stars",["gettextf","\"package %s successfully unpacked and MD5 sums checked\"",["sQuote","pkg_name"]]]]],["if",["file.exists",["file.path","instdir","\"DESCRIPTION\""]],["{",["if",["nzchar","lockdir"],["{",["if","debug",["starsmsg","stars","\"backing up earlier installation\""]],["if","WINDOWS",["{",["file.copy","instdir","lockdir",{"recursive":"TRUE"},{"copy.date":"TRUE"}],["if","more_than_libs",["unlink","instdir",{"recursive":"TRUE"}]]],["if","more_than_libs",["system",["paste","\"mv -f \"",["shQuote","instdir"],["shQuote",["file.path","lockdir","pkg_name"]]]],["file.copy","instdir","lockdir",{"recursive":"TRUE"},{"copy.date":"TRUE"}]]]],["if","more_than_libs",["unlink","instdir",{"recursive":"TRUE"}]]],["if",["&&","more_than_libs",["dir.exists","instdir"]],["errmsg","\"cannot remove earlier installation, is it in use?\""]],["dir.create","instdir",{"recursive":"TRUE"},{"showWarnings":"FALSE"}]]],["<-","pkg_staged_install",["<-","SI",["parse_description_field","desc","\"StagedInstall\"",{"default":"NA"}]]],["if",["is.na","pkg_staged_install"],["<-","pkg_staged_install","staged_install"]],["if",["&&","pkg_staged_install","libs_only"],["{",["<-","pkg_staged_install","FALSE"],["message","\"not using staged install with --libs-only\""]]],["if",["&&","pkg_staged_install",["!","lock"]],["{",["<-","pkg_staged_install","FALSE"],["message","\"staged installation is only possible with locking\""]]],["if","pkg_staged_install",["{",["starsmsg","stars","\"using staged installation\""],["<-","final_instdir","instdir"],["<-","final_lib","lib"],["<-","final_rpackagedir",["Sys.getenv","\"R_PACKAGE_DIR\""]],["<-","final_rlibs",["Sys.getenv","\"R_LIBS\""]],["<-","final_libpaths",[".libPaths",{}]],["<-","instdir",["file.path","lockdir","\"00new\"","pkg_name"]],["Sys.setenv",{"R_PACKAGE_DIR":"instdir"}],["dir.create","instdir",{"recursive":"TRUE"},{"showWarnings":"FALSE"}],["<-","lib",["file.path","lockdir","\"00new\""]],["<-","rlibs",["if",["nzchar","final_rlibs"],["paste","lib","final_rlibs",{"sep":["$",".Platform","path.sep"]}],"lib"]],["Sys.setenv",{"R_LIBS":"rlibs"}],[".libPaths",["c","lib","final_libpaths"]]],["{",["if",["isFALSE","SI"],["starsmsg","stars","\"using non-staged installation via StagedInstall field\""],["if",["!=",["Sys.getenv","\"_R_INSTALL_SUPPRESS_NO_STAGED_MESSAGE_\""],"\"yes\""],["starsmsg","stars","\"using non-staged installation\""]]]]],["if","preclean",["run_clean",{}]],["if","use_configure",["{",["if","WINDOWS",["{",["if",["file.exists","\"configure.win\""],["{",["<-","res",["system","\"sh ./configure.win\""]],["if","res",["pkgerrmsg","\"configuration failed\"","pkg_name"]]],["if",["file.exists","\"configure\""],["message","\"\\n\"","\"   **********************************************\\n\"","\"   WARNING: this package has a configure script\\n\"","\"         It probably needs manual configuration\\n\"","\"   **********************************************\\n\\n\"",{"domain":"NA"}]]]],["{",["if",["file_test","\"-x\"","\"configure\""],["{",["<-","cmd",["paste",["paste","configure_vars",{"collapse":"\" \""}],"\"./configure\"",["paste","configure_args",{"collapse":"\" \""}]]],["if","debug",["message","\"configure command: \"",["sQuote","cmd"],{"domain":"NA"}]],["<-","cmd",["paste","\"_R_SHLIB_BUILD_OBJECTS_SYMBOL_TABLES_=false\"","cmd"]],["<-","res",["system","cmd"]],["if","res",["pkgerrmsg","\"configuration failed\"","pkg_name"]]],["if",["file.exists","\"configure\""],["errmsg","\"'configure' exists but is not executable -- see the 'R Installation and Administration Manual'\""]]]]]]],["if","more_than_libs",["{",["for","f",["c","\"NAMESPACE\"","\"LICENSE\"","\"LICENCE\"","\"NEWS\"","\"NEWS.md\""],["if",["file.exists","f"],["{",["file.copy","f","instdir","TRUE"],["Sys.chmod",["file.path","instdir","f"],"fmode"]]]],["<-","res",["try",[".install_package_description","'.'","instdir","built_stamp"]]],["if",["inherits","res","\"try-error\""],["pkgerrmsg","\"installing package DESCRIPTION failed\"","pkg_name"]],["if",["!",["file.exists",["<-","namespace",["file.path","instdir","\"NAMESPACE\""]]]],["{",["if",["dir.exists","\"R\""],["errmsg","\"a 'NAMESPACE' file is required\""],["writeLines","\"## package without R code\"","namespace"]]]]]],["if",["&&",["&&","install_libs",["dir.exists","\"src\""]],["length",[">",["dir","\"src\"",{"all.files":"TRUE"}],"2L"]]],["{",["starsmsg","stars","\"libs\""],["if",["!",["file.exists",["file.path",["R.home","\"include\""],"\"R.h\""]]],["warning","\"R include directory is empty -- perhaps need to install R-devel.rpm or similar\"",{"call.":"FALSE"}]],["<-","has_error","FALSE"],["<-","linkTo",["$","pkgInfo","LinkingTo"]],["if",["!",["is.null","linkTo"]],["{",["<-","lpkgs",["sapply","linkTo",["function",[{"x":""}],["[[","x","1L"]]]],["<-","paths",["find.package","lpkgs",{"quiet":"TRUE"}]],["<-","bpaths",["basename","paths"]],["if",["length","paths"],["{",["<-","have_vers",["&",["(",[">",["lengths","linkTo"],"1L"]],["%in%","lpkgs","bpaths"]]],["for","z",["[","linkTo","have_vers"],["{",["<-","p",["[[","z","1L"]],["<-","path",["[","paths",["%in%","bpaths","p"]]],["<-","current",["[",["$",["readRDS",["file.path","path","\"Meta\"","\"package.rds\""]],"DESCRIPTION"],"\"Version\""]],["<-","target",["as.numeric_version",["$","z","version"]]],["if",["!",["do.call",["$","z","op"],["list",["as.numeric_version","current"],"target"]]],["stop",["gettextf","\"package %s %s was found, but %s %s is required by %s\"",["sQuote","p"],"current",["$","z","op"],"target",["sQuote","pkgname"]],{"call.":"FALSE"},{"domain":"NA"}]]]],["<-","clink_cppflags",["paste",["paste0","'-I\"'","paths","'/include\"'"],{"collapse":"\" \""}]],["Sys.setenv",{"CLINK_CPPFLAGS":"clink_cppflags"}]]]],["<-","clink_cppflags","\"\""]],["<-","libdir",["file.path","instdir",["paste0","\"libs\"","rarch"]]],["dir.create","libdir",{"showWarnings":"FALSE"}],["if","WINDOWS",["{",["<-","owd",["setwd","\"src\""]],["<-","makefiles",["character",{}]],["if",["!",["is.na",["<-","f",["Sys.getenv","\"R_MAKEVARS_USER\"","NA_character_"]]]],["{",["if",["file.exists","f"],["<-","makefiles","f"]]],["if",["file.exists",["<-","f",["path.expand","\"~/.R/Makevars.win\""]]],["<-","makefiles","f"],["if",["file.exists",["<-","f",["path.expand","\"~/.R/Makevars\""]]],["<-","makefiles","f"]]]],["if",["file.exists","\"Makefile.win\""],["{",["<-","makefiles",["c","\"Makefile.win\"","makefiles"]],["message","\"  running 'src/Makefile.win' ...\"",{"domain":"NA"}],["<-","res",["system",["paste","\"make --no-print-directory\"",["paste","\"-f\"",["shQuote","makefiles"],{"collapse":"\" \""}]]]],["if",["==","res","0L"],["shlib_install","instdir","rarch"],["<-","has_error","TRUE"]]],["{",["<-","srcs",["dir",{"pattern":"\"\\\\.([cfmM]|cc|cpp|f90|f95|mm)$\""},{"all.files":"TRUE"}]],["<-","archs",["if",["&&",["!","force_both"],["!",["grepl","\" x64 \"",[["::","utils","win.version"],{}]]]],"\"i386\"",["{",["<-","f",["dir",["file.path",["R.home",{}],"\"bin\""]]],["[","f",["%in%","f",["c","\"i386\"","\"x64\""]]]]]],["<-","one_only",["!","multiarch"]],["if",["&&",["!","one_only"],["file.exists","\"../configure.win\""]],["{",["if",["%notin%","pkg_name",["c","\"AnalyzeFMRI\"","\"CORElearn\"","\"PearsonDS\"","\"PKI\"","\"RGtk2\"","\"RNetCDF\"","\"RODBC\"","\"RSclient\"","\"Rcpp\"","\"Runuran\"","\"SQLiteMap\"","\"XML\"","\"arulesSequences\"","\"cairoDevice\"","\"diversitree\"","\"foreign\"","\"fastICA\"","\"glmnet\"","\"gstat\"","\"igraph\"","\"jpeg\"","\"png\"","\"proj4\"","\"randtoolbox\"","\"rgdal\"","\"rngWELL\"","\"rphast\"","\"rtfbs\"","\"sparsenet\"","\"tcltk2\"","\"tiff\"","\"udunits2\""]],["<-","one_only",[">",["sum",["nchar",["readLines","\"../configure.win\"",{"warn":"FALSE"}],"\"bytes\""]],"0"]]],["if",["&&","one_only",["!","force_biarch"]],["{",["if",["parse_description_field","desc","\"Biarch\"","FALSE"],["<-","force_biarch","TRUE"],["warning","\"this package has a non-empty 'configure.win' file,\\nso building only the main architecture\\n\"",{"call.":"FALSE"},{"domain":"NA"}]]]]]],["if","force_biarch",["<-","one_only","FALSE"]],["if",["||","one_only",["<",["length","archs"],"2L"]],["<-","has_error",["run_shlib","pkg_name","srcs","instdir","rarch"]],["{",["setwd","owd"],["<-","test_archs","archs"],["for","arch","archs",["{",["message","\"\"",{"domain":"NA"}],["starsmsg","\"***\"","\"arch - \"","arch"],["<-","ss",["paste0","\"src-\"","arch"]],["dir.create","ss",{"showWarnings":"FALSE"}],["file.copy",["Sys.glob","\"src/*\""],"ss",{"recursive":"TRUE"}],[".Call","C_dirchmod","ss","group.writable"],["setwd","ss"],["<-","ra",["paste0","\"/\"","arch"]],["Sys.setenv",{"R_ARCH":"ra"},{"R_ARCH_BIN":"ra"}],["<-","has_error",["run_shlib","pkg_name","srcs","instdir","ra"]],["setwd","owd"],["if","has_error",["break"]]]]]]]],["setwd","owd"]],["{",["if",["file.exists","\"src/Makefile\""],["{",["<-","arch",["substr","rarch","2","1000"]],["starsmsg","stars","\"arch - \"","arch"],["<-","owd",["setwd","\"src\""]],["<-","system_makefile",["file.path",["R.home",{}],["paste0","\"etc\"","rarch"],"\"Makeconf\""]],["<-","makefiles",["c","system_makefile",["makevars_site",{}],"\"Makefile\"",["makevars_user",{}]]],["<-","res",["system",["paste","MAKE",["paste","\"-f\"",["shQuote","makefiles"],{"collapse":"\" \""}]]]],["if",["==","res","0L"],["shlib_install","instdir","rarch"],["<-","has_error","TRUE"]],["setwd","owd"]],["{",["<-","owd",["setwd","\"src\""]],["<-","srcs",["dir",{"pattern":"\"\\\\.([cfmM]|cc|cpp|f90|f95|mm)$\""},{"all.files":"TRUE"}]],["<-","allfiles",["if",["file.exists","\"Makevars\""],["c","\"Makevars\"","srcs"],"srcs"]],["<-","wd2",["setwd",["file.path",["R.home","\"bin\""],"\"exec\""]]],["<-","archs",["Sys.glob","\"*\""]],["setwd","wd2"],["if",["length","allfiles"],["{",["if",["||",["||",["!","multiarch"],["<=",["length","archs"],"1"]],["file_test","\"-x\"","\"../configure\""]],["{",["if",["nzchar","rarch"],["starsmsg","\"***\"","\"arch - \"",["substr","rarch","2","1000"]]],["<-","has_error",["run_shlib","pkg_name","srcs","instdir","rarch"]]],["{",["setwd","owd"],["<-","test_archs","archs"],["for","arch","archs",["{",["if",["==","arch","\"R\""],["{",["<-","has_error",["run_shlib","pkg_name","srcs","instdir","\"\""]]],["{",["starsmsg","\"***\"","\"arch - \"","arch"],["<-","ss",["paste0","\"src-\"","arch"]],["dir.create","ss",{"showWarnings":"FALSE"}],["file.copy",["Sys.glob","\"src/*\""],"ss",{"recursive":"TRUE"}],["setwd","ss"],["<-","ra",["paste0","\"/\"","arch"]],["Sys.setenv",{"R_ARCH":"ra"}],["<-","has_error",["run_shlib","pkg_name","srcs","instdir","ra"]],["Sys.setenv",{"R_ARCH":"rarch"}],["setwd","owd"],["if","has_error",["break"]]]]]]]]],["warning","\"no source files found\"",{"call.":"FALSE"}]]]],["setwd","owd"]]],["if","has_error",["pkgerrmsg","\"compilation failed\"","pkg_name"]],["<-","fi",["file.info",["Sys.glob",["file.path","instdir","\"libs\"","\"*\""]]]],["<-","dirs",["basename",["row.names",["[","fi",["%in%",["$","fi","isdir"],"TRUE"],{}]]]],["if","WINDOWS",["<-","dirs",["[","dirs",["%in%","dirs",["c","\"i386\"","\"x64\""]]]]],["if",["length","dirs"],["{",["<-","descfile",["file.path","instdir","\"DESCRIPTION\""]],["<-","olddesc",["readLines","descfile",{"warn":"FALSE"}]],["<-","olddesc",["filtergrep","\"^Archs:\"","olddesc",{"useBytes":"TRUE"}]],["<-","newdesc",["c","olddesc",["paste","\"Archs:\"",["paste","dirs",{"collapse":"\", \""}]]]],["writeLines","newdesc","descfile",{"useBytes":"TRUE"}]]]],["if","multiarch",["{",["if","WINDOWS",["{",["<-","wd2",["setwd",["file.path",["R.home",{}],"\"bin\""]]],["<-","archs",["Sys.glob","\"*\""]],["setwd","wd2"],["<-","test_archs",["[","archs",["%in%","archs",["c","\"i386\"","\"x64\""]]]]],["{",["<-","wd2",["setwd",["file.path",["R.home","\"bin\""],"\"exec\""]]],["<-","test_archs",["Sys.glob","\"*\""]],["setwd","wd2"]]]]]],["if",["&&","WINDOWS",["%in%","\"x64\"","test_archs"]],["{",["if",["!",["grepl","\" x64 \"",[["::","utils","win.version"],{}]]],["<-","test_archs","\"i386\""]]]],["if",["&&",["&&","install_R",["dir.exists","\"R\""]],["length",["dir","\"R\""]]],["{",["starsmsg","stars","\"R\""],["dir.create",["file.path","instdir","\"R\""],{"recursive":"TRUE"},{"showWarnings":"FALSE"}],["<-","res",["try",[".install_package_code_files","\".\"","instdir"]]],["if",["inherits","res","\"try-error\""],["pkgerrmsg","\"unable to collate and parse R files\"","pkg_name"]],["if",["file.exists",["<-","f",["file.path","\"R\"","\"sysdata.rda\""]]],["{",["<-","comp","TRUE"],["if",["!",["is.na",["<-","lazycompress",["[","desc","\"SysDataCompression\""]]]],["{",["<-","comp",["switch","lazycompress",{"\"none\"":"FALSE"},{"\"gzip\"":"TRUE"},{"\"bzip2\"":"2L"},{"\"xz\"":"3L"},"TRUE"]]],["if",[">",["file.size","f"],"1e6"],["<-","comp","3L"]]],["<-","res",["try",["sysdata2LazyLoadDB","f",["file.path","instdir","\"R\""],{"compress":"comp"}]]],["if",["inherits","res","\"try-error\""],["pkgerrmsg","\"unable to build sysdata DB\"","pkg_name"]]]],["if","fake",["{",["if",["file.exists","\"NAMESPACE\""],["{",["cat","\"\"","'.onLoad <- .onAttach <- function(lib, pkg) NULL'","'.onUnload <- function(libpaths) NULL'",{"sep":"\"\\n\""},{"file":["file.path","instdir","\"R\"","pkg_name"]},{"append":"TRUE"}],["writeLines",["sub","\"useDynLib.*\"","'useDynLib(\"\")'",["readLines","\"NAMESPACE\"",{"warn":"FALSE"}],{"perl":"TRUE"},{"useBytes":"TRUE"}],["file.path","instdir","\"NAMESPACE\""]]],["{",["cat","\"\"","'.onLoad <- function (libname, pkgname) NULL'","'.onAttach <- function (libname, pkgname) NULL'","'.onDetach <- function(libpath) NULL'","'.onUnload <- function(libpath) NULL'","'.Last.lib <- function(libpath) NULL'",{"sep":"\"\\n\""},{"file":["file.path","instdir","\"R\"","pkg_name"]},{"append":"TRUE"}]]]]]]],["if",["&&",["&&","install_data",["dir.exists","\"data\""]],["length",["dir","\"data\""]]],["{",["starsmsg","stars","\"data\""],["<-","files",["Sys.glob",["file.path","\"data\"","\"*\""]]],["if",["length","files"],["{",["<-","is",["file.path","instdir","\"data\""]],["dir.create","is",{"recursive":"TRUE"},{"showWarnings":"FALSE"}],["file.remove",["Sys.glob",["file.path","instdir","\"data\"","\"*\""]]],["file.copy","files","is","TRUE"],["<-","thislazy",["parse_description_field","desc","\"LazyData\"",{"default":"lazy_data"}]],["if",["&&",["!","thislazy"],"resave_data"],["{",["<-","paths",["Sys.glob",["c",["file.path","is","\"*.rda\""],["file.path","is","\"*.RData\""]]]],["if",["==","pkg_name","\"cyclones\""],["<-","paths",["c","paths",["Sys.glob",["file.path","is","\"*.Rdata\""]]]]],["if",["length","paths"],["{",["starsmsg",["paste0","stars","\"*\""],"\"resaving rda files\""],["resaveRdaFiles","paths",{"compress":"\"auto\""}]]]]],["Sys.chmod",["Sys.glob",["file.path","instdir","\"data\"","\"*\""]],"fmode"],["if","thislazy",["{",["starsmsg",["paste0","stars","\"*\""],"\"moving datasets to lazyload DB\""],["<-","lazycompress",["[","desc","\"LazyDataCompression\""]],["if",["!",["is.na","lazycompress"]],["<-","data_compress",["switch","lazycompress",{"\"none\"":"FALSE"},{"\"gzip\"":"TRUE"},{"\"bzip2\"":"2L"},{"\"xz\"":"3L"},"TRUE"]]],["<-","res",["try",["data2LazyLoadDB","pkg_name","lib",{"compress":"data_compress"}]]],["if",["inherits","res","\"try-error\""],["pkgerrmsg","\"lazydata failed\"","pkg_name"]]]]],["warning","\"empty 'data' directory\"",{"call.":"FALSE"}]]]],["if",["&&",["&&","install_demo",["dir.exists","\"demo\""]],["length",["dir","\"demo\""]]],["{",["starsmsg","stars","\"demo\""],["dir.create",["file.path","instdir","\"demo\""],{"recursive":"TRUE"},{"showWarnings":"FALSE"}],["file.remove",["Sys.glob",["file.path","instdir","\"demo\"","\"*\""]]],["<-","res",["try",[".install_package_demos","\".\"","instdir"]]],["if",["inherits","res","\"try-error\""],["pkgerrmsg","\"ERROR: installing demos failed\""]],["Sys.chmod",["Sys.glob",["file.path","instdir","\"demo\"","\"*\""]],"fmode"]]],["if",["&&",["&&","install_exec",["dir.exists","\"exec\""]],["length",["dir","\"exec\""]]],["{",["starsmsg","stars","\"exec\""],["dir.create",["file.path","instdir","\"exec\""],{"recursive":"TRUE"},{"showWarnings":"FALSE"}],["file.remove",["Sys.glob",["file.path","instdir","\"exec\"","\"*\""]]],["<-","files",["Sys.glob",["file.path","\"exec\"","\"*\""]]],["if",["length","files"],["{",["file.copy","files",["file.path","instdir","\"exec\""],"TRUE"],["if",["!","WINDOWS"],["Sys.chmod",["Sys.glob",["file.path","instdir","\"exec\"","\"*\""]],"dmode"]]]]]],["if",["&&",["&&","install_inst",["dir.exists","\"inst\""]],[">",["length",["dir","\"inst\"",{"all.files":"TRUE"}]],"2L"]],["{",["starsmsg","stars","\"inst\""],["<-","i_dirs",["[",["list.dirs","\"inst\""],["-","1L"]]],["<-","i_dirs",["filtergrep",".vc_dir_names_re","i_dirs"]],["<-","ignore_file","\".Rinstignore\""],["<-","ignore",["if",["file.exists","ignore_file"],["{",["<-","ignore",["readLines","ignore_file",{"warn":"FALSE"}]],["[","ignore",["nzchar","ignore"]]],["character",{}]]],["for","e","ignore",["<-","i_dirs",["filtergrep","e","i_dirs",{"perl":"TRUE"},{"ignore.case":"TRUE"}]]],["lapply",["gsub","\"^inst\"","instdir","i_dirs"],["function",[{"p":""}],["dir.create","p","FALSE","TRUE"]]],["<-","i_files",["list.files","\"inst\"",{"all.files":"TRUE"},{"full.names":"TRUE"},{"recursive":"TRUE"}]],["<-","i_files",["filtergrep",".vc_dir_names_re","i_files"]],["for","e","ignore",["<-","i_files",["filtergrep","e","i_files",{"perl":"TRUE"},{"ignore.case":"TRUE"}]]],["<-","i_files",["%w/o%","i_files",["c","\"inst/doc/Rplots.pdf\"","\"inst/doc/Rplots.ps\""]]],["<-","i_files",["filtergrep","\"inst/doc/.*[.](log|aux|bbl|blg|dvi)$\"","i_files",{"perl":"TRUE"},{"ignore.case":"TRUE"}]],["if",["&&",["!",["dir.exists","\"vignettes\""]],["%notin%","pkgname",["c","\"RCurl\""]]],["<-","i_files",["filtergrep","\"inst/doc/.*[.](png|jpg|jpeg|gif|ps|eps)$\"","i_files",{"perl":"TRUE"},{"ignore.case":"TRUE"}]]],["<-","i_files",["%w/o%","i_files","\"Makefile\""]],["<-","i2_files",["gsub","\"^inst\"","instdir","i_files"]],["file.copy","i_files","i2_files"],["if",["!","WINDOWS"],["{",["<-","modes",["file.mode","i_files"]],["<-","execs",["as.logical",["&","modes",["as.octmode","\"100\""]]]],["Sys.chmod",["[","i2_files","execs"],"dmode"]]],["if","compact_docs",["{",["<-","pdfs",["dir",["file.path","instdir","\"doc\""],{"pattern":"\"\\\\.pdf\""},{"recursive":"TRUE"},{"full.names":"TRUE"},{"all.files":"TRUE"}]],["<-","res",["compactPDF","pdfs",{"gs_quality":"\"none\""}]],["print",["[","res",[">",["$","res","old"],"1e5"],{}]]]]]],["if",["&&",["&&","install_tests",["dir.exists","\"tests\""]],["length",[">",["dir","\"tests\"",{"all.files":"TRUE"}],"2L"]]],["{",["starsmsg","stars","\"tests\""],["file.copy","\"tests\"","instdir",{"recursive":"TRUE"}]]],["if",["&&",["&&","install_R",["dir.exists","\"R\""]],["length",["dir","\"R\""]]],["{",["<-","BC",["if",["!",["is.na","byte_compile"]],"byte_compile",["parse_description_field","desc","\"ByteCompile\"",{"default":"TRUE"}]]],["<-","rcps",["Sys.getenv","\"R_COMPILE_PKGS\""]],["<-","rcp",["switch","rcps",{"\"TRUE\"":""},{"\"true\"":""},{"\"True\"":""},{"\"yes\"":""},{"\"Yes\"":"1"},{"\"FALSE\"":""},{"\"false\"":""},{"\"False\"":""},{"\"no\"":""},{"\"No\"":"0"},["as.numeric","rcps"]]],["if",["!",["is.na","rcp"]],["<-","BC",["(",[">","rcp","0"]]]],["if","BC",["{",["starsmsg","stars","\"byte-compile and prepare package for lazy loading\""],["<-","cmd",["c","\"Sys.setenv(R_ENABLE_JIT = 0L)\"","\"invisible(compiler::enableJIT(0))\"","\"invisible(compiler::compilePKGS(1L))\"","\"compiler::setCompilerOptions(suppressAll = FALSE)\"","\"compiler::setCompilerOptions(suppressUndefined = TRUE)\"","\"compiler::setCompilerOptions(suppressNoSuperAssignVar = TRUE);\""]]],["{",["starsmsg","stars","\"preparing package for lazy loading\""],["<-","cmd","\"\""]]],["<-","keep.source",["parse_description_field","desc","\"KeepSource\"",{"default":"keep.source"}]],["<-","cmd",["append","cmd",["paste0","\"setwd(\"",["quote_path",["getwd",{}]],"\")\""]]],["<-","cmd",["append","cmd",["paste0","\"if (isNamespaceLoaded(\\\"\"","pkg_name","\"\\\"))\"","\" unloadNamespace(\\\"\"","pkg_name","\"\\\")\""]]],["<-","deps_only",["config_val_to_logical",["Sys.getenv","\"_R_CHECK_INSTALL_DEPENDS_\"","\"FALSE\""]]],["<-","env",["if","deps_only",["setRlibs",{"LinkingTo":"TRUE"},{"quote":"TRUE"}],"\"\""]],["<-","env",["paste","env","\"R_TESTS=\""]],["<-","cmd",["append","cmd","\"suppressPackageStartupMessages(.getRequiredPackages(quietly = TRUE))\""]],["if","pkg_staged_install",["<-","set.install.dir",["paste0","\", set.install.dir = \"",["quote_path","final_instdir"]]],["<-","set.install.dir","\"\""]],["<-","cmd",["append","cmd",["paste0","\"tools:::makeLazyLoading(\\\"\"","pkg_name","\"\\\", \"","\"\\\"\"","lib","\"\\\", \"","\"keep.source = \"","keep.source","\", \"","\"keep.parse.data = \"","keep.parse.data","set.install.dir","\")\""]]],["<-","opts",["paste",["if","deps_only","\"--vanilla\"","\"--no-save\""],"\"--slave\""]],["<-","cmd",["paste","cmd",{"collapse":"\"\\n\""}]],["<-","out",["R_runR","cmd","opts",{"env":"env"}]],["if",["length","out"],["cat",["paste",["c","out","\"\""],{"collapse":"\"\\n\""}]]],["if",["length",["attr","out","\"status\""]],["pkgerrmsg","\"lazy loading failed\"","pkg_name"]]]],["if","install_help",["{",["starsmsg","stars","\"help\""],["if",["||",["!",["dir.exists","\"man\""]],["!",["length",["list_files_with_type","\"man\"","\"docs\""]]]],["cat","\"No man pages found in package \"",["sQuote","pkg_name"],"\"\\n\""]],["<-","encoding",["[","desc","\"Encoding\""]],["if",["is.na","encoding"],["<-","encoding","\"unknown\""]],["<-","res",["try",[".install_package_Rd_objects","\".\"","instdir","encoding"]]],["if",["inherits","res","\"try-error\""],["pkgerrmsg","\"installing Rd objects failed\"","pkg_name"]],["starsmsg",["paste0","stars","\"*\""],"\"installing help indices\""],[".writePkgIndices","pkg_dir","instdir"],["if","build_help",["{",["<-","outenc",["[","desc","\"Encoding\""]],["if",["is.na","outenc"],["<-","outenc","\"latin1\""]],[".convertRdfiles","pkg_dir","instdir",{"types":"build_help_types"},{"outenc":"outenc"}]]],["if",["dir.exists",["<-","figdir",["file.path","pkg_dir","\"man\"","\"figures\""]]],["{",["starsmsg",["paste0","stars","\"*\""],"\"copying figures\""],["dir.create",["<-","destdir",["file.path","instdir","\"help\"","\"figures\""]]],["file.copy",["Sys.glob",["c",["file.path","figdir","\"*.png\""],["file.path","figdir","\"*.jpg\""],["file.path","figdir","\"*.jpeg\""],["file.path","figdir","\"*.svg\""],["file.path","figdir","\"*.pdf\""]]],"destdir"]]]]],["if",["||",["||","install_inst","install_demo"],"install_help"],["{",["starsmsg","stars","\"building package indices\""],["<-","res",["try",[".install_package_indices","\".\"","instdir"]]],["if",["inherits","res","\"try-error\""],["errmsg","\"installing package indices failed\""]],["if",["dir.exists","\"vignettes\""],["{",["starsmsg","stars","\"installing vignettes\""],["<-","enc",["[","desc","\"Encoding\""]],["if",["is.na","enc"],["<-","enc","\"\""]],["if",["&&",["!","fake"],["file_test","\"-f\"",["file.path","\"build\"","\"vignette.rds\""]]],["<-","installer",".install_package_vignettes3"],["<-","installer",".install_package_vignettes2"]],["<-","res",["try",["installer","\".\"","instdir","enc"]]],["if",["inherits","res","\"try-error\""],["errmsg","\"installing vignettes failed\""]]]]]],["if",["&&","install_R",["file.exists","\"NAMESPACE\""]],["{",["<-","res",["try",[".install_package_namespace_info",["if","fake","instdir","\".\""],"instdir"]]],["if",["inherits","res","\"try-error\""],["errmsg","\"installing namespace metadata failed\""]]]],["if","clean",["run_clean",{}]],["<-","do_test_load",["function",[{"extra_cmd":"NULL"}],["{",["<-","cmd",["paste0","\"tools:::.test_load_package('\"","pkg_name","\"', \"",["quote_path","lib"],"\")\""]],["if",["!",["is.null","extra_cmd"]],["<-","cmd",["paste0","cmd","\"\\n\"","extra_cmd"]]],["<-","deps_only",["config_val_to_logical",["Sys.getenv","\"_R_CHECK_INSTALL_DEPENDS_\"","\"FALSE\""]]],["<-","env",["if","deps_only",["setRlibs","lib0",{"self":"TRUE"},{"quote":"TRUE"}],"\"\""]],["<-","tlim",["get_timeout",["Sys.getenv","\"_R_INSTALL_TEST_LOAD_ELAPSED_TIMEOUT_\""]]],["if",[">",["length","test_archs"],"1L"],["{",["<-","msgs",["character",{}]],["<-","opts","\"--no-save --slave\""],["for","arch","test_archs",["{",["starsmsg","\"***\"","\"arch - \"","arch"],["<-","out",["R_runR","cmd","opts",{"env":"env"},{"arch":"arch"},{"timeout":"tlim"}]],["if",["length",["attr","out","\"status\""]],["<-","msgs",["c","msgs","arch"]]],["if",["length","out"],["cat",["paste",["c","out","\"\""],{"collapse":"\"\\n\""}]]]]],["if",["length","msgs"],["{",["<-","msg",["paste","\"loading failed for\"",["paste",["sQuote","msgs"],{"collapse":"\", \""}]]],["errmsg","msg"]]]],["{",["<-","opts",["paste",["if","deps_only","\"--vanilla\"","\"--no-save\""],"\"--slave\""]],["<-","out",["R_runR","cmd","opts",{"env":"env"},{"timeout":"tlim"}]],["if",["length","out"],["{",["cat",["paste",["c","out","\"\""],{"collapse":"\"\\n\""}]]]],["if",["length",["attr","out","\"status\""]],["errmsg","\"loading failed\""]]]]]]],["if","test_load",["{",["if","pkg_staged_install",["starsmsg","stars","\"testing if installed package can be loaded from temporary location\""],["starsmsg","stars","\"testing if installed package can be loaded\""]],["do_test_load",{}]]],["if","pkg_staged_install",["{",["if","WINDOWS",["{",["unlink","final_instdir",{"recursive":"TRUE"}],["if",["!",["file.rename","instdir","final_instdir"]],["{",["message","\"WARNING: moving package to final location failed, copying instead\""],["file.copy","instdir",["dirname","final_instdir"],{"recursive":"TRUE"},{"copy.date":"TRUE"}],["unlink","instdir",{"recursive":"TRUE"}]]]],["{",["patch_rpaths",{}],["unlink","final_instdir",{"recursive":"TRUE"}],["<-","owd",["setwd","startdir"]],["<-","status",["system",["paste","\"mv -f\"",["shQuote","instdir"],["shQuote",["dirname","final_instdir"]]]]],["if","status",["errmsg","\"  moving to final location failed\""]],["setwd","owd"]]],["<-","instdir","final_instdir"],["<-","lib","final_lib"],["Sys.setenv",{"R_PACKAGE_DIR":"final_rpackagedir"}],["Sys.setenv",{"R_LIBS":"final_rlibs"}],[".libPaths","final_libpaths"],["if","test_load",["{",["starsmsg","stars","\"testing if installed package can be loaded from final location\""],["<-","serf",["tempfile",{}]],["<-","cmd",["paste0","\"f <- base::file(\"",["quote_path","serf"],"\", \\\"wb\\\")\""]],["<-","cmd",["append","cmd",["paste0","\"base::invisible(base::suppressWarnings(base::serialize(\"","\"base::as.list(base::getNamespace(\\\"\"","pkg_name","\"\\\"), all.names=TRUE), f)))\""]]],["<-","cmd",["append","cmd","\"base::close(f)\""]],["do_test_load",{"extra_cmd":["paste","cmd",{"collapse":"\"\\n\""}]}],["starsmsg","stars","\"testing if installed package keeps a record of temporary installation path\""],["<-","r",["readBin","serf","\"raw\"",{"n":["file.size","serf"]}]],["unlink","serf"],["if",["length",["grepRaw","\"00new\"","r",{"fixed":"TRUE"},{"all":"FALSE"},{"value":"FALSE"}]],["errmsg","\"hard-coded installation path: \"","\"please report to the package maintainer and use \"",["sQuote","\"--no-staged-install\""]]]]]]]]]],["options",{"showErrorCalls":"FALSE"}],["<-","pkgs",["character",{}]],["if",["is.null","args"],["{",["<-","args",["commandArgs","TRUE"]],["<-","args",["paste","args",{"collapse":"\" \""}]],["<-","args",["[",["[[",["strsplit","args","'nextArg'",{"fixed":"TRUE"}],"1L"],["-","1L"]]]]],["<-","args0","args"],["<-","startdir",["getwd",{}]],["if",["is.null","startdir"],["stop","\"current working directory cannot be ascertained\""]],["<-","lib",["<-","lib0","\"\""]],["<-","clean","FALSE"],["<-","preclean","FALSE"],["<-","debug","FALSE"],["<-","static_html",["nzchar",["system.file","\"html\"","\"mean.html\"",{"package":"\"base\""}]]],["<-","build_html","static_html"],["<-","build_latex","FALSE"],["<-","build_example","FALSE"],["<-","use_configure","TRUE"],["<-","configure_args",["character",{}]],["<-","configure_vars",["character",{}]],["<-","fake","FALSE"],["<-","lazy_data","FALSE"],["<-","byte_compile","NA"],["<-","staged_install","NA"],["<-","lock",["getOption","\"install.lock\"","NA"]],["<-","pkglock","FALSE"],["<-","libs_only","FALSE"],["<-","tar_up",["<-","zip_up","FALSE"]],["<-","shargs",["character",{}]],["<-","multiarch","TRUE"],["<-","force_biarch","FALSE"],["<-","force_both","FALSE"],["<-","test_load","TRUE"],["<-","merge","FALSE"],["<-","dsym",["nzchar",["Sys.getenv","\"PKG_MAKE_DSYM\""]]],["<-","get_user_libPaths","FALSE"],["<-","data_compress","TRUE"],["<-","resave_data","FALSE"],["<-","compact_docs","FALSE"],["<-","keep.source",["getOption","\"keep.source.pkgs\""]],["<-","keep.parse.data",["getOption","\"keep.parse.data.pkgs\""]],["<-","built_stamp",["character",{}]],["<-","install_libs","TRUE"],["<-","install_R","TRUE"],["<-","install_data","TRUE"],["<-","install_demo","TRUE"],["<-","install_exec","TRUE"],["<-","install_inst","TRUE"],["<-","install_help","TRUE"],["<-","install_tests","FALSE"],["<-","do_strip","FALSE"],["while",["length","args"],["{",["<-","a",["[","args","1L"]],["if",["%in%","a",["c","\"-h\"","\"--help\""]],["{",["Usage",{}],["do_exit","0"]],["if",["%in%","a",["c","\"-v\"","\"--version\""]],["{",["cat","\"R add-on package installer: \"",["[[","R.version","\"major\""],"\".\"",["[[","R.version","\"minor\""],"\" (r\"",["[[","R.version","\"svn rev\""],"\")\\n\"",{"sep":"\"\""}],["cat","\"\"","\"Copyright (C) 2000-2016 The R Core Team.\"","\"This is free software; see the GNU General Public License version 2\"","\"or later for copying conditions.  There is NO warranty.\"",{"sep":"\"\\n\""}],["do_exit","0"]],["if",["%in%","a",["c","\"-c\"","\"--clean\""]],["{",["<-","clean","TRUE"],["<-","shargs",["c","shargs","\"--clean\""]]],["if",["==","a","\"--preclean\""],["{",["<-","preclean","TRUE"],["<-","shargs",["c","shargs","\"--preclean\""]]],["if",["%in%","a",["c","\"-d\"","\"--debug\""]],["{",["<-","debug","TRUE"]],["if",["==","a","\"--no-configure\""],["{",["<-","use_configure","FALSE"]],["if",["==","a","\"--no-docs\""],["{",["<-","build_html",["<-","build_latex",["<-","build_example","FALSE"]]]],["if",["==","a","\"--no-html\""],["{",["<-","build_html","FALSE"]],["if",["==","a","\"--html\""],["{",["<-","build_html","TRUE"]],["if",["==","a","\"--latex\""],["{",["<-","build_latex","TRUE"]],["if",["==","a","\"--example\""],["{",["<-","build_example","TRUE"]],["if",["==","a","\"--use-zip-data\""],["{",["warning","\"use of '--use-zip-data' is defunct\"",{"call.":"FALSE"},{"domain":"NA"}],["warning","\"use of '--use-zip-data' is deprecated\"",{"call.":"FALSE"},{"domain":"NA"}]],["if",["==","a","\"--auto-zip\""],["{",["warning","\"'--auto-zip' is defunct\"",{"call.":"FALSE"},{"domain":"NA"}]],["if",["==","a","\"-l\""],["{",["if",[">=",["length","args"],"2L"],["{",["<-","lib",["[","args","2L"]],["<-","args",["[","args",["-","1L"]]]],["stop","\"-l option without value\"",{"call.":"FALSE"}]]],["if",["==",["substr","a","1","10"],"\"--library=\""],["{",["<-","lib",["substr","a","11","1000"]]],["if",["==",["substr","a","1","17"],"\"--configure-args=\""],["{",["<-","configure_args",["c","configure_args",["substr","a","18","1000"]]]],["if",["==",["substr","a","1","17"],"\"--configure-vars=\""],["{",["<-","configure_vars",["c","configure_vars",["substr","a","18","1000"]]]],["if",["==","a","\"--fake\""],["{",["<-","fake","TRUE"]],["if",["==","a","\"--no-lock\""],["{",["<-","lock",["<-","pkglock","FALSE"]]],["if",["==","a","\"--lock\""],["{",["<-","lock","TRUE"],["<-","pkglock","FALSE"]],["if",["==","a","\"--pkglock\""],["{",["<-","lock",["<-","pkglock","TRUE"]]],["if",["==","a","\"--libs-only\""],["{",["<-","libs_only","TRUE"]],["if",["==","a","\"--no-multiarch\""],["{",["<-","multiarch","FALSE"]],["if",["==","a","\"--force-biarch\""],["{",["<-","force_biarch","TRUE"]],["if",["==","a","\"--compile-both\""],["{",["<-","force_both","TRUE"]],["if",["==","a","\"--maybe-get-user-libPaths\""],["{",["<-","get_user_libPaths","TRUE"]],["if",["==","a","\"--build\""],["{",["if","WINDOWS",["<-","zip_up","TRUE"],["<-","tar_up","TRUE"]]],["if",["==",["substr","a","1","16"],"\"--data-compress=\""],["{",["<-","dc",["substr","a","17","1000"]],["<-","dc",["match.arg","dc",["c","\"none\"","\"gzip\"","\"bzip2\"","\"xz\""]]],["<-","data_compress",["switch","dc",{"\"none\"":"FALSE"},{"\"gzip\"":"TRUE"},{"\"bzip2\"":"2"},{"\"xz\"":"3"}]]],["if",["==","a","\"--resave-data\""],["{",["<-","resave_data","TRUE"]],["if",["==","a","\"--install-tests\""],["{",["<-","install_tests","TRUE"]],["if",["==","a","\"--no-inst\""],["{",["<-","install_inst","FALSE"]],["if",["==","a","\"--no-R\""],["{",["<-","install_R","FALSE"]],["if",["==","a","\"--no-libs\""],["{",["<-","install_libs","FALSE"]],["if",["==","a","\"--no-data\""],["{",["<-","install_data","FALSE"]],["if",["==","a","\"--no-demo\""],["{",["<-","install_demo","FALSE"]],["if",["==","a","\"--no-exec\""],["{",["<-","install_exec","FALSE"]],["if",["==","a","\"--no-help\""],["{",["<-","install_help","FALSE"]],["if",["==","a","\"--no-test-load\""],["{",["<-","test_load","FALSE"]],["if",["==","a","\"--no-clean-on-error\""],["{",["<-","clean_on_error","FALSE"]],["if",["==","a","\"--merge-multiarch\""],["{",["<-","merge","TRUE"]],["if",["==","a","\"--compact-docs\""],["{",["<-","compact_docs","TRUE"]],["if",["==","a","\"--with-keep.source\""],["{",["<-","keep.source","TRUE"]],["if",["==","a","\"--without-keep.source\""],["{",["<-","keep.source","FALSE"]],["if",["==","a","\"--with-keep.parse.data\""],["{",["<-","keep.parse.data","TRUE"]],["if",["==","a","\"--without-keep.parse.data\""],["{",["<-","keep.parse.data","FALSE"]],["if",["==","a","\"--byte-compile\""],["{",["<-","byte_compile","TRUE"]],["if",["==","a","\"--no-byte-compile\""],["{",["<-","byte_compile","FALSE"]],["if",["==","a","\"--staged-install\""],["{",["<-","staged_install","TRUE"]],["if",["==","a","\"--no-staged-install\""],["{",["<-","staged_install","FALSE"]],["if",["==","a","\"--dsym\""],["{",["<-","dsym","TRUE"]],["if",["==","a","\"--strip\""],["{",["<-","do_strip","TRUE"]],["if",["==",["substr","a","1","18"],"\"--built-timestamp=\""],["{",["<-","built_stamp",["substr","a","19","1000"]]],["if",["startsWith","a","\"-\""],["{",["message","\"Warning: unknown option \"",["sQuote","a"],{"domain":"NA"}]],["<-","pkgs",["c","pkgs","a"]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]],["<-","args",["[","args",["-","1L"]]]]],["if","keep.tmpdir",["{",["<-","make_tmpdir",["function",[{"prefix":"","nchars":"8","ntries":"100"}],["{",["for","i",[":","1","ntries"],["{",["<-","name",["paste",["sample",["c",[":","0","9"],"letters","LETTERS"],"nchars",{"replace":"TRUE"}],{"collapse":"\"\""}]],["<-","path",["paste","prefix","name",{"sep":"\"/\""}]],["if",["dir.create","path",{"showWarnings":"FALSE"},{"recursive":"T"}],["{",["return","path"]]]]],["stop","\"cannot create unique directory for build\""]]]],["<-","tmpdir",["make_tmpdir","user.tmpdir"]]],["{",["<-","tmpdir",["tempfile","\"R.INSTALL\""]],["if",["!",["dir.create","tmpdir"]],["stop","\"cannot create temporary directory\""]]]],["if","merge",["{",["if",["||",["!=",["length","pkgs"],"1L"],["!",["file_test","\"-f\"","pkgs"]]],["stop","\"ERROR: '--merge-multiarch' applies only to a single tarball\"",{"call.":"FALSE"}]],["if","WINDOWS",["{",["<-","f",["dir",["file.path",["R.home",{}],"\"bin\""]]],["<-","archs",["[","f",["%in%","f",["c","\"i386\"","\"x64\""]]]],["if",[">",["length","archs"],"1L"],["{",["<-","args",["%w/o%","args0",["c","\"--merge-multiarch\"","\"--build\""]]],["Sys.setenv",{"\"_R_INSTALL_NO_DONE_\"":"\"yes\""}],["for","arch","archs",["{",["<-","cmd",["c",["shQuote",["file.path",["R.home",{}],"\"bin\"","arch","\"Rcmd.exe\""]],"\"INSTALL\"",["shQuote","args"],"\"--no-multiarch\""]],["if",["==","arch","\"x64\""],["{",["Sys.setenv",{"\"_R_INSTALL_SUPPRESS_NO_STAGED_MESSAGE_\"":"\"yes\""}],["<-","cmd",["c","cmd","\"--libs-only --no-staged-install\"",["if","zip_up","\"--build\""]]],["Sys.unsetenv","\"_R_INSTALL_NO_DONE_\""]]],["<-","cmd",["paste","cmd",{"collapse":"\" \""}]],["if","debug",["message","\"about to run \"","cmd",{"domain":"NA"}]],["message","\"\\n\"","\"install for \"","arch","\"\\n\"",{"domain":"NA"}],["<-","res",["system","cmd"]],["if",["==","arch","\"x64\""],["Sys.unsetenv","\"_R_INSTALL_SUPPRESS_NO_STAGED_MESSAGE_\""]],["if","res",["break"]]]]]]],["{",["<-","archs",["dir",["file.path",["R.home","\"bin\""],"\"exec\""]]],["if",[">",["length","archs"],"1L"],["{",["<-","args",["%w/o%","args0",["c","\"--merge-multiarch\"","\"--build\""]]],["Sys.setenv",{"\"_R_INSTALL_NO_DONE_\"":"\"yes\""}],["<-","last",["[","archs",["length","archs"]]],["for","arch","archs",["{",["<-","cmd",["c",["shQuote",["file.path",["R.home","\"bin\""],"\"R\""]],"\"--arch\"","arch","\"CMD\"","\"INSTALL\"",["shQuote","args"],"\"--no-multiarch\""]],["if",["!=","arch",["[","archs","1L"]],["{",["Sys.setenv",{"\"_R_INSTALL_SUPPRESS_NO_STAGED_MESSAGE_\"":"\"yes\""}],["<-","cmd",["c","cmd","\"--libs-only --no-staged-install\""]]]],["if",["==","arch","last"],["{",["Sys.unsetenv","\"_R_INSTALL_NO_DONE_\""],["if","tar_up",["<-","cmd",["c","cmd","\"--build\""]]]]],["<-","cmd",["paste","cmd",{"collapse":"\" \""}]],["if","debug",["message","\"about to run \"","cmd",{"domain":"NA"}]],["message","\"\\n\"","\"install for \"","arch","\"\\n\"",{"domain":"NA"}],["<-","res",["system","cmd"]],["if",["!=","arch",["[","archs","1L"]],["Sys.unsetenv","\"_R_INSTALL_SUPPRESS_NO_STAGED_MESSAGE_\""]],["if","res",["break"]]]]]]]],["if",[">",["length","archs"],"1L"],["{",["if","res",["do_exit_on_error",{}]],["do_cleanup",{}],["on.exit",{}],["return",["invisible",{}]]]],["message","\"only one architecture so ignoring '--merge-multiarch'\"",{"domain":"NA"}]]],["<-","allpkgs",["character",{}]],["for","pkg","pkgs",["{",["if","debug",["message","\"processing \"",["sQuote","pkg"],{"domain":"NA"}]],["if",["file_test","\"-f\"","pkg"],["{",["if",["&&","WINDOWS",["endsWith","pkg","\".zip\""]],["{",["if","debug",["message","\"a zip file\"",{"domain":"NA"}]],["<-","pkgname",["basename","pkg"]],["<-","pkgname",["sub","\"\\\\.zip$\"","\"\"","pkgname"]],["<-","pkgname",["sub","\"_[0-9.-]+$\"","\"\"","pkgname"]],["<-","allpkgs",["c","allpkgs","pkg"]],["next"]]],["if","debug",["message","\"a file\"",{"domain":"NA"}]],["<-","of",["dir","tmpdir",{"full.names":"TRUE"}]],["if",[["::","utils","untar"],"pkg",{"exdir":"tmpdir"},{"tar":["Sys.getenv","\"R_INSTALL_TAR\"","\"internal\""]}],["errmsg","\"error unpacking tarball\""]],["<-","nf",["dir","tmpdir",{"full.names":"TRUE"}]],["<-","new",["%w/o%","nf","of"]],["if",["!",["length","new"]],["errmsg","\"cannot extract package from \"",["sQuote","pkg"]]],["if",[">",["length","new"],"1L"],["errmsg","\"extracted multiple files from \"",["sQuote","pkg"]]],["if",["dir.exists","new"],["<-","pkgname",["basename","new"]],["errmsg","\"cannot extract package from \"",["sQuote","pkg"]]],["if",["file.exists",["file.path","tmpdir","pkgname","\"DESCRIPTION\""]],["{",["<-","allpkgs",["c","allpkgs",["file.path","tmpdir","pkgname"]]]],["errmsg","\"cannot extract package from \"",["sQuote","pkg"]]]],["if",["file.exists",["file.path","pkg","\"DESCRIPTION\""]],["{",["if","debug",["message","\"a directory\"",{"domain":"NA"}]],["<-","pkgname",["basename","pkg"]],["<-","allpkgs",["c","allpkgs",["fullpath","pkg"]]]],["{",["warning","\"invalid package \"",["sQuote","pkg"],{"call.":"FALSE"}],["next"]]]]]],["if",["!",["length","allpkgs"]],["stop","\"ERROR: no packages specified\"",{"call.":"FALSE"}]],["if",["!",["nzchar","lib"]],["{",["<-","lib",["if","get_user_libPaths",["{",["system",["paste",["shQuote",["file.path",["R.home","\"bin\""],"\"Rscript\""]],"\"-e 'cat(.libPaths()[1L])'\""],{"intern":"TRUE"}]],["[",[".libPaths",{}],"1L"]]],["starsmsg","stars","\"installing to library \"",["sQuote","lib"]]],["{",["<-","lib0",["<-","lib",["path.expand","lib"]]],["<-","cwd",["tryCatch",["setwd","lib"],{"error":["function",[{"e":""}],["stop",["gettextf","\"ERROR: cannot cd to directory %s\"",["sQuote","lib"]],{"call.":"FALSE"},{"domain":"NA"}]]}]],["<-","lib",["getwd",{}]],["setwd","cwd"]]],["<-","ok",["dir.exists","lib"]],["if","ok",["{",["if","WINDOWS",["{",["<-","fn",["file.path","lib",["paste0","\"_test_dir_\"",["Sys.getpid",{}]]]],["unlink","fn",{"recursive":"TRUE"}],["<-","res",["try",["dir.create","fn",{"showWarnings":"FALSE"}]]],["if",["||",["inherits","res","\"try-error\""],["!","res"]],["<-","ok","FALSE"],["unlink","fn",{"recursive":"TRUE"}]]],["<-","ok",["==",["file.access","lib","2L"],"0L"]]]]],["if",["!","ok"],["stop","\"ERROR: no permission to install to directory \"",["sQuote","lib"],{"call.":"FALSE"}]],["<-","group.writable",["if","WINDOWS","FALSE",["{",["<-","d",["as.octmode","\"020\""]],["==",["(",["&",["file.mode","lib"],"d"]],"d"]]]],["if","libs_only",["{",["<-","install_R","FALSE"],["<-","install_data","FALSE"],["<-","install_demo","FALSE"],["<-","install_exec","FALSE"],["<-","install_inst","FALSE"],["<-","install_help","FALSE"]]],["<-","more_than_libs",["!","libs_only"]],["<-","mk_lockdir",["function",[{"lockdir":""}],["{",["if",["file.exists","lockdir"],["{",["message","\"ERROR: failed to lock directory \"",["sQuote","lib"],"\" for modifying\\nTry removing \"",["sQuote","lockdir"],{"domain":"NA"}],["do_cleanup_tmpdir",{}],["do_exit",{"status":"3"}]]],["dir.create","lockdir",{"recursive":"TRUE"}],["if",["!",["dir.exists","lockdir"]],["{",["message","\"ERROR: failed to create lock directory \"",["sQuote","lockdir"],{"domain":"NA"}],["do_cleanup_tmpdir",{}],["do_exit",{"status":"3"}]]],["if","debug",["starsmsg","stars","\"created lock directory \"",["sQuote","lockdir"]]]]]],["if",["is.na","lock"],["{",["<-","lock","TRUE"],["<-","pkglock",["==",["length","allpkgs"],"1L"]]]],["if",["&&","lock",["!","pkglock"]],["{",["<-","lockdir",["file.path","lib","\"00LOCK\""]],["mk_lockdir","lockdir"]]],["if",["is.na","staged_install"],["{",["<-","rsi",["Sys.getenv","\"R_INSTALL_STAGED\""]],["<-","rsi",["switch","rsi",{"\"TRUE\"":""},{"\"true\"":""},{"\"True\"":""},{"\"yes\"":""},{"\"Yes\"":"1"},{"\"FALSE\"":""},{"\"false\"":""},{"\"False\"":""},{"\"no\"":""},{"\"No\"":"0"},["as.numeric","rsi"]]],["if",["!",["is.na","rsi"]],["<-","staged_install",["(",[">","rsi","0"]]],["<-","staged_install","TRUE"]]]],["if",["&&",["(",["||","tar_up","zip_up"]],"fake"],["stop","\"building a fake installation is disallowed\""]],["if","fake",["{",["<-","use_configure","FALSE"],["<-","build_html","FALSE"],["<-","build_latex","FALSE"],["<-","build_example","FALSE"],["<-","install_libs","FALSE"],["<-","install_demo","FALSE"],["<-","install_exec","FALSE"]]],["<-","build_help_types",["character",{}]],["if","build_html",["<-","build_help_types",["c","build_help_types","\"html\""]]],["if","build_latex",["<-","build_help_types",["c","build_help_types","\"latex\""]]],["if","build_example",["<-","build_help_types",["c","build_help_types","\"example\""]]],["<-","build_help",[">",["length","build_help_types"],"0L"]],["if","debug",["starsmsg","stars","\"build_help_types=\"",["paste","build_help_types",{"collapse":"\" \""}]]],["if","debug",["starsmsg","stars","\"DBG: 'R CMD INSTALL' now doing do_install()\""]],["for","pkg","allpkgs",["{",["if","pkglock",["{",["<-","lockdir",["file.path","lib",["paste0","\"00LOCK-\"",["basename","pkg"]]]],["mk_lockdir","lockdir"]]],["do_install","pkg"]]],["do_cleanup",{}],["on.exit",{}],["invisible",{}]]]],["<-",".SHLIB",["function",[],["{",["<-","status",[".shlib_internal",["commandArgs","TRUE"]]],["q","\"no\"",{"status":["(",["!=","status","0"]]},{"runLast":"FALSE"}]]]],["<-",".shlib_internal",["function",[{"args":""}],["{",["<-","Usage",["function",[],["cat","\"Usage: R CMD SHLIB [options] files | linker options\"","\"\"","\"Build a shared object for dynamic loading from the specified source or\"","\"object files (which are automagically made from their sources) or\"","\"linker options.  If not given via '--output', the name for the shared\"","\"object is determined from the first source or object file.\"","\"\"","\"Options:\"","\"  -h, --help\t\tprint short help message and exit\"","\"  -v, --version\t\tprint version info and exit\"","\"  -o, --output=LIB\tuse LIB as (full) name for the built library\"","\"  -c, --clean\t\tremove files created during compilation\"","\"  --preclean\t\tremove files created during a previous run\"","\"  -n, --dry-run\t\tdry run, showing commands that would be used\"","\"\"","\"Windows only:\"","\"  -d, --debug\t\tbuild a debug DLL\"","\"\"","\"Report bugs at <https://bugs.R-project.org>.\"",{"sep":"\"\\n\""}]]],["<-","p1",["function",[{"...":""}],["paste","...",{"collapse":"\" \""}]]],["<-","WINDOWS",["==",["$",".Platform","OS.type"],"\"windows\""]],["if",["!","WINDOWS"],["{",["<-","mconf",["readLines",["file.path",["R.home",{}],["paste0","\"etc\"",["Sys.getenv","\"R_ARCH\""]],"\"Makeconf\""]]],["<-","SHLIB_EXT",["sub","\".*= \"","\"\"",["grep","\"^SHLIB_EXT\"","mconf",{"value":"TRUE"},{"perl":"TRUE"}]]],["<-","SHLIB_LIBADD",["sub","\".*= \"","\"\"",["grep","\"^SHLIB_LIBADD\"","mconf",{"value":"TRUE"},{"perl":"TRUE"}]]],["<-","MAKE",["Sys.getenv","\"MAKE\""]],["<-","rarch",["Sys.getenv","\"R_ARCH\""]]],["{",["<-","rhome",["chartr","\"\\\\\"","\"/\"",["R.home",{}]]],["Sys.setenv",{"R_HOME":"rhome"}],["<-","SHLIB_EXT","\".dll\""],["<-","SHLIB_LIBADD","\"\""],["<-","MAKE","\"make\""],["<-","rarch",["Sys.getenv","\"R_ARCH\"","NA_character_"]],["if",["is.na","rarch"],["{",["if",["nzchar",["$",".Platform","r_arch"]],["{",["<-","rarch",["paste0","\"/\"",["$",".Platform","r_arch"]]],["Sys.setenv",{"R_ARCH":"rarch"}]],["<-","rarch","\"\""]]]]]],["<-","OBJ_EXT","\".o\""],["<-","objs",["character",{}]],["<-","shlib","\"\""],["<-","site",["Sys.getenv","\"R_MAKEVARS_SITE\"","NA_character_"]],["if",["is.na","site"],["<-","site",["file.path",["paste0",["R.home","\"etc\""],"rarch"],"\"Makevars.site\""]]],["<-","makefiles",["c",["file.path",["paste0",["R.home","\"etc\""],"rarch"],"\"Makeconf\""],["if",["file.exists","site"],"site"],["file.path",["R.home","\"share\""],"\"make\"",["if","WINDOWS","\"winshlib.mk\"","\"shlib.mk\""]]]],["<-","shlib_libadd",["if",["nzchar","SHLIB_LIBADD"],"SHLIB_LIBADD",["character",{}]]],["<-","with_cxx","FALSE"],["<-","with_f77","FALSE"],["<-","with_f9x","FALSE"],["<-","with_objc","FALSE"],["<-","use_cxx98","FALSE"],["<-","use_cxx11","FALSE"],["<-","use_cxx14","FALSE"],["<-","use_cxx17","FALSE"],["<-","use_fc_link","FALSE"],["<-","pkg_libs",["character",{}]],["<-","clean","FALSE"],["<-","preclean","FALSE"],["<-","dry_run","FALSE"],["<-","debug","FALSE"],["while",["length","args"],["{",["<-","a",["[","args","1L"]],["if",["%in%","a",["c","\"-h\"","\"--help\""]],["{",["Usage",{}],["return","0L"]],["if",["%in%","a",["c","\"-v\"","\"--version\""]],["{",["cat","\"R shared object builder: \"",["[[","R.version","\"major\""],"\".\"",["[[","R.version","\"minor\""],"\" (r\"",["[[","R.version","\"svn rev\""],"\")\\n\"",{"sep":"\"\""}],["cat","\"\"","\"Copyright (C) 2000-2013 The R Core Team.\"","\"This is free software; see the GNU General Public License version 2\"","\"or later for copying conditions.  There is NO warranty.\"",{"sep":"\"\\n\""}],["return","0L"]],["if",["%in%","a",["c","\"-n\"","\"--dry-run\""]],["{",["<-","dry_run","TRUE"]],["if",["%in%","a",["c","\"-d\"","\"--debug\""]],["{",["<-","debug","TRUE"]],["if",["%in%","a",["c","\"-c\"","\"--clean\""]],["{",["<-","clean","TRUE"]],["if",["==","a","\"--preclean\""],["{",["<-","preclean","TRUE"]],["if",["==","a","\"-o\""],["{",["if",[">=",["length","args"],"2L"],["{",["<-","shlib",["[","args","2L"]],["<-","args",["[","args",["-","1L"]]]],["stop","\"-o option without value\"",{"call.":"FALSE"}]]],["if",["==",["substr","a","1","9"],"\"--output=\""],["{",["<-","shlib",["substr","a","10","1000"]]],["{",["<-","base",["sub","\"\\\\.[[:alnum:]]*$\"","\"\"","a"]],["<-","ext",["sub",["paste0","base","\".\""],"\"\"","a",{"fixed":"TRUE"}]],["<-","nobj","\"\""],["if",["nzchar","ext"],["{",["if",["%in%","ext",["c","\"cc\"","\"cpp\""]],["{",["<-","with_cxx","TRUE"],["<-","nobj","base"]],["if",["==","ext","\"m\""],["{",["<-","with_objc","TRUE"],["<-","nobj","base"]],["if",["%in%","ext",["c","\"mm\"","\"M\""]],["{",["<-","with_objc",["<-","with_cxx","TRUE"]],["<-","nobj","base"]],["if",["==","ext","\"f\""],["{",["<-","with_f77","TRUE"],["<-","nobj","base"]],["if",["%in%","ext",["c","\"f90\"","\"f95\""]],["{",["<-","with_f9x","TRUE"],["<-","nobj","base"]],["if",["==","ext","\"c\""],["{",["<-","nobj","base"]],["if",["==","ext","\"o\""],["{",["<-","nobj","base"]]]]]]]]],["if",["&&",["nzchar","nobj"],["!",["nzchar","shlib"]]],["<-","shlib",["paste0","nobj","SHLIB_EXT"]]]]],["if",["nzchar","nobj"],["<-","objs",["c","objs","nobj"]],["<-","pkg_libs",["c","pkg_libs","a"]]]]]]]]]]]],["<-","args",["[","args",["-","1L"]]]]],["if",["length","objs"],["<-","objs",["paste0","objs","OBJ_EXT",{"collapse":"\" \""}]]],["if","WINDOWS",["{",["if",["!",["is.na",["<-","f",["Sys.getenv","\"R_MAKEVARS_USER\"","NA_character_"]]]],["{",["if",["file.exists","f"],["<-","makefiles",["c","makefiles","f"]]]],["if",["&&",["==","rarch","\"/x64\""],["file.exists",["<-","f",["path.expand","\"~/.R/Makevars.win64\""]]]],["<-","makefiles",["c","makefiles","f"]],["if",["file.exists",["<-","f",["path.expand","\"~/.R/Makevars.win\""]]],["<-","makefiles",["c","makefiles","f"]],["if",["file.exists",["<-","f",["path.expand","\"~/.R/Makevars\""]]],["<-","makefiles",["c","makefiles","f"]]]]]]],["{",["<-","makefiles",["c","makefiles",["makevars_user",{}]]]]],["<-","makeobjs",["paste0","\"OBJECTS=\"",["shQuote","objs"]]],["if",["&&","WINDOWS",["file.exists","\"Makevars.win\""]],["{",["<-","makefiles",["c","\"Makevars.win\"","makefiles"]],["<-","lines",["readLines","\"Makevars.win\"",{"warn":"FALSE"}]],["if",["length",["grep","\"^OBJECTS *=\"","lines",{"perl":"TRUE"},{"useBytes":"TRUE"}]],["<-","makeobjs","\"\""]],["if",["length",["<-","ll",["grep","\"^CXX_STD *=\"","lines",{"perl":"TRUE"},{"value":"TRUE"},{"useBytes":"TRUE"}]]],["{",["<-","cxxstd",["gsub","\"^CXX_STD *=\"","\"\"","ll"]],["<-","cxxstd",["gsub","\" *\"","\"\"","cxxstd"]],["if",["==","cxxstd","\"CXX17\""],["{",["<-","use_cxx17","TRUE"],["<-","with_cxx","TRUE"]],["if",["==","cxxstd","\"CXX14\""],["{",["<-","use_cxx14","TRUE"],["<-","with_cxx","TRUE"]],["if",["==","cxxstd","\"CXX11\""],["{",["<-","use_cxx11","TRUE"],["<-","with_cxx","TRUE"]],["if",["==","cxxstd","\"CXX98\""],["{",["<-","use_cxx98","TRUE"],["<-","with_cxx","TRUE"]]]]]]]],["if",["any",["grepl","\"^USE_FC_TO_LINK\"","lines",{"perl":"TRUE"},{"useBytes":"TRUE"}]],["<-","use_fc_link","TRUE"]]],["if",["file.exists","\"Makevars\""],["{",["<-","makefiles",["c","\"Makevars\"","makefiles"]],["<-","lines",["readLines","\"Makevars\"",{"warn":"FALSE"}]],["if",["length",["grep","\"^OBJECTS *=\"","lines",{"perl":"TRUE"},{"useBytes":"TRUE"}]],["<-","makeobjs","\"\""]],["if",["length",["<-","ll",["grep","\"^CXX_STD *=\"","lines",{"perl":"TRUE"},{"value":"TRUE"},{"useBytes":"TRUE"}]]],["{",["<-","cxxstd",["gsub","\"^CXX_STD *=\"","\"\"","ll"]],["<-","cxxstd",["gsub","\" *\"","\"\"","cxxstd"]],["if",["==","cxxstd","\"CXX17\""],["{",["<-","use_cxx17","TRUE"],["<-","with_cxx","TRUE"]],["if",["==","cxxstd","\"CXX14\""],["{",["<-","use_cxx14","TRUE"],["<-","with_cxx","TRUE"]],["if",["==","cxxstd","\"CXX11\""],["{",["<-","use_cxx11","TRUE"],["<-","with_cxx","TRUE"]],["if",["==","cxxstd","\"CXX98\""],["{",["<-","use_cxx98","TRUE"],["<-","with_cxx","TRUE"]]]]]]]],["if",["any",["grepl","\"^USE_FC_TO_LINK\"","lines",{"perl":"TRUE"},{"useBytes":"TRUE"}]],["<-","use_fc_link","TRUE"]]]]],["if",["&&",["&&",["&&",["!","use_cxx11"],["!","use_cxx14"]],["!","use_cxx17"]],["!","use_cxx98"]],["{",["<-","val17",["Sys.getenv","\"USE_CXX17\"","NA_character_"]],["<-","val14",["Sys.getenv","\"USE_CXX14\"","NA_character_"]],["<-","val11",["Sys.getenv","\"USE_CXX11\"","NA_character_"]],["<-","val98",["Sys.getenv","\"USE_CXX98\"","NA_character_"]],["if",["!",["is.na","val17"]],["{",["<-","use_cxx17","TRUE"]],["if",["!",["is.na","val14"]],["{",["<-","use_cxx14","TRUE"]],["if",["!",["is.na","val11"]],["{",["<-","use_cxx11","TRUE"]],["if",["!",["is.na","val98"]],["{",["<-","use_cxx98","TRUE"]],["{",["<-","val",["Sys.getenv","\"R_PKG_CXX_STD\""]],["if",["==","val","\"CXX17\""],["{",["<-","use_cxx17","TRUE"]],["if",["==","val","\"CXX14\""],["{",["<-","use_cxx14","TRUE"]],["if",["==","val","\"CXX11\""],["{",["<-","use_cxx11","TRUE"]],["if",["==","val","\"CXX98\""],["{",["<-","use_cxx98","TRUE"]]]]]]]]]]]]],["if","with_cxx",["{",["<-","checkCXX",["function",[{"cxxstd":""}],["{",["for","i",["rev",["seq_along","makefiles"]],["{",["<-","lines",["readLines",["[","makefiles","i"],{"warn":"FALSE"}]],["<-","pattern",["paste0","\"^\"","cxxstd","\" *= *\""]],["<-","ll",["grep","pattern","lines",{"perl":"TRUE"},{"value":"TRUE"},{"useBytes":"TRUE"}]],["for","j",["rev",["seq_along","ll"]],["{",["<-","cxx",["gsub","pattern","\"\"",["[","ll","j"]]],["return",["nzchar","cxx"]]]]]],["return","FALSE"]]]],["if",["&&","use_cxx17",["!",["checkCXX","\"CXX17\""]]],["{",["stop","\"C++17 standard requested but CXX17 is not defined\""]]],["if",["&&","use_cxx14",["!",["checkCXX","\"CXX14\""]]],["{",["stop","\"C++14 standard requested but CXX14 is not defined\""]]],["if",["&&","use_cxx11",["!",["checkCXX","\"CXX11\""]]],["{",["stop","\"C++11 standard requested but CXX11 is not defined\""]]],["if",["&&","use_cxx98",["!",["checkCXX","\"CXX98\""]]],["{",["stop","\"C++98 standard requested but CXX98 is not defined\""]]],["if","use_cxx98",["{",["warning","\"Support for C++98 is deprecated\"",{"call.":"FALSE"}]]]]],["<-","makeargs",["paste0","\"SHLIB=\"",["shQuote","shlib"]]],["if","with_cxx",["{",["<-","makeargs",["if","use_cxx17",["c","\"CXX='$(CXX17) $(CXX17STD)'\"","\"CXXFLAGS='$(CXX17FLAGS)'\"","\"CXXPICFLAGS='$(CXX17PICFLAGS)'\"","\"SHLIB_LDFLAGS='$(SHLIB_CXX17LDFLAGS)'\"","\"SHLIB_LD='$(SHLIB_CXX17LD)'\"","makeargs"],["if","use_cxx14",["c","\"CXX='$(CXX14) $(CXX14STD)'\"","\"CXXFLAGS='$(CXX14FLAGS)'\"","\"CXXPICFLAGS='$(CXX14PICFLAGS)'\"","\"SHLIB_LDFLAGS='$(SHLIB_CXX14LDFLAGS)'\"","\"SHLIB_LD='$(SHLIB_CXX14LD)'\"","makeargs"],["if","use_cxx11",["c","\"CXX='$(CXX11) $(CXX11STD)'\"","\"CXXFLAGS='$(CXX11FLAGS)'\"","\"CXXPICFLAGS='$(CXX11PICFLAGS)'\"","\"SHLIB_LDFLAGS='$(SHLIB_CXX11LDFLAGS)'\"","\"SHLIB_LD='$(SHLIB_CXX11LD)'\"","makeargs"],["if","use_cxx98",["c","\"CXX='$(CXX98) $(CXX98STD)'\"","\"CXXFLAGS='$(CXX98FLAGS)'\"","\"CXXPICFLAGS='$(CXX98PICFLAGS)'\"","\"SHLIB_LDFLAGS='$(SHLIB_CXX98LDFLAGS)'\"","\"SHLIB_LD='$(SHLIB_CXX98LD)'\"","makeargs"],["c","\"SHLIB_LDFLAGS='$(SHLIB_CXXLDFLAGS)'\"","\"SHLIB_LD='$(SHLIB_CXXLD)'\"","makeargs"]]]]]]],["if",["&&","use_fc_link",["(",["||","with_f77","with_f9x"]]],["<-","makeargs",["c","\"SHLIB_LDFLAGS='$(SHLIB_FCLDFLAGS)'\"","\"SHLIB_LD='$(SHLIB_FCLD)'\"","makeargs"]]]],["if","with_objc",["<-","shlib_libadd",["c","shlib_libadd","\"$(OBJC_LIBS)\""]]],["if",["||","with_f77","with_f9x"],["<-","shlib_libadd",["c","shlib_libadd","\"$(FLIBS) $(FCLIBS_XTRA)\""]]],["if",["length","pkg_libs"],["<-","makeargs",["c","makeargs",["paste0","\"PKG_LIBS='\"",["p1","pkg_libs"],"\"'\""]]]],["if",["length","shlib_libadd"],["<-","makeargs",["c","makeargs",["paste0","\"SHLIB_LIBADD='\"",["p1","shlib_libadd"],"\"'\""]]]],["if",["&&",["&&","with_f9x",["file.exists","\"Makevars\""]],["length",["grep","\"^\\\\s*PKG_FCFLAGS\"","lines",{"perl":"TRUE"},{"useBytes":"TRUE"}]]],["<-","makeargs",["c","makeargs","\"P_FCFLAGS='$(PKG_FCFLAGS)'\""]]],["if",["&&","WINDOWS","debug"],["<-","makeargs",["c","makeargs","\"DEBUG=T\""]]],["if",["&&","WINDOWS",["==","rarch","\"/x64\""]],["<-","makeargs",["c","makeargs","\"WIN=64 TCLBIN=64\""]]],["<-","build_objects_symbol_tables",["config_val_to_logical",["Sys.getenv","\"_R_SHLIB_BUILD_OBJECTS_SYMBOL_TABLES_\"","\"FALSE\""]]],["<-","cmd",["paste","MAKE",["p1",["paste","\"-f\"",["shQuote","makefiles"]]],["p1","makeargs"],["p1","makeobjs"]]],["if","dry_run",["{",["cat","\"make cmd is\\n  \"","cmd","\"\\n\\nmake would use\\n\"",{"sep":"\"\""}],["system",["paste","cmd","\"-n\""]],["<-","res","0"]],["{",["if","preclean",["system",["paste","cmd","\"shlib-clean\""]]],["<-","res",["system","cmd"]],["if",["&&",["(",["==","res","0L"]],"build_objects_symbol_tables"],["{",["system",["paste","cmd","\"symbols.rds\""]]]],["if","clean",["system",["paste","cmd","\"shlib-clean\""]]]]],"res"]]],["<-",".writePkgIndices",["function",[{"dir":"","outDir":"","OS":["$",".Platform","OS.type"],"html":"TRUE"}],["{",["<-","re",["function",[{"x":""}],["{",["<-","xx",["rep.int","TRUE",["length","x"]]],["<-",["[","xx",["grep","\"-package\"","x",{"fixed":"TRUE"}]],"FALSE"],["order","xx",["toupper","x"],"x"]]]],["<-","html_header",["function",[{"pkg":"","title":"","version":"","conn":""}],["{",["cat",["paste",["HTMLheader","title",{"Rhome":"\"../../..\""},{"up":"\"../../../doc/html/packages.html\""},{"css":"\"R.css\""}],{"collapse":"\"\\n\""}],"'<h2>Documentation for package &lsquo;'","pkg","'&rsquo; version '","version","'</h2>\\n\\n'",{"sep":"\"\""},{"file":"conn"}],["cat","'<ul><li><a href=\"../DESCRIPTION\">DESCRIPTION file</a>.</li>\\n'",{"file":"conn"}],["if",["file.exists",["file.path","outDir","\"doc\""]],["cat","'<li><a href=\"../doc/index.html\">User guides, package vignettes and other documentation.</a></li>\\n'",{"file":"conn"}]],["if",["file.exists",["file.path","outDir","\"demo\""]],["cat","'<li><a href=\"../demo\">Code demos</a>.  Use <a href=\"../../utils/help/demo\">demo()</a> to run them.</li>\\n'",{"sep":"\"\""},{"file":"conn"}]],["if",["any",["file.exists",["c",["file.path","outDir","\"NEWS\""],["file.path","outDir","\"NEWS.Rd\""]]]],["cat","'<li><a href=\"../NEWS\">Package NEWS</a>.</li>\\n'",{"sep":"\"\""},{"file":"conn"}]],["cat","'</ul>\\n\\n<h2>Help Pages</h2>\\n\\n\\n'",{"sep":"\"\""},{"file":"conn"}]]]],["<-","firstLetterCategory",["function",[{"x":""}],["{",["<-",["[","x",["endsWith","x","\"-package\""]],"\" \""],["<-","x",["toupper",["substr","x","1","1"]]],["<-",["[","x",[">","x","\"Z\""]],"\"misc\""],["<-",["[","x",["&",["<","x","\"A\""],["!=","x","\" \""]]],"\"misc\""],"x"]]],["<-","Rd",["if",["file.exists",["<-","f",["file.path","outDir","\"Meta\"","\"Rd.rds\""]]],["readRDS","f"],["{",["<-","db",["tryCatch",["Rd_db",["basename","outDir"],{"lib.loc":["dirname","outDir"]}],{"error":["function",[{"e":""}],"NULL"]}]],["if",["is.null","db"],["<-","db",["Rd_db",{"dir":"dir"}]]],["<-","Rd",["Rd_contents","db"]],["saveRDS","Rd",["file.path","outDir","\"Meta\"","\"Rd.rds\""]],"Rd"]]],["<-","topics",["$","Rd","Aliases"]],["<-","M",["if",["!",["length","topics"]],["{",["data.frame",{"Topic":["character",{}]},{"File":["character",{}]},{"Title":["character",{}]},{"Internal":["character",{}]},{"stringsAsFactors":"FALSE"}]],["{",["<-","lens",["lengths","topics"]],["<-","files",["sub","\"\\\\.[Rr]d$\"","\"\"",["$","Rd","File"]]],["<-","internal",["(",[">",["vapply",["$","Rd","Keywords"],["function",[{"x":""}],["match","\"internal\"","x","0L"]],"0L"],"0L"]]],["data.frame",{"Topic":["unlist","topics"]},{"File":["rep.int","files","lens"]},{"Title":["rep.int",["$","Rd","Title"],"lens"]},{"Internal":["rep.int","internal","lens"]},{"stringsAsFactors":"FALSE"}]]]],["<-","outman",["file.path","outDir","\"help\""]],["dir.create","outman",{"showWarnings":"FALSE"}],["<-","MM",["[","M",["re",["[","M",{},"1L"]],[":","1","2"]]],[["::","utils","write.table"],"MM",["file.path","outman","\"AnIndex\""],{"quote":"FALSE"},{"row.names":"FALSE"},{"col.names":"FALSE"},{"sep":"\"\\t\""}],["<-","a",["structure",["[","MM",{},"2L"],{"names":["[","MM",{},"1L"]}]],["saveRDS","a",["file.path","outman","\"aliases.rds\""]],["<-","outman",["file.path","outDir","\"html\""]],["dir.create","outman",{"showWarnings":"FALSE"}],["<-","outcon",["file",["file.path","outman","\"00Index.html\""],"\"wt\""]],["on.exit",["close","outcon"]],["<-","desc",["[",["read.dcf",["file.path","outDir","\"DESCRIPTION\""]],"1L",{}]],["if",["!",["is.na",["<-","enc",["[","desc","\"Encoding\""]]]],["{",["<-","desc",["iconv","desc","enc","\"UTF-8\"",{"sub":"\"byte\""}]]]],["<-","M",["[","M",["!",["[","M",{},"4L"]],{}]],["if",["%in%",["[","desc","\"Package\""],["c","\"base\"","\"graphics\"","\"stats\"","\"utils\""]],["{",["for","pass",[":","1","2"],["{",["<-","gen",["gsub","\"\\\\.data\\\\.frame\"","\".data_frame\"",["$","M","Topic"]]],["<-","gen",["sub","\"\\\\.model\\\\.matrix$\"","\".modelmatrix\"","gen"]],["<-","gen",["sub","\"^(all|as|is|file|Sys|row|na|model)\\\\.\"","\"\\\\1_\"","gen"]],["<-","gen",["sub","\"^(.*)\\\\.test\"","\"\\\\1_test\"","gen"]],["<-","gen",["sub","\"([-[:alnum:]]+)\\\\.[^.]+$\"","\"\\\\1\"","gen"]],["<-","last",["nrow","M"]],["<-","nongen",["%in%","gen",["c","\"ar\"","\"bw\"","\"contr\"","\"dyn\"","\"lm\"","\"qr\"","\"ts\"","\"which\"","\".Call\"","\".External\"","\".Library\"","\".First\"","\".Last\""]]],["<-","nc",["nchar","gen"]],["<-","asg",["&",["(",[">","nc","3"]],["==",["substr","gen",["-","nc","1"],"nc"],"\"<-\""]]],["<-","skip",["&",["&",["(",["==","gen",["c","\"\"",["[","gen",["-","last"]]]]],["(",["==",["$","M","File"],["c","\"\"",["[",["$","M","File"],["-","last"]]]]]],["!","nongen"]]],["<-","skip",["|","skip","asg"]],["<-","M",["[","M",["!","skip"],{}]]]]]],["<-",["$","M","Topic"],["sub","\"^([^,]*),.*-method$\"","\"\\\\1-method\"",["$","M","Topic"]]],["<-","M",["[","M",["!",["duplicated",["[","M",{},["c","\"Topic\"","\"File\""]]]],{}]],["<-","M",["[","M",["re",["[","M",{},"1L"]],{}]],["<-","htmlize",["function",[{"x":"","backtick":""}],["{",["<-","x",["gsub","\"&\"","\"&amp;\"","x",{"fixed":"TRUE"}]],["<-","x",["gsub","\"<\"","\"&lt;\"","x",{"fixed":"TRUE"}]],["<-","x",["gsub","\">\"","\"&gt;\"","x",{"fixed":"TRUE"}]],["if","backtick",["{",["<-","x",["gsub","\"---\"","\"-\"","x",{"fixed":"TRUE"}]],["<-","x",["gsub","\"--\"","\"-\"","x",{"fixed":"TRUE"}]]]],"x"]]],["<-",["$","M","HTopic"],["htmlize",["$","M","Topic"],"FALSE"]],["<-",["$","M","Title"],["htmlize",["$","M","Title"],"TRUE"]],["html_header",["[","desc","\"Package\""],["htmlize",["[","desc","\"Title\""],"TRUE"],["[","desc","\"Version\""],"outcon"],["<-","use_alpha",["(",[">",["nrow","M"],"100"]]],["if","use_alpha",["{",["<-","first",["firstLetterCategory",["$","M","Topic"]]],["<-","nm",["sort",["names",["table","first"]]]],["<-","m",["match","\" \"","nm","0L"]],["if","m",["<-","nm",["c","\" \"",["[","nm",["-","m"]]]]],["<-","m",["match","\"misc\"","nm","0L"]],["if","m",["<-","nm",["c",["[","nm",["-","m"]],"\"misc\""]]],["writeLines",["c","'<p style=\"text-align: center;\">'",["paste0","\"<a href=\\\"#\"","nm","\"\\\">\"","nm","\"</a>\""],"\"</p>\\n\""],"outcon"],["for","f","nm",["{",["<-","MM",["[","M",["==","first","f"],{}]],["if",["!=","f","\" \""],["cat","\"\\n<h2><a name=\\\"\"","f","\"\\\">-- \"","f","\" --</a></h2>\\n\\n\"",{"sep":"\"\""},{"file":"outcon"}]],["writeLines",["c","'<table width=\"100%\">'",["paste0","'<tr><td style=\"width: 25%;\"><a href=\"'",["[","MM",{},"2L"],"'.html\">'",["$","MM","HTopic"],"'</a></td>\\n<td>'",["[","MM",{},"3L"],"'</td></tr>'"],"\"</table>\""],"outcon"]]]],["if",["nrow","M"],["{",["writeLines",["c","'<table width=\"100%\">'",["paste0","'<tr><td style=\"width: 25%;\"><a href=\"'",["[","M",{},"2L"],"'.html\">'",["$","M","HTopic"],"'</a></td>\\n<td>'",["[","M",{},"3L"],"'</td></tr>'"],"\"</table>\""],"outcon"]],["{",["writeLines","\"There are no help pages in this package\"","outcon"]]]],["writeLines","'</body></html>'","outcon"],["file.copy",["file.path",["R.home","\"doc\""],"\"html\"","\"R.css\""],"outman"],["invisible","NULL"]]]],["<-",".convertRdfiles",["function",[{"dir":"","outDir":"","types":"\"html\"","silent":"FALSE","outenc":"\"UTF-8\""}],["{",["<-","showtype",["function",[{"type":""}],["{",["if",["!","shown"],["{",["<-","nc",["nchar","bf"]],["if",["<","nc","38L"],["cat","\"    \"","bf",["rep.int","\" \"",["-","40L","nc"]],{"sep":"\"\""}],["cat","\"    \"","bf","\"\\n\"",["rep.int","\" \"","44L"],{"sep":"\"\""}]],["<<-","shown","TRUE"]]],["cat","type",["rep.int","\" \"",["max","0L",["-","6L",["nchar","type"]]]],{"sep":"\"\""}]]]],["<-","dirname",["c","\"html\"","\"latex\"","\"R-ex\""]],["<-","ext",["c","\".html\"","\".tex\"","\".R\""]],["<-",["names","dirname"],["<-",["names","ext"],["c","\"html\"","\"latex\"","\"example\""]]],["<-","mandir",["file.path","dir","\"man\""]],["if",["!",["dir.exists","mandir"]],["return",{}]],["<-","desc",["$",["readRDS",["file.path","outDir","\"Meta\"","\"package.rds\""]],"DESCRIPTION"]],["<-","pkg",["[","desc","\"Package\""]],["<-","ver",["[","desc","\"Version\""]],["for","type","types",["dir.create",["file.path","outDir",["[","dirname","type"]],{"showWarnings":"FALSE"}]],["cat","\"  converting help for package \"",["sQuote","pkg"],"\"\\n\"",{"sep":"\"\""}],["if",["%in%","\"html\"","types"],["{",["if",["!","silent"],["message","\"    finding HTML links ...\"",{"appendLF":"FALSE"},{"domain":"NA"}]],["<-","Links",["findHTMLlinks","outDir",{"level":[":","0","1"]}]],["if",["!","silent"],["message","\" done\""]],["<-",".Links2",["function",[],["{",["message","\"\\n    finding level-2 HTML links ...\"",{"appendLF":"FALSE"},{"domain":"NA"}],["<-","Links2",["findHTMLlinks",{"level":"2"}]],["message","\" done\"",{"domain":"NA"}],"Links2"]]],["delayedAssign","\"Links2\"",[".Links2",{}]]]],["<-","db",["tryCatch",["Rd_db",["basename","outDir"],{"lib.loc":["dirname","outDir"]}],{"error":["function",[{"e":""}],"NULL"]}]],["if",["is.null","db"],["<-","db",["Rd_db",{"dir":"dir"}]]],["if",["!",["length","db"]],["return",{}]],["<-",".whandler",["function",[{"e":""}],["{",["<<-",".messages",["c",".messages",["paste","\"Rd warning:\"",["conditionMessage","e"]]]],["invokeRestart","\"muffleWarning\""]]]],["<-",".ehandler",["function",[{"e":""}],["{",["message","\"\"",{"domain":"NA"}],["unlink","ff"],["stop",["conditionMessage","e"],{"domain":"NA"},{"call.":"FALSE"}]]]],["<-",".convert",["function",[{"expr":""}],["withCallingHandlers",["tryCatch","expr",{"error":".ehandler"}],{"warning":".whandler"}]]],["<-","files",["names","db"]],["for","nf","files",["{",["<-",".messages",["character",{}]],["<-","Rd",["[[","db","nf"]],["<-",["attr","Rd","\"source\""],"NULL"],["<-","bf",["sub","\"\\\\.[Rr]d$\"","\"\"",["basename","nf"]]],["<-","f",["attr","Rd","\"Rdfile\""]],["<-","shown","FALSE"],["if",["%in%","\"html\"","types"],["{",["<-","type","\"html\""],["<-","ff",["file.path","outDir",["[","dirname","type"],["paste0","bf",["[","ext","type"]]]],["if",["||",["!",["file_test","\"-f\"","ff"]],["file_test","\"-nt\"","f","ff"]],["{",["showtype","type"],[".convert",["Rd2HTML","Rd","ff",{"package":["c","pkg","ver"]},{"defines":"NULL"},{"Links":"Links"},{"Links2":"Links2"}]]]]]],["if",["%in%","\"latex\"","types"],["{",["<-","type","\"latex\""],["<-","ff",["file.path","outDir",["[","dirname","type"],["paste0","bf",["[","ext","type"]]]],["if",["||",["!",["file_test","\"-f\"","ff"]],["file_test","\"-nt\"","f","ff"]],["{",["showtype","type"],[".convert",["Rd2latex","Rd","ff",{"defines":"NULL"},{"outputEncoding":"outenc"}]]]]]],["if",["%in%","\"example\"","types"],["{",["<-","type","\"example\""],["<-","ff",["file.path","outDir",["[","dirname","type"],["paste0","bf",["[","ext","type"]]]],["if",["||",["!",["file_test","\"-f\"","ff"]],["file_test","\"-nt\"","f","ff"]],["{",[".convert",["Rd2ex","Rd","ff",{"defines":"NULL"}]],["if",["file_test","\"-f\"","ff"],["showtype","type"]]]]]],["if","shown",["{",["cat","\"\\n\""],["if",["length",".messages"],["writeLines",["unique",".messages"]]]]]]],["<-","bfs",["sub","\"\\\\.[Rr]d$\"","\"\"",["basename","files"]]],["if",["%in%","\"html\"","types"],["{",["<-","type","\"html\""],["<-","have",["list.files",["file.path","outDir",["[","dirname","type"]]]],["<-","have2",["sub","\"\\\\.html\"","\"\"",["basename","have"]]],["<-","drop",["[","have",["%notin%","have2",["c","bfs","\"00Index\"","\"R.css\""]]]],["unlink",["file.path","outDir",["[","dirname","type"],"drop"]]]],["if",["%in%","\"latex\"","types"],["{",["<-","type","\"latex\""],["<-","have",["list.files",["file.path","outDir",["[","dirname","type"]]]],["<-","have2",["sub","\"\\\\.tex\"","\"\"",["basename","have"]]],["<-","drop",["[","have",["%notin%","have2","bfs"]]],["unlink",["file.path","outDir",["[","dirname","type"],"drop"]]]],["if",["%in%","\"example\"","types"],["{",["<-","type","\"example\""],["<-","have",["list.files",["file.path","outDir",["[","dirname","type"]]]],["<-","have2",["sub","\"\\\\.R\"","\"\"",["basename","have"]]],["<-","drop",["[","have",["%notin%","have2","bfs"]]],["unlink",["file.path","outDir",["[","dirname","type"],"drop"]]]]]]],["<-",".makeDllRes",["function",[{"name":"\"\"","version":"\"0.0\""}],["{",["if",["||",["file.exists",["<-","f","\"../DESCRIPTION\""]],["file.exists",["<-","f","\"../../DESCRIPTION\""]]],["{",["<-","desc",["[[",["read.dcf","f"],"1L"]],["if",["!",["is.na",["<-","f",["[","desc","\"Package\""]]]],["<-","name","f"]],["if",["!",["is.na",["<-","f",["[","desc","\"Version\""]]]],["<-","version","f"]]]],["writeLines",["c","'#include <windows.h>'","'#include \"Rversion.h\"'","''","'VS_VERSION_INFO VERSIONINFO'","'FILEVERSION R_FILEVERSION'","'PRODUCTVERSION 3,0,0,0'","'FILEFLAGSMASK 0x3L'","'FILEOS VOS__WINDOWS32'","'FILETYPE VFT_APP'","'BEGIN'","'    BLOCK \"StringFileInfo\"'","'    BEGIN'","'        BLOCK \"040904E4\"'","'        BEGIN'"]],["cat","\"            VALUE \\\"FileDescription\\\", \\\"DLL for R package `\"","name","\"'\\\\0\\\"\\n\"","\"            VALUE \\\"FileVersion\\\", \\\"\"","version","\"\\\\0\\\"\\n\"",{"sep":"\"\""}],["writeLines",["c","'            VALUE \"Compiled under R Version\", R_MAJOR \".\" R_MINOR \" (\" R_YEAR \"-\" R_MONTH \"-\" R_DAY \")\\\\0\"'","'            VALUE \"Project info\", \"https://www.r-project.org\\\\0\"'","'        END'","'    END'","'    BLOCK \"VarFileInfo\"'","'    BEGIN'","'        VALUE \"Translation\", 0x409, 1252'","'    END'","'END'"]]]]],["<-","makevars_user",["function",[],["{",["<-","m",["character",{}]],["if",["==",["$",".Platform","OS.type"],"\"windows\""],["{",["if",["!",["is.na",["<-","f",["Sys.getenv","\"R_MAKEVARS_USER\"","NA_character_"]]]],["{",["if",["file.exists","f"],["<-","m","f"]]],["if",["&&",["(",["==",["Sys.getenv","\"R_ARCH\""],"\"/x64\""]],["file.exists",["<-","f",["path.expand","\"~/.R/Makevars.win64\""]]]],["<-","m","f"],["if",["file.exists",["<-","f",["path.expand","\"~/.R/Makevars.win\""]]],["<-","m","f"],["if",["file.exists",["<-","f",["path.expand","\"~/.R/Makevars\""]]],["<-","m","f"]]]]]],["{",["if",["!",["is.na",["<-","f",["Sys.getenv","\"R_MAKEVARS_USER\"","NA_character_"]]]],["{",["if",["file.exists","f"],["<-","m","f"]]],["if",["file.exists",["<-","f",["path.expand",["paste0","\"~/.R/Makevars-\"",["Sys.getenv","\"R_PLATFORM\""]]]]],["<-","m","f"],["if",["file.exists",["<-","f",["path.expand","\"~/.R/Makevars\""]]],["<-","m","f"]]]]]],"m"]]],["<-","makevars_site",["function",[],["{",["<-","m",["character",{}]],["if",["is.na",["<-","f",["Sys.getenv","\"R_MAKEVARS_SITE\"","NA_character_"]]],["<-","f",["file.path",["paste0",["R.home","\"etc\""],["Sys.getenv","\"R_ARCH\""]],"\"Makevars.site\""]]],["if",["file.exists","f"],["<-","m","f"]],"m"]]]]
