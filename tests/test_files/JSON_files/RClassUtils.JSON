[[],["<-","testVirtual",["function",[{"properties":"","extends":"","prototype":"","where":""}],["{",["if",["length","extends"],["{",["<-","en",["names","extends"]],["if",["!",["is.na",["match","\"VIRTUAL\"","en"]]],["return","TRUE"]],["for","what","en",["{",["<-","enDef",["getClassDef","what",{"package":["packageSlot",["[[","extends","what"]]}]],["if",["&&",["!",["is.null","enDef"]],["isFALSE",["@","enDef","virtual"]]],["return","FALSE"]]]]]],["(",["&&",["==",["length","properties"],"0L"],["is.null","prototype"]]]]]],["<-","makePrototypeFromClassDef",["function",[{"slots":"","ClassDef":"","extends":"","where":""}],["{",["<-","className",["@","ClassDef","className"]],["<-","snames",["names","slots"]],["<-","supers",["names","extends"]],["<-","dataPartClass",["elNamed","slots","\".Data\""]],["<-","prototype",["@","ClassDef","prototype"]],["<-","dataPartDone",["||",["is.null","dataPartClass"],["is","prototype","dataPartClass"]]],["if",["&&",["!",[".identC",["class","prototype"],"className"]],[".isPrototype","prototype"]],["{",["<-","pnames",["@","prototype","slots"]],["<-","prototype",["@","prototype","object"]]],["<-","pnames",["names",["attributes","prototype"]]]],["if",["&&",["==",["length","slots"],"0L"],["!",["is.null","prototype"]]],["return","prototype"]],["for","i",["seq_along","extends"],["{",["<-","what",["el","supers","i"]],["<-","exti",["[[","extends","i"]],["if",["isFALSE",["@","exti","simple"]],["next"]],["if",["identical","what","\"VIRTUAL\""],["{"],["if",["isClass","what",{"where":["packageSlot","exti"]}],["{",["<-","cli",["getClassDef","what",{"package":["packageSlot","exti"]}]],["<-","slotsi",["names",["@","cli","slots"]]],["<-","pri",["@","cli","prototype"]],["if",["is.null","prototype"],["{",["<-","prototype","pri"],["<-","pnames",["names",["attributes","prototype"]]]],["if",["length","slots"],["{",["for","slotName","slotsi",["{",["if",["identical","slotName","\".Data\""],["{",["if",["!","dataPartDone"],["{",["<-","prototype",["setDataPart","prototype",["getDataPart","pri"],"FALSE"]],["<-","dataPartDone","TRUE"]]]],["if",["is.na",["match","slotName","pnames"]],["{",["<-",["slot","prototype","slotName",{"check":"FALSE"}],["attr","pri","slotName"]],["<-","pnames",["c","pnames","slotName"]]]]]]]],["if",["&&",["!","dataPartDone"],["extends","cli","dataPartClass"]],["{",["<-","prototype",["setDataPart","prototype","pri","FALSE"]],["<-","dataPartDone","TRUE"]]]]]]]]]],["if",["==",["length","slots"],"0L"],["return","prototype"]],["if",["is.null","prototype"],["<-","prototype",["defaultPrototype",{}]]],["<-","pnames",["names",["attributes","prototype"]]],["<-","pslots",["if",[".identC",["class","prototype"],"className"],["names",["attributes",["unclass","prototype"]]],["if",["isClass",["class","prototype"]],["names",["getSlots",["getClass",["class","prototype"]]]]]]],["if",["!",["is.na",["match","\".Data\"","snames"]]],["{",["<-","dataPartClass",["elNamed","slots","\".Data\""]],["if",["!",["(",["isVirtualClass","dataPartClass"]]],["{",["if",["isClass",["class","prototype"],{"where":"where"}],["{",["<-","prototypeClass",["getClass",["class","prototype"],{"where":"where"}]],["<-","OK",["extends","prototypeClass","dataPartClass"]]],["<-","OK","FALSE"]],["if",["isFALSE","OK"],["stop",["gettextf","\"in constructing the prototype for class %s: prototype has class %s, but the data part specifies class %s\"",["dQuote","className"],["dQuote",[".class1","prototype"]],["dQuote","dataPartClass"]],{"domain":"NA"}]]]],["<-","iData",["-",["match","\".Data\"","snames"]]],["<-","snames",["[","snames","iData"]],["<-","slots",["[","slots","iData"]]]],["for","j",["seq_along","snames"],["{",["<-","name",["el","snames","j"]],["<-","i",["match","name","pnames"]],["if",["is.na","i"],["{",["<-",["slot","prototype","name",{"check":"FALSE"}],["tryNew",["el","slots","j"],"where"]]]]]],["<-","extra",["[","pnames",["&",["is.na",["match","pnames","snames"]],["!",["is.na",["match","pnames","pslots"]]]]]],["if",["&&",["length","extra"],["is.na",["match","\"oldClass\"","supers"]]],["warning",["gettextf","\"in constructing the prototype for class %s, slots in prototype and not in class: %s\"",["dQuote","className"],["paste","extra",{"collapse":"\", \""}]],{"domain":"NA"}]],["<-","slotDefs",["@","ClassDef","slots"]],["<-","slotNames",["names","slotDefs"]],["<-","pnames",["names",["attributes","prototype"]]],["<-","pnames",["[","pnames",["!",["is.na",["match","pnames","slotNames"]]]]],["<-","check",["rep.int","FALSE",["length","pnames"]]],["for","what","pnames",["{",["<-","pwhat",["slot","prototype","what"]],["<-","slotClass",["getClassDef",["[[","slotDefs","what"],"where"]],["if",["||",["is.null","slotClass"],["!",["extends",["class","pwhat"],"slotClass"]]],["{",["if",["is.null","pwhat"],["{"],["if",["&&",["is","slotClass","\"classRepresentation\""],["@","slotClass","virtual"]],["{"],["<-",["[","check",["match","what","pnames"]],"TRUE"]]]]]]],["if",["any","check"],["stop",["gettextf","\"in making the prototype for class %s elements of the prototype failed to match the corresponding slot class: %s\"",["dQuote","className"],["paste",["[","pnames","check"],"\"(class\"",[".dQ",["[","slotDefs",["match",["[","pnames","check"],"slotNames"]]],"\")\"",{"collapse":"\", \""}]],{"domain":"NA"}]],"prototype"]]],["<-","newEmptyObject",["function",[],["{",["<-","value",["list",{}]],"value"]]],["<-","completeClassDefinition",["function",[{"Class":"","ClassDef":["getClassDef","Class"],"where":"","doExtends":"TRUE"}],["{",["<-","ClassDef",[".completeClassSlots","ClassDef","where"]],["<-","immediate",["@","ClassDef","contains"]],["<-","properties",["@","ClassDef","slots"]],["<-","prototype",["makePrototypeFromClassDef","properties","ClassDef","immediate","where"]],["<-","virtual",["@","ClassDef","virtual"]],["<-","extends",["if","doExtends",["completeExtends","ClassDef",{"where":"where"}],["@","ClassDef","contains"]]],["<-","subclasses",["if","doExtends",["completeSubclasses","ClassDef",{"where":"where"}],["@","ClassDef","subclasses"]]],["if",["is.na","virtual"],["<-","virtual",["testVirtual","properties","immediate","prototype","where"]]],["<-","ClassDef",[".mergeClassDefSlots","ClassDef",{"slots":"properties"},{"contains":"extends"},{"prototype":"prototype"},{"virtual":"virtual"},{"subclasses":"subclasses"}]],["if",["&&",["any",["!",["is.na",["match",["names",["@","ClassDef","subclasses"]],["names",["@","ClassDef","contains"]]]]]],[">",["getOption","\"warn\""],"0"]],["{",["<-","bad",["[",["names",["@","ClassDef","subclasses"]],["!",["is.na",["match",["names",["@","ClassDef","subclasses"]],["names",["@","ClassDef","contains"]]]]]]],["warning",["gettextf","\"potential cycle in class inheritance: %s has duplicates in superclasses and subclasses (%s)\"",["dQuote","Class"],["paste","bad",{"collapse":"\", \""}]],{"domain":"NA"}]]],"ClassDef"]]],["<-",".completeClassSlots",["function",[{"ClassDef":"","where":""}],["{",["<-","properties",["@","ClassDef","slots"]],["<-","ext",["getAllSuperClasses","ClassDef","TRUE"]],["if",["length","ext"],["{",["<-","superProps",["vector","\"list\"",["+",["length","ext"],"1L"]]],["<-",["[[","superProps","1L"],"properties"],["for","i",["seq_along","ext"],["{",["<-","eClass",["[[","ext","i"]],["if",["isClass","eClass",{"where":"where"}],["<-",["[[","superProps",["+","i","1"]],["@",["getClassDef","eClass",{"where":"where"}],"slots"]]]]],["<-","properties",["unlist","superProps",{"recursive":"FALSE"}]],["if",["anyDuplicated",["allNames","properties"]],["{",["<-","duped",["duplicated",["names","properties"]]],["<-","properties",["[","properties",["!","duped"]]]]]]],["<-","undefClasses",["rep.int","FALSE",["length","properties"]]],["for","i",["seq_along","properties"],["{",["<-","cli",["[[","properties","i"]],["if",["is.null",["packageSlot","cli"]],["{",["<-","cliDef",["getClassDef","cli","where"]],["if",["is.null","cliDef"],["<-",["[[","undefClasses","i"],"TRUE"],["<-",["packageSlot",["[[","properties","i"]],["@","cliDef","package"]]]],["{",["<-","cliDef",["getClassDef","cli"]],["if",["is.null","cliDef"],["<-",["[[","undefClasses","i"],"TRUE"]]]]]],["if",["any","undefClasses"],["warning",["sprintf",["gettext","\"undefined slot classes in definition of %s: %s\"",{"domain":"\"R-methods\""}],[".dQ",["@","ClassDef","className"]],["paste0",["[",["names","properties"],"undefClasses"],["gettextf","\"(class %s)\"",[".dQ",["[",["unlist","properties",{"recursive":"FALSE"}],"undefClasses"]]],{"collapse":"\", \""}]],{"call.":"FALSE"},{"domain":"NA"}]],["<-",["@","ClassDef","slots"],"properties"],"ClassDef"]]],["<-",".uncompleteClassDefinition",["function",[{"ClassDef":"","slotName":""}],["{",["if",["missing","slotName"],["{",["<-","ClassDef",["Recall","ClassDef","\"contains\""]],["Recall","ClassDef","\"subclasses\""]],["{",["<-","prev",["slot","ClassDef","slotName"]],["if",["length","prev"],["{",["<-","indir",["vapply","prev",".isIndirectExtension","NA"]],["<-",["slot","ClassDef","slotName"],["[",["slot","ClassDef","slotName"],["!","indir"]]]]],"ClassDef"]]]]],["<-",".isIndirectExtension",["function",[{"object":""}],["{",["&&",["is","object","\"SClassExtension\""],[">",["length",["@","object","by"]],"0"]]]]],["<-",".directSubClasses",["function",[{"ClassDef":""}],["{",["if",["length",["<-","sc",["@","ClassDef","subclasses"]]],["{",["[",["names","sc"],["vapply","sc",["function",[{"cc":""}],["==",["@","cc","distance"],"1L"]],"NA"]]]]]]],["<-","getAllSuperClasses",["function",[{"ClassDef":"","simpleOnly":"TRUE"}],["{",["<-","temp",["superClassDepth","ClassDef",{"simpleOnly":"simpleOnly"}]],["unique",["[",["$","temp","label"],["sort.list",["$","temp","depth"]]]]]]],["<-","superClassDepth",["function",[{"ClassDef":"","soFar":["@","ClassDef","className"],"simpleOnly":"TRUE"}],["{",["<-","ext",["@","ClassDef","contains"]],["<-","ok",["rep.int","TRUE",["length","ext"]]],["for","i",["seq_along","ext"],["{",["<-","exti",["[[","ext","i"]],["if",["||",[".isIndirectExtension","exti"],["(",["&&","simpleOnly",["!",["@","exti","simple"]]]]],["<-",["[","ok","i"],"FALSE"]]]],["<-","ext",["[","ext","ok"]],["<-","immediate",["names","ext"]],["<-","notSoFar",["is.na",["match","immediate","soFar"]]],["<-","immediate",["[","immediate","notSoFar"]],["<-","super",["list",{"label":"immediate"},{"depth":["rep.int","1",["length","immediate"]]},{"ext":"ext"}]],["for","i",["seq_along","immediate"],["{",["<-","what",["[[","immediate","i"]],["if",["!",["is.na",["match","what","soFar"]]],["next"]],["<-","exti",["[[","ext","i"]],["<-","soFar",["c","soFar","what"]],["if",["!",["is","exti","\"SClassExtension\""]],["stop",["gettextf","\"in definition of class %s, information for superclass %s is of class %s (expected \\\"SClassExtension\\\")\"",["dQuote",["@","ClassDef","className"]],["dQuote","what"],["dQuote",["class","exti"]]],{"domain":"NA"}]],["<-","superClass",["getClassDef",["@","exti","superClass"],{"package":["@","exti","package"]}]],["if",["is.null","superClass"],["{",["warning",["gettextf","\"class %s extends an undefined class, %s\"",["dQuote",["@","ClassDef","className"]],["dQuote","what"]],{"domain":"NA"}],["next"]]],["<-","more",["Recall","superClass","soFar"]],["<-","whatMore",["$","more","label"]],["if",["!",["all",["is.na",["match","whatMore","soFar"]]]],["{",["<-","ok",["is.na",["match","whatMore","soFar"]]],["<-",["$","more","depth"],["[",["$","more","depth"],"ok"]],["<-",["$","more","label"],["[",["$","more","label"],"ok"]],["<-",["$","more","ext"],["[",["$","more","ext"],"ok"]],["<-","whatMore",["[","whatMore","ok"]]]],["if",["length","whatMore"],["{",["<-","soFar",["c","soFar","whatMore"]],["<-",["$","super","depth"],["c",["$","super","depth"],["+","1",["$","more","depth"]]]],["<-",["$","super","label"],["c",["$","super","label"],["$","more","label"]]],["<-",["$","super","ext"],["c",["$","super","ext"],["$","more","ext"]]]]]]],"super"]]],["<-","selectSuperClasses",["function",[{"Class":"","dropVirtual":"FALSE","namesOnly":"TRUE","directOnly":"TRUE","simpleOnly":"directOnly","where":["topenv",["parent.frame",{}]]}],["{",["<-","ext",["if",["isClassDef","Class"],["@","Class","contains"],["if",["isClass","Class",{"where":"where"}],["@",["getClass","Class",{"where":"where"}],"contains"],["stop","\"'Class' must be a valid class definition or class\""]]]],[".selectSuperClasses","ext",{"dropVirtual":"dropVirtual"},{"namesOnly":"namesOnly"},{"directOnly":"directOnly"},{"simpleOnly":"simpleOnly"}]]]],["<-",".selectSuperClasses",["function",[{"ext":"","dropVirtual":"FALSE","namesOnly":"TRUE","directOnly":"TRUE","simpleOnly":"directOnly"}],["{",["<-","addCond",["function",[{"xpr":"","prev":""}],["if",["length","prev"],["substitute",["&&","P","N"],["list",{"P":"prev"},{"N":"xpr"}]],"xpr"]]],["<-","C",["if","dropVirtual",["{",["<-","isVirtualExt",["function",[{"x":""}],["@",["getClassDef",["@","x","superClass"],{"package":["packageSlot","x"]}],"virtual"]]],["quote",["!",["isVirtualExt","exti"]]]],["expression",{}]]],["if","directOnly",["<-","C",["addCond",["quote",["==",["length",["@","exti","by"]],"0"]],"C"]]],["if","simpleOnly",["<-","C",["addCond",["quote",["@","exti","simple"]],"C"]]],["if",["length","C"],["{",["<-","F",["function",[{"exti":""}],["{"]]],["<-",["body","F"],"C"],["[",["(",["if","namesOnly",["names","ext"],"ext"]],["vapply","ext","F","NA",{"USE.NAMES":"FALSE"}]]],["if","namesOnly",["names","ext"],"ext"]]]]],["<-","inheritedSlotNames",["function",[{"Class":"","where":["topenv",["parent.frame",{}]]}],["{",["<-","ext",["if",["isClassDef","Class"],["@","Class","contains"],["if",["isClass","Class",{"where":"where"}],["@",["getClass","Class",{"where":"where"}],"contains"]]]],["<-","supcl",[".selectSuperClasses","ext",{"namesOnly":"FALSE"}]],["<-","supdefs",["lapply","supcl",["function",[{"s":""}],["{",["getClassDef",["@","s","superClass"],{"package":["packageSlot","s"]}]]]]],["unique",["unlist",["lapply","supdefs","slotNames"],{"use.names":"FALSE"}]]]]],["<-","isVirtualClass",["function",[{"Class":"","where":["topenv",["parent.frame",{}]]}],["{",["if",["isClassDef","Class"],["@","Class","virtual"],["if",["isClass","Class",{"where":"where"}],["@",["getClass","Class",{"where":"where"}],"virtual"],"TRUE"]]]]],["<-","assignClassDef",["function",[{"Class":"","def":"","where":".GlobalEnv","force":"FALSE"}],["{",["if",["!",["is","def","\"classRepresentation\""]],["stop",["gettextf","\"trying to assign an object of class %s as the definition of class %s: must supply a \\\"classRepresentation\\\" object\"",["dQuote",["class","def"]],["dQuote","Class"]],{"domain":"NA"}]],["<-","clName",["@","def","className"]],["<-",["attributes","clName"],"NULL"],["if",["!",[".identC","Class","clName"]],["stop",["gettextf","\"assigning as %s a class representation with internal name %s\"",["dQuote","Class"],["dQuote",["@","def","className"]]],{"domain":"NA"}]],["<-","where",["as.environment","where"]],["<-","mname",["classMetaName","Class"]],["if",["&&",["exists","mname",{"envir":"where"},{"inherits":"FALSE"}],["bindingIsLocked","mname","where"]],["{",["if","force",[".assignOverBinding","mname","def","where","FALSE"],["stop",["gettextf","\"class %s has a locked definition in package %s\"",["dQuote","Class"],["sQuote",["getPackageName","where"]]]]]],["assign","mname","def","where"]],["if",["cacheOnAssign","where"],[".cacheClass","clName","def",["is","def","\"ClassUnionRepresentation\""],"where"]]]]],["<-",".InitClassDefinition",["function",[{"where":""}],["{",["<-","defSlots",["list",{"slots":"\"list\""},{"contains":"\"list\""},{"virtual":"\"logical\""},{"prototype":"\"ANY\""},{"validity":"\"OptionalFunction\""},{"access":"\"list\""},{"className":"\"character\""},{"package":"\"character\""},{"subclasses":"\"list\""},{"versionKey":"\"externalptr\""},{"sealed":"\"logical\""}]],["<-","protoSlots",["list",{"slots":["list",{}]},{"contains":["list",{}]},{"virtual":"NA"},{"prototype":"NULL"},{"validity":"NULL"},{"access":["list",{}]},{"className":["character",{}]},{"package":["character",{}]},{"subclasses":["list",{}]},{"versionKey":[".newExternalptr",{}]},{"sealed":"FALSE"}]],["<-","proto",["defaultPrototype",{}]],["<-","pnames",["names","protoSlots"]],["for","i",["seq_along","protoSlots"],["<-",["slot","proto",["[[","pnames","i"],"FALSE"],["[[","protoSlots","i"]]],["<-","classRepClass",[".classNameFromMethods","\"classRepresentation\""]],["<-",["class","proto"],"classRepClass"],["<-","object",["defaultPrototype",{}]],["<-",["class","object"],"classRepClass"],["<-",["slot","object","\"slots\"","FALSE"],"defSlots"],["<-",["slot","object","\"className\"","FALSE"],"classRepClass"],["<-",["slot","object","\"virtual\"","FALSE"],"FALSE"],["<-",["slot","object","\"prototype\"","FALSE"],"proto"],["for","what",["c","\"contains\"","\"validity\"","\"access\"","\"hasValidity\"","\"subclasses\"","\"versionKey\""],["<-",["slot","object","what","FALSE"],["elNamed","protoSlots","what"]]],["<-",["slot","object","\"sealed\"","FALSE"],"TRUE"],["<-",["slot","object","\"package\"","FALSE"],["getPackageName","where"]],["assign",["classMetaName","\"classRepresentation\""],"object","where"],["assign","\".NeedPrimitiveMethods\"",["list",{}],"where"]]]],["<-",".classNameFromMethods",["function",[{"what":""}],["{",["<-",["packageSlot","what"],"\"methods\""],"what"]]],["<-",".initClassSupport",["function",[{"where":""}],["{",["setClass","\"classPrototypeDef\"",["representation",{"object":"\"ANY\""},{"slots":"\"character\""},{"dataPart":"\"logical\""}],{"sealed":"TRUE"},{"where":"where"}],["setClass","\".Other\"",["representation",{"label":"\"character\""}],{"sealed":"TRUE"},{"where":"where"}],["setClass","\"MethodSelectionReport\"",["representation",{"generic":"\"character\""},{"allSelections":"\"character\""},{"target":"\"character\""},{"selected":"\"character\""},{"candidates":"\"list\""},{"note":"\"character\""}],{"sealed":"TRUE"},{"where":"where"}],["setClass","\"classGeneratorFunction\"",["representation",{"className":"\"character\""},{"package":"\"character\""}],{"contains":"\"function\""}]]]],["<-","newBasic",["function",[{"Class":"","...":""}],["{",["<-","msg","NULL"],["<-","value",["switch","Class",{"\"NULL\"":["return","NULL"]},{"\"logical\"":""},{"\"numeric\"":""},{"\"character\"":""},{"\"complex\"":""},{"\"double\"":""},{"\"integer\"":""},{"\"raw\"":""},{"\"list\"":["as.vector",["c","..."],"Class"]},{"\"expression\"":["eval",["substitute",["expression","..."]]]},{"\"externalptr\"":["{",["if",[">",["nargs",{}],"1"],["stop","\"'externalptr' objects cannot be initialized from new()\""]],[".newExternalptr",{}]]},{"\"single\"":["as.single",["c","..."]]},{"\"array\"":["if",["!",["missing","..."]],["array","..."],["structure",["numeric",{}],{".Dim":"0L"}]]},{"\"matrix\"":["if",["!",["missing","..."]],["matrix","..."],["matrix","0","0L","0L"]]},{"\"ts\"":["if",["!",["missing","..."]],[["::","stats","ts"],"..."],["structure","NA",{".Tsp":["c","1","1","1"]},{"class":"\"ts\""}]]},["{",["<-","args",["list","..."]],["if",["&&",["==",["length","args"],"1L"],["is",["[[","args","1L"],"Class"]],["{",["<-","value",["as",["[[","args","1L"],"Class"]]],["if",["is.na",["match","Class",".BasicClasses"]],["<-","msg",["paste0","\"Calling new() on an undefined and non-basic class (\\\"\"","Class","\"\\\")\""]],["<-","msg",["gettextf","\"initializing objects from class %s with these arguments is not supported\"",["dQuote","Class"]]]]]]]],["if",["is.null","msg"],"value",["stop","msg",{"domain":"NA"}]]]]],["<-",".useS4Prototype",["function",[{"on":"TRUE","where":".methodsNamespace"}],["{",["if","on",["<-","pp",[".Call","C_Rf_allocS4Object"]],["<-","pp",["list",{}]]],[".assignOverBinding","\".defaultPrototype\"",{"where":"where"},"pp","FALSE"]]]],["<-","defaultPrototype",["function",[],".defaultPrototype"]],["<-","reconcilePropertiesAndPrototype",["function",[{"name":"","properties":"","prototype":"","superClasses":"","where":""}],["{",["<-","StandardPrototype",["defaultPrototype",{}]],["<-","slots",["validSlotNames",["allNames","properties"]]],["<-","dataPartClass",["elNamed","properties","\".Data\""]],["<-","dataPartValue","FALSE"],["if",["&&",["!",["is.null","dataPartClass"]],["is.null",[".validDataPartClass","dataPartClass","where"]]],["stop",["gettextf","\"in defining class %s, the supplied data part class, %s is not valid (must be a basic class or a virtual class combining basic classes)\"",["dQuote","name"],["dQuote","dataPartClass"]],{"domain":"NA"}]],["<-","prototypeClass",["getClass",["class","prototype"],{"where":"where"}]],["if",["&&",["(",["||",["!",["is.null","dataPartClass"]],["length","superClasses"]]],["is.na",["match","\"VIRTUAL\"","superClasses"]]],["{",["for","cl","superClasses",["{",["<-","clDef",["getClassDef","cl",{"where":"where"}]],["if",["is.null","clDef"],["stop",["gettextf","\"no definition was found for superclass %s in the specification of class %s\"",["dQuote","cl"],["dQuote","name"]],{"domain":"NA"}]],["<-","thisDataPart",[".validDataPartClass","clDef","where","dataPartClass"]],["if",["!",["is.null","thisDataPart"]],["{",["<-","dataPartClass","thisDataPart"],["if",["!",["is.null",["@","clDef","prototype"]]],["{",["<-","protoClass",["[",["class",["@","clDef","prototype"]],"1L"]],["<-","newObject",["if",["%in%","protoClass",".AbnormalTypes"],["{",["<-","indirect",["[",".indirectAbnormalClasses","protoClass"]],["@",["getClassDef","indirect"],"prototype"]],["@","clDef","prototype"]]],["<-","dataPartValue","TRUE"]]]]]]],["if",["length","dataPartClass"],["{",["if",["is.na",["match","\".Data\"","slots"]],["{",["<-","properties",["c",["list",{"\".Data\"":"dataPartClass"}],"properties"]],["<-","slots",["names","properties"]]],["if",["!",["extends",["elNamed","properties","\".Data\""],"dataPartClass"]],["stop",["gettextf","\"conflicting definition of data part: .Data = %s, superclass implies %s\"",["dQuote",["elNamed","properties","\".Data\""]],["dQuote","dataPartClass"]],{"domain":"NA"}]]],["if",["is.null","prototype"],["{",["if","dataPartValue",["<-","prototype","newObject"],["if",["isVirtualClass","dataPartClass",{"where":"where"}],["<-","prototype",["newBasic","\"logical\""]],["<-","prototype",["new","dataPartClass"]]]],["<-","prototypeClass",["getClass",["class","prototype"],{"where":"where"}]]],["{",["if",["extends","prototypeClass","\"classPrototypeDef\""],["{",["<-","hasDataPart",["isTRUE",["@","prototype","dataPart"]]],["if",["!","hasDataPart"],["{",["if",["!","dataPartValue"],["<-","newObject",["new","dataPartClass"]]],["<-","pobject",["@","prototype","object"]],["<-","anames",["names",["attributes","pobject"]]],["<-",["[",["attributes","newObject"],"anames"],["attributes","pobject"]],["<-",["@","prototype","object"],"newObject"]],["if",["!",["extends",["getClass",["class",["@","prototype","object"]],{"where":"where"}],"dataPartClass"]],["stop",["gettextf","\"a prototype object was supplied with object slot of class %s, but the class definition requires an object that is class %s\"",["dQuote",["class",["@","prototype","object"]]],["dQuote","dataPartClass"]],{"domain":"NA"}]]]],["if",["!",["extends","prototypeClass","dataPartClass"]],["stop",["gettextf","\"a prototype was supplied of class %s, but the class definition requires an object that is class %s\"",["dQuote",["class","prototype"]],["dQuote","dataPartClass"]],{"domain":"NA"}]]]]]]],["if",["is.null","prototype"],["{",["<-","prototype","StandardPrototype"]]]]],["<-","allProps","properties"],["for","cl","superClasses",["{",["<-","clDef",["getClassDef","cl","where"]],["if",["is","clDef","\"classRepresentation\""],["{",["<-","theseProperties",["getSlots","clDef"]],["<-","theseSlots",["names","theseProperties"]],["<-","theseSlots",["[","theseSlots",["!=","theseSlots","\".Data\""]]],["<-","dups",["!",["is.na",["match","theseSlots",["names","allProps"]]]]],["for","dup",["[","theseSlots","dups"],["if",["!",["extends",["elNamed","allProps","dup"],["elNamed","theseProperties","dup"]]],["stop",["gettextf","\"Definition of slot %s, in class %s, as %s conflicts with definition, inherited from class %s, as %s\"",["sQuote","dup"],["dQuote","name"],["dQuote",["elNamed","allProps","dup"]],["dQuote","cl"],["dQuote",["elNamed","theseProperties","dup"]]],{"domain":"NA"}]]],["<-","theseSlots",["[","theseSlots",["!","dups"]]],["if",["length","theseSlots"],["<-",["[","allProps","theseSlots"],["[","theseProperties","theseSlots"]]]],["stop",["gettextf","\"class %s extends an undefined class (%s)\"",["dQuote","name"],["dQuote","cl"]],{"domain":"NA"}]]]],["<-","undefinedPrototypeSlots",["setdiff",["names","prototype"],["names","allProps"]]],["if",[">",["length","undefinedPrototypeSlots"],"0L"],["{",["stop",["gettextf","\"The prototype for class %s has undefined slot(s): %s\"",["dQuote","name"],["paste0","\"'\"","undefinedPrototypeSlots","\"'\"",{"collapse":"\", \""}]]]]],["if",["is.null","dataPartClass"],["{",["if",["extends","prototypeClass","\"classPrototypeDef\""],["{"],["{",["if",["is.list","prototype"],["<-","prototype",["do.call","\"prototype\"","prototype"]]],["if",["is.null","prototype"],["<-","prototype","StandardPrototype"]]]]],["{",["<-","dataPartDef",["getClass","dataPartClass"]],["<-","checkDataPart",["!",["isXS3Class","dataPartDef"]]],["if","checkDataPart",["<-","checkDataPart",["(",["||",["(",["&&",["is.na",["match","dataPartClass",".BasicClasses"]],["!",["isVirtualClass","dataPartDef"]]]],["length",["@","dataPartDef","slots"]]]]]],["if","checkDataPart",["stop",["gettextf","\"%s is not eligible to be the data part of another class (must be a basic class or a virtual class with no slots)\"",["dQuote","dataPartClass"]],{"domain":"NA"}]],["if",["extends","prototypeClass","\"classPrototypeDef\""],["{"],["if",["extends","prototypeClass","dataPartClass"],["{",["if",["&&",["extends","prototypeClass","\"list\""],["length",["names","prototype"]]],["warning","\"prototype is a list with named elements (could be ambiguous):  better to use function prototype() to avoid trouble.\""]]],["if",["is.list","prototype"],["<-","prototype",["do.call","\"prototype\"","prototype"]]]]]]],["if",["extends","prototypeClass","\"classPrototypeDef\""],["{",["<-","pnames",["@","prototype","slots"]],["<-","prototype",["@","prototype","object"]],["if",["&&",["==",["length","superClasses"],"0L"],["any",["is.na",["match","pnames","slots"]]]],["stop",["sprintf",["ngettext",["sum",["is.na",["match","pnames","slots"]]],"\"named elements of prototype do not correspond to slot name: %s\"","\"named elements of prototype do not correspond to slot names: %s\""],["paste",[".dQ",["[","pnames",["is.na",["match","pnames","slots"]]]],{"collapse":"\", \""}]],{"domain":"NA"}]]],["<-","pnames",["allNames",["attributes","prototype"]]]],["<-","what",["seq_along","properties"]],["<-","props",["[","properties","what"]],["<-","what",["[","slots","what"]],["<-","nm",["names",["attributes","prototype"]]],["for","i",["seq_along","what"],["{",["<-","propName",["el","what","i"]],["if",["&&",["!",["identical","propName","\".Data\""]],["!",["%in%","propName","nm"]]],["<-",["slot","prototype","propName","FALSE"],["tryNew",["el","props","i"],"where"]]]]],["list",{"properties":"properties"},{"prototype":"prototype"}]]]],["<-","tryNew",["function",[{"Class":"","where":""}],["{",["<-","ClassDef",["getClassDef","Class","where"]],["if",["is.null","ClassDef"],["return","NULL"],["if",["isTRUE",["@","ClassDef","virtual"]],["@","ClassDef","prototype"],["tryCatch",["new","ClassDef"],{"error":["function",[{"e":""}],["{",["<-","value",["@","ClassDef","prototype"]],["<-",["class","value"],["@","ClassDef","className"]],"value"]]}]]]]]],["<-","empty.dump",["function",[],["list",{}]]],["<-","isClassDef",["function",[{"object":""}],["is","object","\"classRepresentation\""]]],["<-","showClass",["function",[{"Class":"","complete":"TRUE","propertiesAreCalled":"\"Slots\""}],["{",["if",["isClassDef","Class"],["{",["<-","ClassDef","Class"],["<-","Class",["@","ClassDef","className"]]],["if","complete",["<-","ClassDef",["getClass","Class"]],["<-","ClassDef",["getClassDef","Class"]]]],["cat",["if",["isTRUE",["@","ClassDef","virtual"]],"\"Virtual \""],"\"Class \"",[".dQ","Class"],["if",["nzchar",["<-","pkg",["@","ClassDef","package"]]],["c","\" [\"",["if",["!=","pkg","\".GlobalEnv\""],"\"package\"","\"in\""],"\" \\\"\"","pkg","\"\\\"]\""]],"\"\\n\"",{"sep":"\"\""}],["<-","x",["@","ClassDef","slots"]],["if",["length","x"],["{",["printPropertiesList","x","propertiesAreCalled"]],["cat","\"\\nNo \"","propertiesAreCalled","\", prototype of class \\\"\"",[".class1",["@","ClassDef","prototype"]],"\"\\\"\\n\"",{"sep":"\"\""}]],["<-","ext",["@","ClassDef","contains"]],["if",["length","ext"],["{",["cat","\"\\nExtends: \""],["showExtends","ext"]]],["<-","ext",["@","ClassDef","subclasses"]],["if",["length","ext"],["{",["cat","\"\\nKnown Subclasses: \""],["showExtends","ext"]]]]]],["<-","printPropertiesList",["function",[{"x":"","propertiesAreCalled":""}],["{",["if",["length","x"],["{",["<-","n",["length","x"]],["cat","\"\\n\"","propertiesAreCalled","\":\\n\"",{"sep":"\"\""}],["<-","text",["format",["c",["names","x"],["as.character","x"]],{"justify":"\"right\""}]],["<-","text",["matrix","text",{"nrow":"2L"},{"ncol":"n"},{"byrow":"TRUE"}]],["<-",["dimnames","text"],["list",["c","\"Name:\"","\"Class:\""],["rep.int","\"\"","n"]]],["print","text",{"quote":"FALSE"}]]]]]],["<-","showExtends",["function",[{"ext":"","printTo":["stdout",{}]}],["{",["<-","what",["names","ext"]],["<-","how",["character",["length","ext"]]],["for","i",["seq_along","ext"],["{",["<-","eli",["el","ext","i"]],["if",["is","eli","\"SClassExtension\""],["{",["<-",["[","how","i"],["if",["length",["@","eli","by"]],["paste","\"by class\"",["paste0","\"\\\"\"",["@","eli","by"],"\"\\\", distance \"",["@","eli","distance"],{"collapse":"\", \""}]],["if",["isTRUE",["@","eli","dataPart"]],"\"from data part\"","\"directly\""]]],["if",["!",["@","eli","simple"]],["{",["if",["&&",["is.function",["@","eli","test"]],["!",["isTRUE",["body",["@","eli","test"]]]]],["{",["<-",["[","how","i"],["paste0",["[","how","i"],["if",["is.function",["@","eli","coerce"]],"\", with explicit test and coerce\"","\", with explicit test\""]]]],["if",["is.function",["@","eli","coerce"]],["<-",["[","how","i"],["paste0",["[","how","i"],"\", with explicit coerce\""]]]]]]]]]],["if",["isFALSE","printTo"],["list",{"what":"what"},{"how":"how"}],["if",["||",["all",["!",["nzchar","how"]]],["all",["==","how","\"directly\""]]],["{",["<-","what",["paste0","'\"'","what","'\"'"]],["if",[">",["length","what"],"1L"],["<-","what",["c",["paste0",["[","what",["-",["length","what"]]],"\",\""],["[[","what",["length","what"]]]]],["cat",{"file":"printTo"},"what",{"fill":"TRUE"}]],["cat",{"file":"printTo"},"\"\\n\"",["paste0","\"Class \\\"\"","what","\"\\\", \"","how","\"\\n\""],{"sep":"\"\""}]]]]]],["<-","printClassRepresentation",["function",[{"x":"","...":""}],["showClass","x",{"propertiesAreCalled":"\"Slots\""}]]],["<-","possibleExtends",["function",[{"class1":"","class2":"","ClassDef1":"","ClassDef2":""}],["||",[".identC","class1","class2"],[".identC","class2","\"ANY\""]]]],["<-",".possibleExtends",["function",[{"class1":"","class2":"","ClassDef1":["getClassDef","class1"],"ClassDef2":["getClassDef","class2",{"where":[".classEnv","ClassDef1"]}]}],["{",["if",["||",[".identC",["[[","class1","1L"],"class2"],[".identC","class2","\"ANY\""]],["return","TRUE"]],["if",["is.null","ClassDef1"],["return","FALSE"]],["<-","ext",["@","ClassDef1","contains"]],["if",["!",["is.null",["<-","contained",["[[","ext","class2"]]]],"contained",["if",["is.null","ClassDef2"],"FALSE",["{",["<-","subs",["@","ClassDef2","subclasses"]],["if",["&&",["!",[".identC",["class","ClassDef2"],"\"classRepresentation\""]],["isClassUnion","ClassDef2"]],["any",["%in%",["c","class1",["names","ext"]],["names","subs"]]],["{",["<-","i",["match","class1",["names","subs"]]],["<-","i",["[","i",["!",["is.na","i"]]]],["if",["length","i"],["[[","subs",["[","i","1L"]],"FALSE"]]]]]]]]],["<-","completeExtends",["function",[{"ClassDef":"","class2":"","extensionDef":"","where":""}],["{",["<-","ext",["@","ClassDef","contains"]],["for","i",["seq_along","ext"],["{",["if",[".isIndirectExtension",["[[","ext","i"]],["{",["<-","ClassDef",[".uncompleteClassDefinition","ClassDef","\"contains\""]],["break"]]]]],["<-","exts",[".walkClassGraph","ClassDef","\"contains\"","where",["attr","ext","\"conflicts\""]]],["if",["length","exts"],["{",["if",["&&",["%in%","\"oldClass\"",["names","exts"]],[">",["length",["@","ClassDef","slots"]],"1L"]],["<-","exts",[".S3Extends","ClassDef","exts","where"]]]]],["if",["&&",["!",["missing","class2"]],["length",["@","ClassDef","subclasses"]]],["{",["<-","strictBy","TRUE"],["<-","subclasses",[".transitiveSubclasses",["@","ClassDef","className"],"class2","extensionDef",["@","ClassDef","subclasses"],"strictBy"]],["for","i",["seq_along","subclasses"],["{",["<-","obji",["[[","subclasses","i"]],["if",["!",["extends",["@","obji","subClass"],"class2"]],["setIs",["@","obji","subClass"],"class2",{"extensionObject":"obji"},{"doComplete":"FALSE"},{"where":"where"}]]]]]],"exts"]]],["<-","completeSubclasses",["function",[{"classDef":"","class2":"","extensionDef":"","where":"","classDef2":["getClassDef","class2","where"]}],["{",["<-","ext",["@","classDef","subclasses"]],["for","i",["seq_along","ext"],["{",["if",[".isIndirectExtension",["[[","ext","i"]],["{",["<-","classDef",[".uncompleteClassDefinition","classDef","\"subclasses\""]],["break"]]]]],["<-","subclasses",[".walkClassGraph","classDef","\"subclasses\"","where"]],["if",["&&",["!",["missing","class2"]],["length",["@","classDef","contains"]]],["{",["<-","strictBy","TRUE"],["<-","contains",[".transitiveExtends","class2",["@","classDef","className"],"extensionDef",["@","classDef","contains"],"strictBy"]],["for","i",["seq_along","contains"],["{",["<-","obji",["[[","contains","i"]],["<-","cli",["@",["[[","contains","i"],"superClass"]],["<-","cliDef",["getClassDef","cli",{"package":["packageSlot","obji"]}]],["if",["!",["extends","classDef2","cliDef"]],["setIs","class2","cli",{"extensionObject":"obji"},{"doComplete":"FALSE"},{"where":"where"}]]]]]],"subclasses"]]],["<-",".walkClassGraph",["function",[{"ClassDef":"","slotName":"","where":"","conflicts":["character",{}]}],["{",["<-","ext",["slot","ClassDef","slotName"]],["if",["==",["length","ext"],"0"],["return","ext"]],["<-","className",["@","ClassDef","className"]],["<-","superClassCase",["identical","slotName","\"contains\""]],["<-","what",["names","ext"]],["for","i",["seq_along","ext"],["{",["<-","by",["[[","what","i"]],["if",["isClass","by",{"where":["packageSlot",["[[","ext","i"]]}],["{",["<-","byDef",["getClassDef","by",{"package":["packageSlot",["[[","ext","i"]]}]],["<-","exti",["slot","byDef","slotName"]],["<-","coni",["attr","exti","\"conflicts\""]],["if",["&&","superClassCase",[">",["length","coni"],"0"]],["{",["<-","conflicts",["unique",["c","conflicts","coni"]]]]],["<-","exti",["[","exti",["is.na",["match",["names","exti"],"what"]]]],["if",["length","exti"],["{",["if","superClassCase",["{",["<-","strictBy","TRUE"],["<-","exti",[".transitiveExtends","className","by",["[[","ext","i"],"exti","strictBy"]]],["{",["<-","strictBy","TRUE"],["<-","exti",[".transitiveSubclasses","by","className",["[[","ext","i"],"exti","strictBy"]]]],["<-","ext",["c","ext","exti"]]]]],["stop",["gettextf","\"the '%s' list for class %s, includes an undefined class %s\"",["if","superClassCase","\"superClass\"","\"subClass\""],["dQuote","className"],["dQuote",[".className","by"]]],{"domain":"NA"}]]]],["<-","what",["names","ext"]],["if",["!",["all",["is.na",["match","what","className"]]]],["{",["<-","ok",["is.na",["match","what","className"]]],["for","i",["[",["seq_along","what"],["!","ok"]],["{",["<-","exti",["[[","ext","i"]],["if",["!",["is","exti","\"conditionalExtension\""]],["{",["if","superClassCase",["{",["<-","whatError","\"contain itself\""]],["{",["<-","whatError","\"have itself as a subclass\""]]],["stop",["sprintf","\"class %s may not %s: it contains class %s, with a circular relation back to %s\"",["dQuote","className"],"whatError",["dQuote",["@","exti","by"]],["dQuote","className"]],{"domain":"NA"}]]]]],["<-","ext",["[","ext","ok"]]]],["<-","distOrder",["sort.list",["vapply","ext",["function",[{"x":""}],["@","x","distance"]],"1"]]],["<-","ext",["[","ext","distOrder"]],["if",["&&","superClassCase",["(",["||",["anyDuplicated","what"],[">",["length","conflicts"],"0"]]]],["<-","ext",[".resolveSuperclasses","ClassDef","ext","where","conflicts"]]],"ext"]]],["<-",".reportSuperclassConflicts",["function",[{"className":"","ext":"","where":""}],["{",["<-","what",["names","ext"]],["<-","conflicts",["character",{}]],["for","i",["seq_along","ext"],["{",["<-","by",["[[","what","i"]],["<-","wherei",["packageSlot",["[[","ext","i"]]],["if",["&&",["identical",["@",["[[","ext","i"],"distance"],"1"],["isClass","by",{"where":"wherei"}]],["{",["<-","byDef",["getClassDef","by",{"package":"wherei"}]],["<-","exti",["@","byDef","contains"]],["<-","coni",["attr","exti","\"conflicts\""]],["if",[">",["length","coni"],"0"],["{",["warning",["gettextf","\"class %s is inheriting an inconsistent superclass structure from class %s, inconsistent with %s\"",[".dQ","className"],[".dQ","by"],["paste",[".dQ","coni"],{"collapse":"\", \""}]],{"call.":"FALSE"},{"domain":"NA"}],["<-","conflicts",["unique",["c","conflicts","coni"]]]]]]]]],["<-","newconflicts",["attr","ext","\"conflicts\""]],["if",[">",["length","newconflicts"],["length","conflicts"]],["warning",["gettextf","\"unable to find a consistent ordering of superclasses for class %s: order chosen is inconsistent with the superclasses of %s\"",[".dQ","className"],["paste",[".dQ",["setdiff","newconflicts","conflicts"]],{"collapse":"\", \""}]],{"call.":"FALSE"},{"domain":"NA"}]]]]],["<-",".resolveSuperclasses",["function",[{"classDef":"","ext":"","where":"","conflicts":["attr","ext","\"conflicts\""]}],["{",["<-",".condExts",["function",[{"contains":""}],["vapply","contains",["function",[{"x":""}],["is","x","\"conditionalExtension\""]],"NA"]]],["<-",".noncondExtsClass",["function",[{"cl":""}],["{",["if",["isClass","cl",{"where":"where"}],["{",["<-","contains",["@",["getClass","cl",{"where":"where"}],"contains"]],["[",["names","contains"],["!",[".condExts","contains"]]]],"cl"]]]],["<-","what",["names","ext"]],["<-","dups",["unique",["[","what",["duplicated","what"]]]],["if",[">",["length","dups"],"0"],["{",["<-","affected",[">",["match","what","dups","0"],"0"]],["<-","conditionals",[".condExts","ext"]],["if",["any","conditionals"],["{",["<-",["[","affected","conditionals"],"FALSE"],["<-","what2",["[","what","affected"]],["<-","dups",["unique",["[","what2",["duplicated","what2"]]]],["if",["==",["length","dups"],"0"],["{",["if",[">",["length","conflicts"],"0"],["<-",["attr","ext","\"conflicts\""],["unique",["c","conflicts",["attr","ext","\"conflicts\""]]]]],["return","ext"]]]]],["<-","directSupers",["vapply",["@","classDef","contains"],["function",[{"x":""}],["identical",["@","x","distance"],"1"]],"NA"]],["<-","directSupers",["unique",["names",["[",["@","classDef","contains"],"directSupers"]]]],["<-","superExts",["lapply","directSupers",".noncondExtsClass"]],["<-",["names","superExts"],"directSupers"],["=","retain",[".choosePos",["@","classDef","className"],"what","superExts","affected"]],["if",["is.list","retain"],["{",["<-","these",["[[","retain","2"]],["<-","conflicts",["unique",["c","conflicts","these"]]],["<-","retain",["[[","retain","1"]]]],["<-",["[","affected","retain"],"FALSE"],["<-","ext",["[","ext",["!","affected"]]]]],["<-",["attr","ext","\"conflicts\""],"conflicts"],"ext"]]],["<-","classMetaName",["function",[{"name":""}],["methodsPackageMetaName","\"C\"","name"]]],["<-",".ClassMetaPattern",["function",[],["paste0","\"^[.]\"",["substring",["methodsPackageMetaName","\"C\"","\"\""],"2"]]]],["<-","methodsPackageMetaName",["function",[{"prefix":"","name":"","package":"\"\""}],[".Call","C_R_methodsPackageMetaName","prefix","name","package"]]],["<-",".methodsPackageMetaNamePattern","\"^[.]__[A-Z]+__\""],["<-","requireMethods",["function",[{"functions":"","signature":"","message":"\"\"","where":["topenv",["parent.frame",{}]]}],["{",["for","f","functions",["{",["<-","method",["getMethod","f",{"optional":"TRUE"}]],["if",["!",["is.function","method"]],["<-","method",["getGeneric","f",{"where":"where"}]]],["<-",["body","method"],["substitute",["stop",[[":::","methods",".missingMethod"],"FF","MESSAGE",["if",["exists","\".Method\""],".Method"]],{"domain":"NA"}],["list",{"FF":"f"},{"MESSAGE":"message"}]]],["<-",["environment","method"],".GlobalEnv"],["setMethod","f","signature","method",{"where":"where"}]]],"NULL"]]],["<-",".missingMethod",["function",[{"f":"","message":"\"\"","method":""}],["{",["if",["nzchar","message"],["<-","message",["paste0","\"(\"","message","\")\""]]],["<-","message",["paste","\"for function\"","f","message"]],["if",["is","method","\"MethodDefinition\""],["{",["<-","target",["paste",[".dQ",["@","method","target"]],{"collapse":"\", \""}]],["<-","defined",["paste",[".dQ",["@","method","defined"]],{"collapse":"\", \""}]],["<-","message",["paste","\"Required method\"","message","\"not defined for signature\"","target"]],["if",["!",["identical","target","defined"]],["<-","message",["paste","message","\", required for signature\"","defined"]]]],["<-","message",["paste","\"Required method not defined\"","message"]]],"message"]]],["<-","getSlots",["function",[{"x":""}],["{",["<-","classDef",["if",["isClassDef","x"],"x",["getClass","x"]]],["<-","props",["@","classDef","slots"]],["<-","value",["as.character","props"]],["<-",["names","value"],["names","props"]],"value"]]],["<-","validSlotNames",["function",[{"names":""}],["{",["if",["is.na",["match","\"class\"","names"]],"names",["stop","\"\\\"class\\\" is a reserved slot name and cannot be redefined\""]]]]],["<-","getDataPart",["function",[{"object":"","NULL.for.none":"FALSE"}],["{",["if",["==",["typeof","object"],"\"S4\""],["{",["<-","value",["attr","object","\".Data\""]],["if",["is.null","value"],["{",["<-","value",["attr","object","\".xData\""]],["if",["&&",["is.null","value"],["!","NULL.for.none"]],["stop","\"Data part is undefined for general S4 object\""]]]],["return",["if",["identical","value",".pseudoNULL"],"NULL","value"]]]],["<-","temp",["@",["getClass",["class","object"]],"slots"]],["if",["==",["length","temp"],"0L"],["return","object"]],["if",["is.na",["match","\".Data\"",["names","temp"]]],["{",["if","NULL.for.none",["return","NULL"],["stop",["gettextf","\"no '.Data' slot defined for class %s\"",["dQuote",["class","object"]]],{"domain":"NA"}]]]],["<-","dataPart",["[[","temp","\".Data\""]],["switch","dataPart",{"numeric":""},{"vector":""},{"integer":""},{"character":""},{"logical":""},{"complex":""},{"list":["<-",["attributes","object"],"NULL"]},{"matrix":""},{"array":["{",["<-","value","object"],["<-",["attributes","value"],"NULL"],["<-",["attr","value","\"dim\""],["attr","object","\"dim\""]],["<-",["attr","value","\"dimnames\""],["attr","object","\"dimnames\""]],["<-","object","value"]]},{"ts":["{",["<-","value","object"],["<-",["attributes","value"],"NULL"],["<-",["attr","value","\"ts\""],["attr","object","\"ts\""]],["<-","object","value"]]},["if",["is.na",["match","dataPart",".BasicClasses"]],["{",["<-","attrVals",["attributes","object"]],["<-","attrs",["names","attrVals"]],["<-","attrs",["[","attrs",["is.na",["match","attrs",["c","\"class\"",["names","temp"]]]]]],["<-",["attributes","object"],["[","attrVals","attrs"]]],["<-",["attributes","object"],"NULL"]]],"object"]]],["<-","setDataPart",["function",[{"object":"","value":"","check":"TRUE"}],["{",["if",["||","check",["==",["typeof","object"],"\"S4\""]],["{",["<-","classDef",["getClass",["class","object"]]],["<-","slots",["getSlots","classDef"]],["<-","dataSlot",[".dataSlot",["names","slots"]]],["if",["==",["length","dataSlot"],"1"],["<-","dataClass",["elNamed","slots","dataSlot"]],["if","check",["stop",["gettextf","\"class %s does not have a data part (a .Data slot) defined\"",["dQuote",["class","object"]]],{"domain":"NA"}],["return",[".mergeAttrs","value","object"]]]],["<-","value",["as","value","dataClass"]],["if",["==",["typeof","object"],"\"S4\""],["{",["if",["is.null","value"],["<-","value",".pseudoNULL"]],["<-",["attr","object","dataSlot"],"value"],["return","object"]]]]],[".mergeAttrs","value","object"]]]],["<-",".validDataPartClass",["function",[{"cl":"","where":"","prevDataPartClass":"NULL"}],["{",["if",["is","cl","\"classRepresentation\""],["{",["<-","ClassDef","cl"],["<-","cl",["@","ClassDef","className"]]],["<-","ClassDef",["getClass","cl","TRUE"]]],["<-","value",["switch","cl",{"matrix":""},{"array":"cl"},["elNamed",["@","ClassDef","slots"],"\".Data\""]]],["if",["is.null","value"],["{",["if",[".identC","cl","\"structure\""],["<-","value","\"vector\""],["if",["(",["||",["extends","cl","\"vector\""],["!",["is.na",["match","cl",".BasicClasses"]]]]],["<-","value","cl"],["if",["&&",["extends","cl","\"oldClass\""],["isVirtualClass","cl"]],["{"],["if",["&&",["&&",["isTRUE",["@","ClassDef","virtual"]],["==",["length",["@","ClassDef","slots"]],"0L"]],["length",["@","ClassDef","subclasses"]]],["{",["<-","subclasses",["@","ClassDef","subclasses"]],["<-","what",["names","subclasses"]],["<-","value","cl"],["for","i",["seq_along","what"],["{",["<-","ext",["[[","subclasses","i"]],["if",["&&",["&&",["&&",["==",["length",["@","ext","by"]],"0L"],["@","ext","simple"]],["!",["@","ext","dataPart"]]],["is.na",["match",["[","what","i"],".BasicClasses"]]],["{",["<-","value","NULL"],["break"]]]]]]]]]]]],["if",["!",["(",["||",["||",["||",["is.null","value"],["is.null","prevDataPartClass"]],["extends","prevDataPartClass","value"]],["isVirtualClass","value",{"where":"where"}]]]],["{",["warning",["gettextf","\"more than one possible class for the data part: using %s rather than %s\"",[".dQ","prevDataPartClass"],[".dQ","value"]],{"domain":"NA"}],["<-","value","NULL"]]],"value"]]],["<-",".dataSlot",["function",[{"slotNames":""}],["{",["<-","dataSlot",["c","\".Data\"","\".xData\""]],["<-","dataSlot",["[","dataSlot",[">",["match","dataSlot","slotNames","0"],"0"]]],["if",[">",["length","dataSlot"],"1"],["stop","\"class cannot have both an ordinary and hidden data type\""]],"dataSlot"]]],["<-",".mergeAttrs",["function",[{"value":"","object":"","explicit":"NULL"}],["{",["<-","supplied",["attributes","object"]],["if",["length","explicit"],["<-",["[","supplied",["names","explicit"]],"explicit"]],["<-","valueAttrs",["attributes","value"]],["if",["&&",["length",["$","supplied","names"]],["==",["length",["$","valueAttrs","names"]],"0L"]],["{",["if",["!=",["length","value"],["length","object"]],["<-",["length",["$","supplied","names"]],["length","value"]]]]],["if",["length","valueAttrs"],["{",["<-",["$","valueAttrs","class"],"NULL"],["<-",["[","supplied",["names","valueAttrs"]],"valueAttrs"]]],["<-",["attributes","value"],"supplied"],["if",["isS4","object"],[".asS4","value"],"value"]]]],["<-",".newExternalptr",["function",[],[".Call","C_R_externalptr_prototype_object"]]],["<-",".transitiveExtends",["function",[{"from":"","by":"","byExt":"","moreExts":"","strictBy":""}],["{",["<-","what",["names","moreExts"]],["for","i",["seq_along","moreExts"],["{",["<-","toExt",["[[","moreExts","i"]],["<-","to",["[[","what","i"]],["<-","toExt",[".combineExtends","byExt","toExt","by","to","strictBy"]],["<-",["[[","moreExts","i"],"toExt"]]],"moreExts"]]],["<-",".transitiveSubclasses",["function",[{"by":"","to":"","toExt":"","moreExts":"","strictBy":""}],["{",["for","i",["seq_along","moreExts"],["{",["<-","byExt",["[[","moreExts","i"]],["<-","byExt",[".combineExtends","byExt","toExt","by","to","strictBy"]],["<-",["[[","moreExts","i"],"byExt"]]],"moreExts"]]],["<-",".combineExtends",["function",[{"byExt":"","toExt":"","by":"","to":"","strictBy":""}],["{",["<-","f",["@","toExt","coerce"]],["<-","toExpr",["body","f"]],["<-","fBy",["@","byExt","coerce"]],["<-","byExpr",["body","fBy"]],["if",["&&",["@","byExt","simple"],["@","toExt","simple"]],["{",["<-","expr",["(",["if",["@","byExt","dataPart"],["substitute",["{",["if","strict",["<-","from",["@","from",".Data"]]],"EXPR"],["list",{"EXPR":"toExpr"}]],["if",["@","toExt","dataPart"],["substitute",["{",["<-","from","EXPR"],["if","strict",["@","from",".Data"]]],["list",{"EXPR":"byExpr"}]],["(",["if",["&&",["identical","byExpr",["quote","from"]],["identical","toExpr",["quote","from"]]],["quote","from"],["substitute",["{",["<-","from","E1"],"E2"],["list",{"E1":"byExpr"},{"E2":"toExpr"}]]]]]]]],["<-",["body","f",{"envir":["environment","f"]}],"expr"]],["{",["<-",["@","toExt","simple"],"FALSE"],["if",["!",["identical","byExpr",["quote","from"]]],["<-",["body","f",{"envir":["environment","f"]}],["substitute",["{",["<-","from",["as","from","BY",{"strict":"strict"}]],"TO"],["list",{"BY":"by"},{"TO":"toExpr"}]]]]]],["<-",["@","toExt","coerce"],"f"],["<-","f",["@","toExt","test"]],["<-","toExpr",["body","f"]],["<-","byExpr",["body",["@","byExt","test"]]],["if",["!",["isTRUE","byExpr"]],["{",["if",["!",["isTRUE","toExpr"]],["<-",["body","f",{"envir":["environment","f"]}],["substitute",["&&",["(","BY"],["(","TO"]],["list",{"BY":"byExpr"},{"TO":"toExpr"}]]],["<-",["body","f",{"envir":["environment","f"]}],"byExpr"]]]],["<-",["@","toExt","test"],"f"],["<-","f",["@","byExt","replace"]],["<-","byExpr",["body","f"]],["if",["!","strictBy"],["{",["<-","toDef",["getClassDef","to",{"package":["packageSlot","toExt"]}]],["<-","byDef",["getClassDef","by",{"package":["packageSlot","byExt"]}]],["<-","strictBy",["||",["||",["||",["is.null","toDef"],["is.null","byDef"]],["@","toDef","virtual"]],["@","byDef","virtual"]]]]],["if",["isVirtualClass","by",[".requirePackage",["packageSlot","byExt"]]],["{",["<-","skipDef",["getClassDef","by",{"package":["packageSlot","byExt"]}]],["<-","skipExt",["[[",["@","skipDef","contains"],"to"]],["if",["!",["is.null","skipExt"]],["{",["<-",["body","f",{"envir":["environment","f"]}],["call","\"as\"",["body",["@","skipExt","replace"]],["@","byExt","subClass"]]]]]],["{",["<-","expr",["substitute",["{",["<-",".value",["as","from","BY","STRICT"]],["<-",["as",".value","TO"],"value"],["<-","value",".value"],"BYEXPR"],["list",{"BY":"by"},{"TO":"to"},{"BYEXPR":"byExpr"},{"STRICT":"strictBy"}]]],["<-",["body","f",{"envir":["environment","f"]}],"expr"]]],["<-",["@","toExt","replace"],"f"],["<-",["@","toExt","by"],["@","toExt","subClass"]],["<-",["@","toExt","subClass"],["@","byExt","subClass"]],["<-",["@","toExt","distance"],["+",["@","toExt","distance"],["@","byExt","distance"]]],["if",["&&",["is","byExt","\"conditionalExtension\""],["!",["is","toExt","\"conditionalExtension\""]]],["<-",["class","toExt"],["class","byExt"]]],"toExt"]]],["<-",".simpleCoerceExpr",["function",[{"fromClass":"","toClass":"","fromSlots":"","toDef":""}],["{",["<-","toSlots",["names",["@","toDef","slots"]]],["<-","sameSlots",["(",["&&",["==",["length","fromSlots"],["length","toSlots"]],["!",["any",["is.na",["match","fromSlots","toSlots"]]]]]]],["if",["is.null",["packageSlot","toClass"]],["{",["<-","toClass",["@","toDef","className"]],["if",["is.null",["packageSlot","toClass"]],["<-",["packageSlot","toClass"],["@","toDef","package"]]]]],["<-","chClass",["as.character","toClass"]],["if","sameSlots",["substitute",["{",["<-",["class","from"],"CLASS"],"from"],["list",{"CLASS":"toClass"}]],["if",["==",["length","toSlots"],"0L"],["{",["if",["is.na",["match","chClass",".BasicClasses"]],["substitute",["{",["<-",["attributes","from"],"NULL"],["<-",["class","from"],"CLASS"],"from"],["list",{"CLASS":"toClass"}]],["if",["isVirtualClass","toDef"],["quote","from"],["{",["switch","chClass",{"matrix":""},{"array":["{",["quote",["{",["<-",".dm",["dim","from"]],["<-",".dn",["dimnames","from"]],["<-",["attributes","from"],"NULL"],["<-",["dim","from"],".dm"],["<-",["dimnames","from"],".dn"],"from"]]]},{"ts":["{",["quote",["{",["<-",".tsp",["tsp","from"]],["<-",["attributes","from"],"NULL"],["<-",["tsp","from"],".tsp"],["<-",["class","from"],"\"ts\""],"from"]]]},["quote",["{",["<-",["attributes","from"],"NULL"],"from"]]]]]]],["{",["substitute",["{",["<-","value",["new","CLASS"]],["for","what","TOSLOTS",["<-",["slot","value","what"],["slot","from","what"]]],"value"],["list",{"CLASS":"chClass"},{"TOSLOTS":"toSlots"}]]]]]]]],["<-",".simpleReplaceExpr",["function",[{"toDef":""}],["{",["<-","toSlots",["names",["@","toDef","slots"]]],["substitute",["{",["for","what","TOSLOTS",["<-",["slot","from","what"],["slot","value","what"]]],"from"],["list",{"TOSLOTS":"toSlots"}]]]]],["<-","newClassRepresentation",["function",[{"...":""}],["{",["<-","value",["new","\"classRepresentation\""]],["<-","slots",["list","..."]],["<-","slotNames",["names","slots"]],["for","i",["seq_along","slotNames"],["<-",["slot","value",["[[","slotNames","i"],"FALSE"],["[[","slots","i"]]],"value"]]],["<-",".tempClassDef",["function",[{"...":""}],["{",["<-","value",["new","\"classRepresentation\""]],["<-","slots",["list","..."]],["<-","slotNames",["names","slots"]],["for","i",["seq_along","slotNames"],["<-",["slot","value",["[[","slotNames","i"],"FALSE"],["[[","slots","i"]]],"value"]]],["<-",".newClassRepresentation",["function",[{"...":""}],["new","\"classRepresentation\"","..."]]],["<-",".insertExpr",["function",[{"expr":"","el":""}],["{",["if",["!",["is","expr","\"{\""]],["<-","expr",["substitute",["{","EXPR"],["list",{"EXPR":"expr"}]]]],["<-",["[","expr",[":","3L",["(",["+",["length","expr"],"1"]]]],["[","expr",[":","2L",["length","expr"]]]],["<-",["[[","expr","2L"],"el"],"expr"]]],["<-",".class1",["function",[{"x":""}],["{",["<-","cl",["class","x"]],["if",[">",["length","cl"],"1L"],["[[","cl","1L"],"cl"]]]],["<-","substituteFunctionArgs",["function",[{"def":"","newArgs":"","args":["formalArgs","def"],"silent":"FALSE","functionName":"\"a function\""}],["{",["if",["!",["identical","args","newArgs"]],["{",["if",["!",["missing","functionName"]],["<-","functionName",["paste","\"for\"","functionName"]]],["<-","n",["length","args"]],["if",["!=","n",["length","newArgs"]],["stop",["sprintf","\"trying to change the argument list of %s with %d arguments to have arguments (%s)\"","functionName","n",["paste","newArgs",{"collapse":"\", \""}]],{"domain":"NA"}]],["<-","bdy",["body","def"]],["<-","checkFor",["[","newArgs",["is.na",["match","newArgs","args"]]]],["<-","locals",["all.vars","bdy"]],["if",["&&",["length","checkFor"],["any",["!",["is.na",["match","checkFor","locals"]]]]],["stop",["sprintf","\"get rid of variables in definition %s (%s); they conflict with the needed change to argument names (%s)\"","functionName",["paste",["[","checkFor",["!",["is.na",["match","checkFor","locals"]]]],{"collapse":"\", \""}],["paste","newArgs",{"collapse":"\", \""}]],{"domain":"NA"}]],["<-","ll",["vector","\"list\"",["*","2L","n"]]],["for","i",["seq_len","n"],["{",["<-",["[[","ll","i"],["as.name",["[[","args","i"]]],["<-",["[[","ll",["+","n","i"]],["as.name",["[[","newArgs","i"]]]]],["<-",["names","ll"],["c","args","newArgs"]],["<-",["body","def",{"envir":["environment","def"]}],["substituteDirect","bdy","ll"]],["if",["!","silent"],["{",["<-","msg",["sprintf","\"NOTE: arguments in definition %s changed from (%s) to (%s)\"","functionName",["paste","args",{"collapse":"\", \""}],["paste","newArgs",{"collapse":"\", \""}]]],["message","msg",{"domain":"NA"}]]]]],"def"]]],["<-",".makeValidityMethod",["function",[{"Class":"","validity":""}],["{",["if",["!",["is.null","validity"]],["{",["if",["!",["is.function","validity"]],["stop",["gettextf","\"a validity method must be a function of one argument, got an object of class %s\"",["dQuote",["class","validity"]]],{"domain":"NA"}]],["<-","validity",["substituteFunctionArgs","validity","\"object\"",{"functionName":["sprintf","\"validity method for class '%s'\"","Class"]}]]]],"validity"]]],["<-",".mergeClassDefSlots",["function",[{"ClassDef":"","...":""}],["{",["<-","slots",["list","..."]],["<-","slotNames",["names","slots"]],["for","i",["seq_along","slots"],["<-",["slot","ClassDef",["[[","slotNames","i"],"FALSE"],["[[","slots","i"]]],"ClassDef"]]],["<-","..mergeClassDefSlots",["function",[{"ClassDef":"","...":""}],["{",["<-","slots",["list","..."]],["<-","slotNames",["names","slots"]],["for","i",["seq_along","slots"],["<-",["slot","ClassDef",["[[","slotNames","i"]],["[[","slots","i"]]],"ClassDef"]]],["<-",".gblEnv",["function",[{"f":""}],["{",["<-",["environment","f"],".GlobalEnv"],"f"]]],["<-","..isPrototype",["function",[{"p":""}],["is","p","\"classPrototypeDef\""]]],["<-",".isPrototype",["function",[{"p":""}],[".identC",["class","p"],"\"classPrototypeDef\""]]],["<-",".className",["function",[{"cl":""}],["if",["is","cl","\"classRepresentation\""],["@","cl","className"],["as","cl","\"character\""]]]],["<-",".requirePackage",["function",[{"package":"","mustFind":"TRUE"}],["topenv",["parent.frame",{}]]]],["<-","..requirePackage",["function",[{"package":"","mustFind":"TRUE"}],["{",["<-","value","package"],["if",["nzchar","package"],["{",["if",[".Internal",["exists","package",[".Internal",["getNamespaceRegistry",{}]],"\"any\"","FALSE"]],["<-","value",["getNamespace","package"]],["{",["if",["identical","package","\".GlobalEnv\""],["return",".GlobalEnv"]],["if",["identical","package","\"methods\""],["return",["topenv",["parent.frame",{}]]]]]]]],["if",["is.environment","value"],["return","value"]],["<-","topEnv",["getOption","\"topLevelEnvironment\""]],["if",["is.null","topEnv"],["<-","topEnv",".GlobalEnv"]],["if",["&&",["!",["is.null",["<-","pkgN",["get0","\".packageName\"","topEnv",{"inherits":"TRUE"}]]]],[".identC","package","pkgN"]],["return","topEnv"]],["if",["&&",["nzchar","package"],["require","package",{"character.only":"TRUE"}]],["{"],["{",["if","mustFind",["stop",["gettextf","\"unable to find required package %s\"",["sQuote","package"]],{"domain":"NA"}],["return","NULL"]]]],["getNamespace","package"]]]],["<-",".classDefEnv",["function",[{"classDef":""}],["{",[".requirePackage",["@","classDef","package"]]]]],["<-",".classEnv",["function",[{"Class":"","default":[".requirePackage","\"methods\""],"mustFind":"TRUE"}],["{",["<-","package",["packageSlot","Class"]],["if",["is.null","package"],["{","default"],[".requirePackage","package"]]]]],["<-","..classEnv",["function",[{"Class":"","default":[".requirePackage","\"methods\""],"mustFind":"TRUE"}],["{",["<-","package",["{",["if",["is.character","Class"],["packageSlot","Class"],["@","Class","package"]]]],["if",["is.null","package"],["{",["<-","value","default"],["<-","def",["getClassDef","Class","value","NULL"]],["if",["is.null","def"],["{",["<-","value",".GlobalEnv"],["<-","def",["getClassDef","Class","value","NULL"]],["if",["is.null","def"],["{",["<-","value",[".requirePackage","\"methods\""]],["if",["!",["identical","default","value"]],["<-","def",["getClassDef","Class","value","NULL"]]]]]]],["if",["&&",["is.null","def"],"mustFind"],["stop",["gettextf","\"unable to find an environment containing class %s\"",["dQuote","Class"]],{"domain":"NA"}]],"value"],[".requirePackage","package"]]]]],["<-",".genEnv",["function",[{"f":"","default":[".requirePackage","\"methods\""],"package":"\"\""}],["{",["if",["!",["nzchar","package"]],["<-","package",["packageSlot","f"]]],["if",["is.null","package"],["{",["<-","value","default"],["<-","def",[".getGeneric","f","value"]],["if",["is.null","def"],["{",["<-","value",".GlobalEnv"],["<-","def",[".getGeneric","f","value"]],["if",["is.null","def"],["{",["<-","value",[".requirePackage","\"methods\""]],["if",["!",["identical","default","value"]],["<-","def",[".getGeneric","f","value"]]]]]]],["if",["is.null","def"],["baseenv",{}],"value"]],[".requirePackage","package"]]]]],["<-",".classTable",["new.env","TRUE",["baseenv",{}]]],["assign","\"#HAS_DUPLICATE_CLASS_NAMES\"","FALSE",{"envir":".classTable"}],["<-",".duplicateClassesExist",["function",[{"on":""}],["{",["<-","value",["get","\"#HAS_DUPLICATE_CLASS_NAMES\"",{"envir":".classTable"}]],["if",["nargs",{}],["assign","\"#HAS_DUPLICATE_CLASS_NAMES\"","on",{"envir":".classTable"}]],"value"]]],["<-",".cacheClass",["function",[{"name":"","def":"","doSubclasses":"FALSE","env":""}],["{",["if",["!",["isFALSE","doSubclasses"]],[".recacheSubclasses",["@","def","className"],"def","env"]],["if",["!",["is.null",["<-","prev",["[[",".classTable","name"]]]],["{",["<-","newpkg",["@","def","package"]],["if",["is","prev","\"classRepresentation\""],["{",["if",["identical","prev","def"],["return",{}]],["<-","pkg",["@","prev","package"]],["if",["identical","pkg","newpkg"],["{",[".cache_class","name",[".extendsForS3","def"]],["return",["<-",["[[",".classTable","name"],"def"]]],["if",[".simpleDuplicateClass","def","prev"],["return",{}]]],["<-","prev",["list","prev"]],["<-",["names","prev"],"pkg"]]],["<-","i",["match","newpkg",["names","prev"]]],["if",["is.na","i"],["<-",["[[","prev","newpkg"],"def"],["if",["identical","def",["[[","prev","i"]],["return",{}],["<-",["[[","prev","i"],"def"]]],["<-","def","prev"],["if",[">",["length","def"],"1L"],[".duplicateClassesExist","TRUE"]]]],["<-",["[[",".classTable","name"],"def"]]]],["<-",".simpleDuplicateClass",["function",[{"def":"","prev":""}],["{",["<-","supers",["names",["@","def","contains"]]],["<-","prevSupers",["names",["@","prev","contains"]]],["if",["||",["!=",["length","supers"],["length","prevSupers"]],["any",["is.na",["match","supers","prevSupers"]]]],["return","FALSE"]],["<-","verbose",["getOption","\"verbose\""]],["<-","S3",["%in%","\"oldClass\"","supers"]],["if","S3",["{",["return","TRUE"]]],["<-","dupsExist",[".duplicateClassesExist",{}]],["if","dupsExist",["{",["<-","dups",[">",["match","supers",["multipleClasses",{}],"0"],"0"]],["if",["any","dups"],["{",["if","verbose",["message",["gettextf","\"Note: some superclasses of class %s in package %s have duplicate definitions.  This definition is not being treated as equivalent to that from package %s\"",["dQuote",["@","def","className"]],["sQuote",["@","def","package"]],["sQuote",["@","prev","package"]]],{"domain":"NA"}]],["return","FALSE"]]]]],["<-","slots",["names",["@","def","slots"]]],["<-","prevSlots",["names",["@","prev","slots"]]],["if",["||",["!=",["length","slots"],["length","prevSlots"]],["any",["is.na",["match","slots","prevSlots"]]]],["return","FALSE"]],["for","what","slots",["{",["<-","slotClasses",["@","def","slots"]],["<-","prevClasses",["@","prev","slots"]],["<-","clWhat",["[[","slotClasses","what"]],["<-","prevWhat",["[[","prevClasses","what"]],["if",["||",["!",["identical",["as.character","clWhat"],["as.character","prevWhat"]]],["(",["&&","dupsExist",["!",["identical",["as.character",["packageSlot","clWhat"]],["as.character",["packageSlot","prevWhat"]]]]]]],["return","FALSE"]]]],["if","verbose",["message",["gettextf","\"Note: the specification for class %s in package %s seems equivalent to one from package %s: not turning on duplicate class definitions for this class.\"",["dQuote",["@","def","className"]],["sQuote",["@","def","package"]],["sQuote",["@","prev","package"]]],{"domain":"NA"}]],"TRUE"]]],["<-",".uncacheClass",["function",[{"name":"","def":""}],["{",["if",["!",["is.null",["<-","prev",["[[",".classTable","name"]]]],["{",["if",["is","def","\"classRepresentation\""],["<-","newpkg",["@","def","package"]],["<-","newpkg","\"\""]],["if",["&&",["is","prev","\"classRepresentation\""],["identical",["@","prev","package"],"newpkg"]],["return",["remove",{"list":"name"},{"envir":".classTable"}]]],["<-","i",["match","newpkg",["names","prev"]]],["if",["!",["is.na","i"]],["<-",["[[","prev","i"],"NULL"],["return",{}]],["if",["==",["length","prev"],"0L"],["return",["remove",{"list":"name"},{"envir":".classTable"}]],["if",["==",["length","prev"],"1L"],["<-","prev",["[[","prev","1L"]]]],["assign","name","prev",{"envir":".classTable"}]]]]]],["<-",".getClassesFromCache",["function",[{"name":""}],["{",[".Call","C_R_getClassFromCache","name",".classTable"]]]],["<-",".resolveClassList",["function",[{"value":"","where":"","package":"","resolve.confl":"\"first\"","resolve.msg":"TRUE"}],["{",["if",["is.null","package"],["<-","package",["if",["is.character","where"],"where",["getPackageName","where","FALSE"]]]],["<-","pkgs",["names","value"]],["<-","i",["match","package","pkgs","0L"]],["if",["&&",["==","i","0L"],["!=","package","\"methods\""]],["<-","i",["match","\"methods\"","pkgs","0L"]]],["if",[">","i","0L"],["[[","value","i"],["{",["switch","resolve.confl",{"\"none\"":"NULL"},{"\"first\"":["{",["if","resolve.msg",["{",["message",["gettextf","\"Found more than one class \\\"%s\\\" in cache; using the first, from namespace '%s'\"",["@",["[[","value","1"],"className"],["[","pkgs","1"]],{"domain":"NA"}],["message","\"Also defined by \"",["paste",["sQuote",["[","pkgs",["-","1"]]],{"collapse":"\" \""}]]]],["[[","value","1"]]},{"\"all\"":"value"}]]]]]],["<-",".getClassFromCache",["function",[{"name":"","where":"","package":["packageSlot","name"],"resolve.confl":"\"first\"","resolve.msg":"TRUE"}],["{",["<-","value",[".getClassesFromCache","name"]],["if",["is.list","value"],["{",["<-","value",[".resolveClassList","value","where","package","resolve.confl","resolve.msg"]]]],"value"]]],["<-",".recacheSubclasses",["function",[{"class":"","def":"","env":""}],["{",["<-","subs",["@","def","subclasses"]],["<-","subNames",["names","subs"]],["for","i",["seq_along","subs"],["{",["<-","what",["[[","subNames","i"]],["<-","subDef",["getClassDef","what",{"package":["packageSlot",["[[","subs","i"]]}]],["if",["is.null","subDef"],["<-","subDef",["getClassDef","what","env"]]],["if",["is.null","subDef"],["warning",["gettextf","\"undefined subclass %s of class %s; definition not updated\"",[".dQ","what"],[".dQ",["@","def","className"]]]],["if",["is.na",["match","what",["names",["@","subDef","contains"]]]],["{",["<-","cntns",["@","subDef","contains"]],["<-",["[[","cntns","class"],["[[","subs","i"]],["<-","cntns",["[","cntns",["sort.list",["vapply","cntns",["function",[{"x":""}],["@","x","distance"]],"1"]]]],["<-",["@","subDef","contains"],"cntns"],[".cacheClass","what","subDef","FALSE","env"]]]]]],"NULL"]]],["<-",".checkSubclasses",["function",[{"class":"","def":"","class2":"","def2":"","where":"","where2":""}],["{",["<-","where",["as.environment","where"]],["<-","where2",["as.environment","where2"]],["<-","subs",["@","def","subclasses"]],["<-","subNames",["names","subs"]],["<-","extDefs",["@","def2","subclasses"]],["for","i",["seq_along","subs"],["{",["<-","what",["[[","subNames","i"]],["if",[".identC","what","class2"],["next"]],["<-","cname",["classMetaName","what"]],["if",["!",["is.null",["<-","subDef",["get0","cname",{"envir":"where"},{"inherits":"FALSE"}]]]],["{",["<-","cwhere","where"]],["if",["!",["is.null",["<-","subDef",["get0","cname",{"envir":"where2"},{"inherits":"FALSE"}]]]],["{",["<-","cwhere","where2"]],["{",["message",["gettextf",["paste","\"From .checkSubclasses(): subclass %s of class %s is not local and\"","\"is not updated for new inheritance information currently;\"","\"\\n[where=%s, where2=%s]\""],[".dQ","what"],[".dQ","class"],["format","where"],["format","where2"]],{"domain":"NA"}],["next"]]]],["<-","extension",["[[","extDefs","what"]],["if",["is.null","extension"],["warning",["gettextf","\"no definition of inheritance from %s to %s, though the relation was implied by the setIs() from %s\"",[".dQ","what"],[".dQ",["@","def2","className"]],[".dQ","class"]],{"call.":"FALSE"},{"domain":"NA"}],["if",["is.na",["match","class2",["names",["@","subDef","contains"]]]],["{",["if",["isTRUE",["as.logical",["Sys.getenv","\"_R_METHODS_SHOW_CHECKSUBCLASSES\"","\"false\""]]],["message",["sprintf",["paste","\"Debugging .checkSubclasses(): assignClassDef(what=\\\"%s\\\", *, where=%s, force=TRUE);\\n\"","\"E := environment(): %s; parent.env(E): %s\""],"what",["format","cwhere"],["format",["<-","E",["environment",{}]]],["format",["parent.env","E"]]]]],["<-",["[[",["@","subDef","contains"],"class2"],"extension"],["assignClassDef","what","subDef","cwhere","TRUE"]]]]]],"NULL"]]],["<-",".removeSuperclassBackRefs",["function",[{"Class":"","classDef":"","classWhere":""}],["{",["if",["length",["@","classDef","contains"]],["{",["<-","superclasses",["names",["@","classDef","contains"]]],["for","what","superclasses",["{",["<-","cdef",[".getClassFromCache","what","classWhere",{"resolve.confl":"\"all\""}]],["if",["is","cdef","\"classRepresentation\""],[".removeSubClass","what","Class","cdef"],["if",["is.list","cdef"],["lapply","cdef",["function",[{"cl":""}],[".removeSubClass","what","Class","cl"]]]]]]]]],"NULL"]]],["<-",".removeSubClass",["function",[{"class":"","subclass":"","cdef":""}],["{",["if",["is.null","cdef"],["{"],["{",["<-","newdef",[".deleteSubClass","cdef","subclass"]],["if",["!",["is.null","newdef"]],[".cacheClass","class","newdef","FALSE",["@","cdef","package"]]],["<-","pname",["@","cdef","package"]],["if",["identical","pname","\".GlobalEnv\""],["{",["<-","pos","1"]],["{",["<-","pname",["paste0","\"package:\"","pname"]],["<-","pos",["match","pname",["search",{}],"0"]]]],["if","pos",["{",["<-","penv",["as.environment","pname"]],["<-","cmeta",["classMetaName","class"]],["if",["!",["is.null",["<-","cdefp",["[[","penv","cmeta"]]]],["{",["if",["%in%","subclass",["names",["@","cdefp","subclasses"]]],["{",["<-","newdef",[".deleteSubClass","cdefp","subclass"]],["if",["!",["is.null","newdef"]],["{",["if",["bindingIsLocked","cmeta","penv"],[".assignOverBinding","cmeta","newdef","penv","FALSE"],["<-",["[[","penv","cmeta"],"newdef"]]]]]]]]]]]],["<-","sig",["signature",{"from":"subclass"},{"to":"class"}]],["if",["existsMethod","\"coerce\"","sig"],[".removeCachedMethod","\"coerce\"","sig"]],["if",["existsMethod","\"coerce<-\"","sig"],[".removeCachedMethod","\"coerce<-\"","sig"]]]]],["<-",".deleteSubClass",["function",[{"cdef":"","subclass":""}],["{",["<-","subclasses",["@","cdef","subclasses"]],["<-","ii",["match","subclass",["names","subclasses"],"0"]],["if",[">","ii","0"],["{",["<-",["@","cdef","subclasses"],["[","subclasses",["-","ii"]]],"cdef"],"NULL"]]]],["<-",".removeSuperClass",["function",[{"class":"","superclass":""}],["{",["<-","cdef",["getClassDef","class"]],["if",["is.null","cdef"],["{"],["{",["<-","newdef",[".deleteSuperClass","cdef","superclass"]],["if",["!",["is.null","newdef"]],[".cacheClass","class","newdef","FALSE","where"]]]],["<-","sig",["signature",{"from":"class"},{"to":"superclass"}]],["if",["existsMethod","\"coerce\"","sig"],[".removeCachedMethod","\"coerce\"","sig"]],["if",["existsMethod","\"coerce<-\"","sig"],[".removeCachedMethod","\"coerce<-\"","sig"]],["<-","evv",["findClass","class",".GlobalEnv"]],["<-","mname",["classMetaName","class"]],["for","where","evv",["{",["if",["!",["is.null",["<-","cdef",["[[","where","mname"]]]],["{",["<-","newdef",[".deleteSuperClass","cdef","superclass"]],["if",["!",["is.null","newdef"]],["{",["assignClassDef","class","newdef","where","TRUE"]]]]]]],"NULL"]]],["<-",".deleteSuperClass",["function",[{"cdef":"","superclass":""}],["{",["<-","superclasses",["@","cdef","contains"]],["<-","ii",["match","superclass",["names","superclasses"],"0L"]],["if","ii",["{",["<-",["@","cdef","contains"],["[","superclasses",["-","ii"]]],["for","subclass",["names",["@","cdef","subclasses"]],[".removeSuperClass","subclass","superclass"]],"cdef"],"NULL"]]]],["<-","classesToAM",["function",[{"classes":"","includeSubclasses":"FALSE","abbreviate":"2"}],["{",["<-",".mergeMatrices",["function",[{"m1":"","m2":""}],["{",["if",["==",["nrow","m1"],"0"],["return","m2"]],["<-","dn1",["dimnames","m1"]],["<-","dn2",["dimnames","m2"]],["<-","rows",["unique",["c",["[[","dn1","1"],["[[","dn2","1"]]]],["<-","columns",["unique",["c",["[[","dn1","2"],["[[","dn2","2"]]]],["<-","value",["matrix","0",["length","rows"],["length","columns"],{"dimnames":["list","rows","columns"]}]],["<-",["[","value",["[[","dn1","1"],["[[","dn1","2"]],"m1"],["<-",["[","value",["[[","dn2","1"],["[[","dn2","2"]],"m2"],"value"]]],["if",["==",["length","includeSubclasses"],"1"],["<-","includeSubclasses",["rep.int","includeSubclasses",["length","classes"]]]],["if",["||",["!",["is","includeSubclasses","\"logical\""]],["!=",["length","includeSubclasses"],["length","classes"]]],["stop","\"argument 'includeSubclasses' must be a logical, either one value or a vector of the same length as argument 'classes'\""]],["<-","value",["matrix","0","0","0"]],["for","i",["seq_along","classes"],["{",["<-","class",["[[","classes","i"]],["<-","classDef",["getClass","class"]],["<-","value",[".mergeMatrices","value",[".oneClassToAM","classDef",["[[","includeSubclasses","i"]]]]]],["<-","abbr",["-",["match",["as.integer","abbreviate"],[":","0","3"]],"1"]],["if",["||",["!=",["length","abbr"],"1"],["is.na","abbr"]],["stop","\"argument 'abbreviate' must be 0, 1, 2, or 3\""]],["if",["%%","abbr","2"],["<-",["[[",["dimnames","value"],"1"],["abbreviate",["[[",["dimnames","value"],"1"]]]],["if",["%/%","abbr","2"],["<-",["[[",["dimnames","value"],"2"],["abbreviate",["[[",["dimnames","value"],"2"]]]],"value"]]],["<-",".oneClassToAM",["function",[{"classDef":"","includeSubclasses":"FALSE","short":"FALSE"}],["{",["<-","findEdges",["function",[{"extensions":""}],["{",["<-","superclasses",["names","extensions"]],["<-","edges",["numeric",{}]],["for","what","superclasses",["{",["<-","whatDef",["getClassDef","what",{"package":["packageSlot",["[[","extensions","what"]]}]],["<-","ifrom",["match","what","nodes"]],["if",["||",["is.null","whatDef"],["is.na","ifrom"]],["next"]],["<-","exts",["@","whatDef","contains"]],["<-","whatedges",["names","exts"]],["<-","ito",["match","whatedges","nodes","0"]],["for","i",["seq_along","exts"],["if",["&&",[">",["[[","ito","i"],"0"],["==",["@",["[[","exts","i"],"distance"],"1"]],["<-","edges",["c","edges","ifrom",["[[","ito","i"]]]]]]],"edges"]]],["<-","nodes",["c",["@","classDef","className"],["names",["@","classDef","contains"]]]],["if","includeSubclasses",["<-","nodes",["c","nodes",["names",["@","classDef","subclasses"]]]]],["<-","nodes",["unique","nodes"]],["<-","labels",["if",["isTRUE","short"],["abbreviate","nodes"],["if",["is.character","short"],["{",["if",["!=",["length","short"],["length","nodes"]],["stop",["gettextf","\"needed the supplied labels vector of length %d, got %d\"",["length","nodes"],["length","short"]],{"domain":"NA"}],"short"]],"nodes"]]],["<-","size",["length","nodes"]],["<-","value",["matrix","0","size","size",{"dimnames":["list","labels","labels"]}]],["<-","ifrom",["match",["@","classDef","className"],"nodes"]],["<-","extensions",["@","classDef","contains"]],["<-","superclasses",["names","extensions"]],["<-","ito",["match","superclasses","nodes"]],["<-","edges",["numeric",{}]],["for","i",["seq_along","extensions"],["{",["<-","exti",["[[","extensions","i"]],["if",["==",["@","exti","distance"],"1"],["<-","edges",["c","edges","ifrom",["[[","ito","i"]]]]]],["<-","edges",["c","edges",["findEdges",["@","classDef","contains"]]]],["if","includeSubclasses",["{",["<-","edges",["c","edges",["findEdges",["@","classDef","subclasses"]]]]]],["<-","edges",["t",["matrix","edges",{"nrow":"2"}]]],["<-",["[","value","edges"],"1"],"value"]]],["<-",".choosePos",["function",[{"thisClass":"","superclasses":"","subNames":"","affected":""}],["{",["<-","candidates",["list",{}]],["<-","allNames",["c","thisClass","superclasses"]],["<-","dups",["unique",["[","superclasses","affected"]]],["<-","whichCase",["names","subNames"]],["for","what","dups",["{",["<-","where",["[",["seq_along","allNames"],[">",["match","allNames","what","0"],"0"]]],["<-","whatRemove",["lapply",["-",["seq_along","where"]],["function",[{"x":"","y":""}],["[","y","x"]],{"y":"where"}]],["if",["==",["length","candidates"],"0"],["<-","candidates","whatRemove"],["<-","candidates",["outer","candidates","whatRemove",["function",[{"x":"","y":""}],["mapply","c","x","y",{"SIMPLIFY":"FALSE"}]]]]]]],["<-","problems",["function",[{"x":"","y":""}],["any",["<",["diff",["match","y","x"]],"0"]]]],["<-","possibles",["lapply","candidates",["function",[{"x":"","names":""}],["[","names",["-","x"]]],{"names":"allNames"}]],["<-","scores",["vector","\"list\"",["length","possibles"]]],["for","i",["seq_along","possibles"],["{",["<-","score",["vapply","subNames","problems","NA",{"x":["[[","possibles","i"]}]],["<-",["[[","scores","i"],["[","whichCase","score"]],["if",["!",["any","score"]],["return",["+",["-",["[[","candidates","i"]],"1"]]]]],["<-","i",["which.min",["lengths","scores"]]],["list",["+",["-",["[[","candidates","i"]],"1"],["[[","scores","i"]]]]],["<-",".checkGeneric",["function",[{"what":"","where":""}],["{",["<-",".checkFun",["function",[{"x":""}],["{",["<-","maybe",["if",["!",["is.null",["<-","f",["get0","x","where"]]]],["is.function","f"],"FALSE"]],["if","maybe",["<-","maybe",["||",["||",["is","f","\"genericFunction\""],["(",[">",["length",["grep","\"UseMethod\"",["deparse","f"]]],"0"]]],["is.primitive","f"]]]],"maybe"]]],["vapply","what",".checkFun","NA"]]]],["<-","S3forS4Methods",["function",[{"where":"","checkClasses":["character",{}]}],["{",["<-","allClasses",["getClasses","where"]],["if",[">",["length","checkClasses"],"0"],["<-","allClasses",["[","allClasses",[">",["match","allClasses","checkClasses","0"],"0"]]]],["if",["==",["length","allClasses"],"0"],["return","allClasses"]],["<-","pattern",["paste0","\"([.]\"","allClasses","\"$)\"",{"collapse":"\"|\""}]],["<-","allObjects",["names","where"]],["<-","allObjects",["[","allObjects",["-",["grep","\"^[.][_][_]\"","allObjects"]]]],["<-","allObjects",["grep","pattern","allObjects",{"value":"TRUE"}]],["if",[">",["length","allObjects"],"0"],["{",["<-","badMethods","allObjects"],["<-","funs",["sub","pattern","\"\"","badMethods"]],["<-","uniqueFuns",["unique","funs"]],["<-","uniqueFuns",["[","uniqueFuns",["nzchar","uniqueFuns"]]],["<-","possible",[".checkGeneric","uniqueFuns","where"]],["if",["!",["any","possible"]],["return",["character",{}]]],["<-","uniqueFuns",["[","uniqueFuns","possible"]],["<-","badMethods",["[","badMethods",[">",["match","funs","uniqueFuns","0"],"0"]]],["<-","allObjects","badMethods"],["<-",["attr","allObjects","\"functions\""],"uniqueFuns"]]],"allObjects"]]],["<-","isMixin",["function",[{"classDef":""}],["{",["<-","val","0"],["<-","cc",["@","classDef","contains"]],["for","cl","cc",["{",["if",["||",[">",["@","cl","distance"],"1"],[">","val","1"]],["break"]],["<-","val",["+","val","1"]]]],[">","val","1"]]]],["<-",".classDefIsLocked",["function",[{"classDef":""}],["{",["<-","what",["classMetaName",["@","classDef","className"]]],["<-","env",[".NamespaceOrEnvironment",["@","classDef","package"]]],["&&",["&&",["is.environment","env"],["exists","what",{"envir":"env"},{"inherits":"FALSE"}]],["bindingIsLocked","what","env"]]]]]]
